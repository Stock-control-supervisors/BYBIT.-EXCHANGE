var e,t,n=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&l(e,n,t[n]);if(i)for(var n of i(t))s.call(t,n)&&l(e,n,t[n]);return e},d=(e,t)=>a(e,o(t)),u=(e,t)=>{var n={};for(var a in e)r.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&i)for(var a of i(e))t.indexOf(a)<0&&s.call(e,a)&&(n[a]=e[a]);return n};export function __vite_legacy_guard(){import("data:text/javascript,")}import{p as m,u as _,s as p,t as E,v as y,w as T,x as I,y as h,z as S,A as O,B as b}from"./vendor.e5f221c3.js";import{w as R,f as g,B as N,a as C,C as v,M as A,t as f,J as L,W as P,aG as D,aH as w,z as M,ap as x,c as U,aI as B,aJ as k,aK as j,$ as H,T as F,u as G,r as V,am as q,ao as W,N as Y,O as $,n as K,ab as Q,ac as z,H as X,ak as J,al as Z,V as ee,aL as te,D as ne,aM as ae,Y as oe,aN as ie,G as re,aO as se,aP as le,aQ as ce,aa as de,ae as ue,af as me,aR as _e,q as pe,g as Ee,aS as ye}from"./byBase.02d5f47a.js";import{g as Te,P as Ie,U as he,i as Se,H as Oe,A as be,s as Re,a as ge,o as Ne,f as Ce,b as ve,p as Ae,t as fe,c as Le,L as Pe,n as De,d as we,E as Me,B as xe,F as Ue,e as Be,m as ke,u as je,h as He,j as Fe,k as Ge,l as Ve,q as qe,Q as We,r as Ye,v as $e,w as Ke,O as Qe,x as ze,N as Xe,y as Je,z as Ze,C as et,M as tt,D as nt,G as at,I as ot,J as it,K as rt}from"./byTrade.5a0c6a61.js";import{D as st,s as lt,n as ct,J as dt,j as ut,K as mt,L as _t,M as pt,u as Et,N as yt,l as Tt,O as It,p as ht,T as St,P as Ot,Q as bt,R as Rt}from"./byDeps.cf9e902d.js";import"./__commonjsHelpers__.814de68e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const gt={MODE:"MODE",DEV:"DEV",VITE_LOCAL_TOKEN:"VITE_LOCAL_TOKEN",VITE_BUILD_ENV:"VITE_BUILD_ENV",VITE_API_DOMAIN:"VITE_API_DOMAIN",VITE_API_USER_DOMAIN:"VITE_API_USER_DOMAIN",VITE_WS_PUBLIC_API_DOMAIN:"VITE_WS_PUBLIC_API_DOMAIN",VITE_WS_PING_INTERVAL:"VITE_WS_PING_INTERVAL",VITE_WS_PRIVATE_API_DOMAIN:"VITE_WS_PRIVATE_API_DOMAIN",VITE_WS_API_DOMAIN:"VITE_WS_API_DOMAIN",VITE_UNIFRAME_DOMAIN:"VITE_UNIFRAME_DOMAIN",VITE_WS_CONNECTION_TIMEOUT:"VITE_WS_CONNECTION_TIMEOUT",VITE_DEBUG:"VITE_DEBUG",VITE_SENTRY_ENABLED:"VITE_SENTRY_ENABLED",VITE_SENTRY_DSN:"VITE_SENTRY_DSN",VITE_MAX_BREADCRUMBS:"VITE_MAX_BREADCRUMBS",VITE_SAMPLE_RATE:"VITE_SAMPLE_RATE",VITE_MONITOR_REPORT_DOMAIN_URL:"VITE_MONITOR_REPORT_DOMAIN_URL",VITE_MONITOR_PROJECT_ID:"VITE_MONITOR_PROJECT_ID",VITE_MONITOR_ERROR_REPEAT:"VITE_MONITOR_ERROR_REPEAT",VITE_MONITOR_DEFAULTS_ENV:"VITE_MONITOR_DEFAULTS_ENV",VITE_DEAD_POOL_DOMAIN:"VITE_DEAD_POOL_DOMAIN"},Nt=(e,t)=>{if(e)try{"string"!=typeof t&&(t=JSON.stringify(t)),localStorage.setItem(e,t)}catch(n){}},Ct=e=>{if(!e)return;let t=localStorage.getItem(e);try{return t=JSON.parse(t||""),t}catch{return t}},vt={iv:"iv",price:"usd"},At={GoodTillCancel:"GTC",PostOnly:"Post-Only",ImmediateOrCancel:"IOC",FillOrKill:"FOK"},ft={GoodTillCancel:"1",PostOnly:"2",ImmediateOrCancel:"3",FillOrKill:"4"};var Lt=(e=>(e.Call="call",e.Put="put",e.P="P",e.C="C",e))(Lt||{}),Pt=(e=>(e.Buy="buy",e.Sell="sell",e))(Pt||{}),Dt=(e=>(e.OPTION_HAS_SHOW_SINGLE_HINT="OPTION_HAS_SHOW_SINGLE_HINT",e.OPTION_GEAR="OPTION_GEAR",e.BY_ROUTE_CHOSEN="by_route_chosen",e))(Dt||{}),wt=(e=>(e.dark="dark",e.dark_reverse="light",e.light="light",e.light_reverse="dark",e))(wt||{}),Mt=(e=>(e.ACCOUNT_TYPE_CONTRACT="ACCOUNT_TYPE_CONTRACT",e.ACCOUNT_TYPE_SPOT="ACCOUNT_TYPE_SPOT",e.ACCOUNT_TYPE_UNIFIED="ACCOUNT_TYPE_UNIFIED",e.ACCOUNT_TYPE_INVESTMENT="ACCOUNT_TYPE_INVESTMENT",e.ACCOUNT_TYPE_FUND="ACCOUNT_TYPE_FUND",e.ACCOUNT_TYPE_OPTION="ACCOUNT_TYPE_OPTION",e))(Mt||{});const xt="OPTION_CANCELORDER_DOUBLE_CONFIRM",Ut="OPTION_MAKEORDER_DOUBLE_CONFIRM",Bt="OPTION_AUDIO_NOTICE",kt="CANCEL_ALLORDER_DOUBLE_CONFIRM",jt="OPTION_IS_BATCH_PLACEORDER_MODEL",Ht="BYBIT_GA_UID",Ft="BYBIT_UMA_STATUS",Gt="BY_OPTION_UNIFRAME_SESSION",Vt={NEW_USER:"new-user",UPGRADE_UTA:"upgrade-uta",NORMAL:"normal"},qt="BYBIT_THEME_KEY",Wt=wt.dark,Yt=3200305,$t=3200306,Kt=[30100],Qt="common",zt="global",Xt=e=>{if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach((e=>{t.push(e)})),t.map((e=>Xt(e)))}if("object"==typeof e){const t=c({},e);return Object.keys(t).forEach((e=>{t[e]=Xt(t[e])})),t}return e};function Jt(e,t){return Array.isArray(e)?e.map((e=>Jt(e,t))):Object.keys(e).reduce(((n,a)=>(n[t[a]||a]=e[a],n)),{})}function Zt(e){return{VITE_USER_NODE_ENV:"production",VITE_WS_PING_INTERVAL:"7000",VITE_BUILD_ENV:"",VITE_API_DOMAIN:"https://api2."+window.__Option_FE__.getTLD()+"",VITE_API_USER_DOMAIN:"https://api2."+window.__Option_FE__.getTLD()+"",VITE_UNIFRAME_DOMAIN:"//www."+window.__Option_FE__.getTLD()+"",VITE_WS_PUBLIC_API_DOMAIN:"wss://ws2."+window.__Option_FE__.getTLD()+"/trade/option/usdc/public/v1?_platform=2&source=option",VITE_WS_PRIVATE_API_DOMAIN:"wss://ws2."+window.__Option_FE__.getTLD()+"/private?v=2&source=option",VITE_WS_API_DOMAIN:"wss://ws2."+window.__Option_FE__.getTLD()+"",VITE_DEBUG:"1",VITE_SENTRY_ENABLED:"1",VITE_SENTRY_DSN:"https://7e8d2b03f968487c8b88e5b4b41bcffa@sentry.ffbbbdc6d3c353211fe2ba39c9f744cd.com/23",VITE_MAX_BREADCRUMBS:"100",VITE_SAMPLE_RATE:"1",VITE_SENTRY_DEFAULTS_URL:"https://sentry.ffbbbdc6d3c353211fe2ba39c9f744cd.com/",VITE_SENTRY_AUTH_TOKEN:"b5d8a980f30041539d6c32056034f91479cf84829fbc4e4b8f6a79b20da43a75",VITE_SENTRY_DEFAULTS_ORG:"bybit",VITE_SENTRY_DEFAULTS_PROJECT:"option-web",VITE_MONITOR_SOURCEMAP_UPLOAD_DOMAIN_URL:"http://10.3.6.183:8001",VITE_MONITOR_REPORT_DOMAIN_URL:"https://monitor-report.ffe390afd658c19dcbf707e0597b846d.de/report",VITE_MONITOR_DEFAULTS_ENV:"mainnet",VITE_MONITOR_PROJECT_ID:"a6affb27c1b96bc12a97da389e63ba28",VITE_MONITOR_ERROR_REPEAT:"20",VITE_DEAD_POOL_DOMAIN:"//api2."+window.__Option_FE__.getTLD()+"",VITE_BYBIT_REACT_SRC:"/common-static/fhs/react.18.2.0.min-860f1d37ec17b010c94069b99a49ae7b.js",BASE_URL:"/trade/option/usdc/",MODE:"prod",DEV:!1,PROD:!0}[e]}function en(){try{return location.search.includes("uniframe=false")}catch(e){return!1}}function tn(e){if("-"===e||void 0===e||"--"===e)return"";if("buy"===e.toLocaleLowerCase())return"opt-green";if("sell"===e.toLocaleLowerCase())return"opt-red";const t=f(e);return t>0?"opt-green":t<0?"opt-red":""}function nn(e){return`${Zt(e)}`}const an=e=>{var t;const{record:n,allCommonConfig:a,defaultPrecision:o=1}=e,{baseCoin:i,symbol:r}=n,s=i||r.split("-")[0];return Number(null==(t=a[s])?void 0:t.fePriceFractionPrecision)||o},on=e=>e?{darkIcon:`/bycsi-root/assets/image/coins/dark/${e.toLowerCase()}.svg`,lightIcon:`/bycsi-root/assets/image/coins/light/${e.toLowerCase()}.svg`}:{darkIcon:"/bycsi-root/assets/image/coins/default-dark.png",lightIcon:"/bycsi-root/assets/image/coins/default-light.png"},rn=()=>Ct("BYBIT_THEME_KEY")||Wt,sn=()=>{var e;const t=wt[rn()];null==(e=document.getElementById("OPTIONHTML"))||e.classList.add(`usdc-theme-${t}`,`theme-${t}`)},ln=e=>{const t=document.getElementById("OPTIONHTML"),n=e,a=wt[n],o=wt[`${n}_reverse`];null==t||t.classList.remove(`theme-${o}`,`usdc-theme-${o}`),null==t||t.classList.add(`theme-${a}`,`usdc-theme-${a}`)},cn=e=>{const t=["gears","defaultGear","frontGlobalConfig"],n=Object.entries(e).map((([e,n])=>({[e]:t.includes(e)?n:f(n)})));return Object.assign({},...n)},dn=e=>Number.isNaN(Number(e))?0:Number(e),un=e=>L(dn(e),1e8,"div");function mn(e){if("number"==typeof e){const t=e.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/);return e.toFixed(Math.max(0,(t[1]||"").length-t[2]))}return e}const _n=e=>`${R}//${g}${e.trim()}`,pn=[_n(C),...(null==(e=N)?void 0:e.split(",").filter(Boolean).map((e=>_n(e))))||[]],En="1"===localStorage.getItem("simulatedTrading"),yn=(e,t,n=2,a,o=100)=>{let i=new st(e).sub(t).valueOf(),r=new st(i).div(t).valueOf();const s=4-Math.log10(o);return r=A(r*o,s),i=A(i,n),a&&(r=dn(r),i=dn(i)),{changeRate24H:r,changeTurnover24H:i}};function Tn(e){return new Promise(((t,n)=>{const a=()=>{(Sn.log({t:"cookie",tokenType:"ott"}),v({url:`${Te().API2_HOST}/user/private/ott`,method:"POST"}).then((e=>{if(null==e?void 0:e.hasError)throw new Error("OTT接口调用失败");return Promise.resolve(e)}))).then(t).catch((async t=>{var o;e>0?(await(o=500,new Promise((e=>setTimeout(e,o)))),console.log("接口调用失败，重试剩余次数: "+(e-1)),e--,a()):(Sn.log({t:"cookie",tokenType:"retryFailed"}),n(new Error("接口调用失败，重试次数已用完")))}))};a()}))}const In=e=>"string"!=typeof e||0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),hn=Zt(gt.VITE_MONITOR_DEFAULTS_ENV),Sn=new m;var On={setMonitorUserData:e=>{Sn.setUser({id:String(e)})},emitCustomError:(e,t)=>{Sn.log({t:e,ext:t})},addEvent:Sn.log.bind(Sn),sensors:lt},bn={start:()=>{Sn.init({env:hn||"dev",release:"2024_02_27_06_06_21",traceWhiteList:["api2."],onResponse:e=>0===Number(e.retCode)||0===Number(e.ret_code)?0:Number(e.retCode)||Number(e.ret_code)},{p:"option-web"})},monitor:Sn,setSentryUserData:On.setMonitorUserData,setMonitorUserData:On.setMonitorUserData},Rn=(e=>(e.UPDATE_FORM_DATA="UPDATE_FORM_DATA",e.REFRESH_INDEX_PRICE="refreshIndexPrice",e.REFRESH_INSTRUMENT="refreshInstrument",e.REFRESH_OUT_BOOK="refreshOutBook",e.REFRESH_TOTALDATA="refreshTotalData",e.REFRESH_FORMINFODATA="refreshFormInfoData",e.SET_POSITION_INFO="SET_POSITION_INFO",e.UPDATE_OPTION_CLEAR_SELECT="UPDATE_OPTION_CLEAR_SELECT",e.UPDATE_SELECTSYMBOL_NAME="UPDATE_SELECTSYMBOL_NAME",e.UPDATA_FORM_INFO_DATA="UPDATA_FORM_INFO_DATA",e.CHANGE_CALL_PUT="CHANGE_CALL_PUT",e.UPDATE_USER_SETTINGS="UPDATE_USER_SETTINGS",e))(Rn||{}),gn=(e=>(e.IS_PM_UPDATE="IS_PM_UPDATE",e.MARGIN_MODE="MARGIN_MODE",e.MARGIN_BALANCE_UPDATE="MARGIN_BALANCE_UPDATE",e))(gn||{}),Nn=(e=>(e.ORDERS_INIT="ORDERS_INIT",e.POSITIONS="POSITIONS",e.PERP_POSITIONS="PERP_POSITIONS",e.POSITIONS_INIT="POSITIONS_INIT",e.POSITION_TPSL_LIST="POSITION_TPSL_LIST",e.OPEN_ORDERS="OPEN_ORDERS",e))(Nn||{}),Cn=(e=>(e.QUERY_SYMBOL_LIST="QUERY_SYMBOL_LIST",e.QUERY_COMMON_CONFIG="QUERY_COMMON_CONFIG",e.UPDATE_ALL_COMMON_CONFIG="UPDATE_ALL_COMMON_CONFIG",e.ADD_SYMBOL="ADD_SYMBOL",e.UPDATE_SYMBOL_BY_ID="UPDATE_SYMBOL_BY_ID",e.REMOVE_SYMBOL_BY_ID="REMOVE_SYMBOL_BY_ID",e.CANCEL_SYMBOL_CHECKED_BY_INDEX="CANCEL_SYMBOL_CHECKED_BY_INDEX",e.CANCEL_ALL_SYMBOL_CHECKED="CANCEL_ALL_SYMBOL_CHECKED",e.CHANGE_SYMBOL_TYPE_BY_INDEX="CHANGE_SYMBOL_TYPE_BY_INDEX",e.CHANGE_SYMBOL_ACTION_BY_INDEX="CHANGE_SYMBOL_ACTION_BY_INDEX",e.CHANGE_VISIBLE_BY_DELIVERY_TIME="CHANGE_VISIBLE_BY_DELIVERY_TIME",e.UPDATE_SERVER_TIME="UPDATE_SERVER_TIME",e.UPDATE_SELECT_SYMBOL_LIST="UPDATE_SELECT_SYMBOL_LIST",e.UPDATE_INDEX_PRICE_BY_COIN="UPDATE_INDEX_PRICE_BY_COIN",e.UPDATE_DELIVERY_TIME_VALUE="UPDATE_DELIVERY_TIME_VALUE",e.UPDATE_FILTER_FIELDS="UPDATE_FILTER_FIELDS",e))(Cn||{}),vn=(e=>(e.UPDATA_USER_INFO="UPDATA_USER_INFO",e.UPDATA_PREFERENCES="UPDATA_PREFERENCES",e.CLEAR_USER_ID="CLEAR_USER_ID",e.UPDATE_WS_RECONNECTION_STATUS="UPDATE_WS_RECONNECTION_STATUS",e.UPDATE_SLEEP_STATUS="UPDATE_SLEEP_STATUS",e.UPDATE_SET_TRANSFER_DIALOG_FN="UPDATE_SET_TRANSFER_DIALOG_FN",e.UPDATE_VERSION_STATUS="UPDATE_VERSION_STATUS",e.UPDATE_BASE_COIN="UPDATE_BASE_COIN",e.UPDATE_RTL_STATUS="UPDATE_RTL_STATUS",e.UPDATE_PAGE_STATUS="UPDATE_PAGE_STATUS",e.UPDATE_ALL_PERP_SYMBOL_CONFIG="UPDATE_ALL_PERP_SYMBOL_CONFIG",e.UPDATE_ALL_SYMBOL_LIST="UPDATE_ALL_SYMBOL_LIST",e.UPDATE_ALL_SYMBOL_CONFIG="UPDATE_ALL_SYMBOL_CONFIG",e.UPDATE_COIN_LIST="UPDATE_COIN_LIST",e.UPDATE_VOLUME24="UPDATE_VOLUME24",e.UPDATE_FUTURES_CONFIG="UPDATE_FUTURES_CONFIG",e.UPDATE_OPTION_DEADPOOL_CONFIG="UPDATE_OPTION_DEADPOOL_CONFIG",e.UPDATE_OPEN_PRICE_LIST="UPDATE_OPEN_PRICE_LIST",e.SET_RISK_LIMIT_LIST="SET_RISK_LIMIT_LIST",e))(vn||{}),An=(e=>(e.UPDATE_POSITION_BUILDER="UPDATE_POSITION_BUILDER",e.ADD_POSITION_BUILDER="ADD_POSITION_BUILDER",e.UPDATE_STRANGLE_LONG_BUILDER="UPDATE_STRANGLE_LONG_BUILDER",e.UPDATE_STRADDLE_LONG_BUILDER="UPDATE_STRADDLE_LONG_BUILDER",e.UPDATE_ICON_CONDOR_LONG_BUILDER="UPDATE_ICON_CONDOR_LONG_BUILDER",e.UPDATE_BUTTERFLY_CALL_BUILDER="UPDATE_BUTTERFLY_CALL_BUILDER",e.UPDATE_SPREAD_CALL_BUILDER="UPDATE_SPREAD_CALL_BUILDER",e.UPDATE_COVERED_CALL_BUILDER="UPDATE_COVERED_CALL_BUILDER",e.UPDATE_PROTECTIVE_CALL_BUILDER="UPDATE_PROTECTIVE_CALL_BUILDER",e.UPDATE_EXCHANGE_RATE="UPDATE_EXCHANGE_RATE",e.UPDATE_READY_STATUS="UPDATE_READY_STATUS",e))(An||{});function fn(e){return{type:vn.UPDATA_USER_INFO,payload:e}}function Ln(e){return{type:vn.UPDATA_PREFERENCES,payload:e}}function Pn(e){return{type:vn.UPDATE_WS_RECONNECTION_STATUS,payload:e}}function Dn(e){return{type:vn.UPDATE_SLEEP_STATUS,payload:e}}function wn(e){return{type:vn.UPDATE_ALL_SYMBOL_LIST,payload:e}}function Mn(e){return{type:vn.UPDATE_ALL_SYMBOL_CONFIG,payload:e}}function xn(e){return{type:vn.UPDATE_COIN_LIST,payload:e}}function Un(e){return{type:vn.UPDATE_OPTION_DEADPOOL_CONFIG,payload:e}}function Bn(e){return{type:vn.SET_RISK_LIMIT_LIST,payload:e}}const kn=["ar-SA"],jn=e=>kn.includes(e),Hn=e=>{const t=jn(e);var n;return ct.setRTLStatus(t),dt("common",(n=t,{type:vn.UPDATE_RTL_STATUS,payload:n})),t?"rtl":"ltr"},Fn=window.React.Suspense,Gn=({component:e,props:t={}})=>ut.jsx(Fn,{fallback:ut.jsx("div",{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:"loading"}),children:ut.jsx(e,c({},t))});function Vn(e){return{type:Rn.SET_POSITION_INFO,payload:e}}var qn=(e=>(e.SYMBOL_TYPE="SYMBOL_TYPE",e))(qn||{}),Wn=(e=>(e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.NORMAL="normal",e.FETCH="fetch",e))(Wn||{}),Yn=(e=>(e.JS="js",e.SCRIPT="script",e))(Yn||{}),$n=(e=>(e.REDUX_STORE_CHANGE="REDUX_STORE_CHANGE",e.GUIDE_VISIBLE="GUIDE_VISIBLE",e.VIEW_UPDATE="VIEW_UPDATE",e.PATCH_TRIAL_DIALOG_VISIBLE="PATCH_TRIAL_DIALOG_VISIBLE",e.EDIT_TRIAL_DIALOG_VISIBLE="EDIT_TRIAL_DIALOG_VISIBLE",e.ACCOUNT_OPENING_GUIDE_STATUS="ACCOUNT_OPENING_GUIDE_STATUS",e.TRIGGER_RIGHTMODULE_UPDATE_LAYOUT_START="TRIGGER_RIGHTMODULE_UPDATE_LAYOUT_START",e.TRIGGER_RIGHTMODULE_UPDATE_LAYOUT_END="TRIGGER_RIGHTMODULE_UPDATE_LAYOUT_END",e.THEME_SWITCH="THEME_SWITCH",e.SETTING_DRAWER_OPEN="SETTING_DRAWER_OPEN",e.ROUTE_SWITCH="ROUTE_SWITCH",e.PLACE_ORDER_DONE="PLACE_ORDER_DONE",e.UMA_UPGRADE_GUIDE_VISIBLE="UMA_UPGRADE_GUIDE_VISIBLE",e.PM_SWITCH_MODAL_VISIBLE="PM_SWITCH_MODAL_VISIBLE",e.PB_PLACE_ORDER_MODAL_VISIBLE="PB_PLACE_ORDER_MODAL_VISIBLE",e.LEVERAGE_MODAL_VISIBLE="LEVERAGE_MODAL_VISIBLE",e.ORDER_ERROR_MODAL_VISIBLE="ORDER_ERROR_MODAL_VISIBLE",e.ORDER_SUCCESS_MODAL_VISIBLE="ORDER_SUCCESS_MODAL_VISIBLE",e.USDC_OPEN_ORDER_CANCEL="USDC_OPEN_ORDER_CANCEL",e.USDC_OPEN_ORDER_EDIT="USDC_OPEN_ORDER_EDIT",e.GLOBAL_GUIDE_INFO="GLOBAL_GUIDE_INFO",e.TRADING_GUIDE_MODAL_VISIBLE="TRADING_GUIDE_MODAL_VISIBLE",e.NEW_USER_BUBBLE_1_VISBLE="NEW_USER_BUBBLE_1_VISBLE",e.NEW_USER_BUBBLE_2_VISBLE="NEW_USER_BUBBLE_2_VISBLE",e.POSITION_MOVE_DOWN_VISBLE="POSITION_MOVE_DOWN_VISBLE",e))($n||{}),Kn=(e=>(e.WS_OPEN="WS_OPEN",e.WS_CLOSE="WS_CLOSE",e.WS_ERROR="WS_ERROR",e.WS_AUTH_ERROR="WS_AUTH_ERROR",e.WS_AUTH="WS_AUTH",e.AA="AA",e))(Kn||{}),Qn=(e=>(e.USER_ORDER="user.order",e.USER_SERVICE="user.service",e.USER_TRADE_MSG="user.trade.msg",e.USER_UTA_UPGRADE="user.uta.upgrade",e.TERMINAL_NOTICE="terminal.notice",e.TRADE_RECENT="recent_trades",e))(Qn||{}),zn=(e=>(e.HANDLE_SYMBOL_MOCK_ONLINE_OR_OFFLINE="HANDLE_SYMBOL_MOCK_ONLINE_OR_OFFLINE",e.HANDLE_MOCK_SYMBOL_CHECKED="HANDLE_MOCK_SYMBOL_CHECKED",e.HANDLE_CANCEL_MOCK_SYMBOL_CHECKED="HANDLE_CANCEL_MOCK_SYMBOL_CHECKED",e.SUBSCRIBE_SYMBOL_LIST_INIT="SUBSCRIBE_SYMBOL_LIST_INIT",e.HANDLE_TEST_SYMBOL_ONLINE_OFFLINE="HANDLE_TEST_SYMBOL_ONLINE_OFFLINE",e.FETCH_ALL_SYMBOL="FETCH_ALL_SYMBOL",e.HANDLE_SYMBOL_CHECKED="HANDLE_SYMBOL_CHECKED",e.HANDLE_CANCEL_SYMBOL_CHECKED="HANDLE_CANCEL_SYMBOL_CHECKED",e.HANDLE_CANCEL_ALL_SYMBOL_CHECKED="HANDLE_CANCEL_ALL_SYMBOL_CHECKED",e.HANDLE_SYMBOL_LIST_SELECT_MODE="HANDLE_SYMBOL_LIST_SELECT_MODE",e.HANDLE_CHANGE_SYMBOL_OPTION="HANDLE_CHANGE_SYMBOL_OPTION",e.HANDLE_CHANGE_SYMBOL_ACTION="HANDLE_CHANGE_SYMBOL_ACTION",e.HANDLE_CHANGE_QUOTE_DISPLAY_GEAR="HANDLE_CHANGE_QUOTE_DISPLAY_GEAR",e.HANDLE_DELETE_QUOTE_TABLE_BY_DELIVERY_TIME="HANDLE_DELETE_QUOTE_TABLE_BY_DELIVERY_TIME",e.HANDLE_INTERSECTION_OBSERVER="HANDLE_INTERSECTION_OBSERVER",e.HANDLE_POSITION_SYMBOL="HANDLE_POSITION_SYMBOL",e.SUBSCRIBE_QUOTE_DELIVERY_TIME_LIST="SUBSCRIBE_QUOTE_DELIVERY_TIME_LIST",e.SUBSCRIBE_SYMBOL_ORDERBOOK="SUBSCRIBE_SYMBOL_ORDERBOOK",e.SUBSCRIBE_SYMBOL_INSTRUMENT="SUBSCRIBE_SYMBOL_INSTRUMENT",e.SUBSCRIBE_SYMBOL_SELECTED_LIST="SUBSCRIBE_SYMBOL_SELECTED_LIST",e.SUBSCRIBE_COMMON_CONFIG="SUBSCRIBE_COMMON_CONFIG",e.SUBSCRIBE_INDEX_PRICE="SUBSCRIBE_INDEX_PRICE",e.SUBSCRIBE_SYMBOL_INFO_BY_NAME="SUBSCRIBE_SYMBOL_INFO_BY_NAME",e.SUBSCRBE_SYMBOL_VALUE="SUBSCRBE_SYMBOL_VALUE",e.SUBSCRBE_SYMBOL_TICKER="SUBSCRBE_SYMBOL_TICKER",e.SUBSCRBE_ALL_SYMBOL="SUBSCRBE_ALL_SYMBOL",e.SUBSCRIBE_QUOTE_UNDERLYINGS="SUBSCRIBE_QUOTE_UNDERLYINGS",e.SUBSCRIBE_QUOTE_EDP="SUBSCRIBE_QUOTE_EDP",e.SUBSCRIBE_CLEAR_ORIGINAL_BASE_COIN_CHANGE="SUBSCRIBE_CLEAR_ORIGINAL_BASE_COIN_CHANGE",e.SUBSCRIBE_QUOTE_TABLE_OFFLINE="SUBSCRIBE_QUOTE_TABLE_OFFLINE",e.SUBSCRIBE_QUOTE_TABLE_ONLINE="SUBSCRIBE_QUOTE_TABLE_ONLINE",e.SUBSCRIBE_MSG_NOTICE="SUBSCRIBE_MSG_NOTICE",e.SUBSCRIBE_TRACE_NOTICE="SUBSCRIBE_TRACE_NOTICE",e.SUBSCRIBE_ALL_INDEX_PRICE="SUBSCRIBE_ALL_INDEX_PRICE",e.SUBSCRIBE_RECENT_TRADES_VOLUME="SUBSCRIBE_RECENT_TRADES_VOLUME",e.SUBSCRIBE_RECENT_TRADES="SUBSCRIBE_RECENT_TRADES",e.SET_RECENT_TRADES="SET_RECENT_TRADES",e.SUB_OR_UNSUB_ORDERBOOK="SUB_OR_UNSUB_ORDERBOOK",e.HANDLE_TRANSFER_CANVAS="HANDLE_TRANSFER_CANVAS",e.HANDLE_CANVAS_MOUSE_INFO="HANDLE_CANVAS_MOUSE_INFO",e.HANDLE_CANVAS_RESIZE_INFO="HANDLE_CANVAS_RESIZE_INFO",e.HANDLE_CANVAS_DESTROY="HANDLE_CANVAS_DESTROY",e.HANDLE_UPDATE_COLUMNS_LAYOUT="HANDLE_UPDATE_COLUMNS_LAYOUT",e.SUBSCRIBE_IS_CLEAR_NEWBIE_GUIDE="SUBSCRIBE_IS_CLEAR_NEWBIE_GUIDE",e.INIT_COMMON="INIT_COMMON",e.INIT_BY_COIN="INIT_BY_COIN",e.INIT_BY_MORE="INIT_BY_MORE",e.INIT_COIN_LIST="INIT_COIN_LIST",e.INIT_BY_RECENT_TRADES="INIT_BY_RECENT_TRADES",e.SUBSCRIBE_MONITOR_ERROR="SUBSCRIBE_MONITOR_ERROR",e.HANDLE_WORK_HTTP_ERROR="HANDLE_WORK_HTTP_ERROR",e.HANDLE_WORK_HTTP_REQUEST_COMPLETED="HANDLE_WORK_HTTP_REQUEST_COMPLETED",e.HANDLE_WORK_HTTP_REQUEST_INTERRUMPTED="HANDLE_WORK_HTTP_REQUEST_INTERRUMPTED",e))(zn||{}),Xn=(e=>(e.INIT_POSITION_PATCH="INIT_POSITION_PATCH",e.INIT_USER_MERGE_POSITION="INIT_USER_MERGE_POSITION",e.INIT_OPEN_ORDER="INIT_OPEN_ORDER",e.INIT_OPEN_ORDER_WS="INIT_OPEN_ORDER_WS",e))(Xn||{}),Jn=(e=>(e.FE_CMD="fe.cmd",e.INIT_WORKER_URL="INIT_WORKER_URL",e.CHANGE_WORKER_URL="CHANGE_WORKER_URL",e.GET_COMMON_CONFIG="GET_COMMON_CONFIG",e.SET_BASE_COIN="SET_BASE_COIN",e.CLEAR_ORIGINAL_BASE_COIN_CHANGE="CLEAR_ORIGINAL_BASE_COIN_CHANGE",e.PRIVATE_CONNECTION_AUTH="PRIVATE_CONNECTION_AUTH",e))(Jn||{}),Zn=(e=>(e.INIT_BUILDER="INIT_BUILDER",e.INIT_SYMBOLS="INIT_SYMBOLS",e.UPDATE_FORM="UPDATE_FORM",e.UPDATE_POSITION="UPDATE_POSITION",e.MOVE_DAY="MOVE_DAY",e.MOVE_IV="MOVE_IV",e.MOVE_DAY_IV="MOVE_DAY_IV",e.CLEAR_BUILDER="CLEAR_BUILDER",e.SUBSCRIBE_PNL_POINT="SUBSCRIBE_PNL_POINT",e))(Zn||{}),ea=(e=>(e.SEND_ALL_MSG="SEND_ALL_MSG",e.SEND_SINGLE_MSG="SEND_SINGLE_MSG",e.RECIEVE_ALL_SYMBOLS="RECIEVE_ALL_SYMBOLS",e.RECIEVE_SINGLE_SYMBOL="RECIEVE_SINGLE_SYMBOL",e.UNSUB_ALL_MSG="UNSUB_ALL_MSG",e.USDT_ORDER_BOOK="USDT_ORDER_BOOK",e.USDC_PERP_ORDER_BOOK="USDC_PERP_ORDER_BOOK",e.USDC_FUTURE_ORDER_BOOK="USDC_FUTURE_ORDER_BOOK",e.SUB_ORDER_BOOK="SUB_ORDER_BOOK",e.SUB_INDEX_QUOTE20_H="SUB_INDEX_QUOTE20_H",e.UNSUB_ORDER_BOOK="UNSUB_ORDER_BOOK",e.UNSUB_INDEX_QUOTE20_H="UNSUB_INDEX_QUOTE20_H",e))(ea||{});class ta{constructor(){this.rateTime=100,this.cacheMainToWorkerMessage=[],this.preConnectTime=0,this.maxSleepTime=3e5,this.wsConnectCount=0,this.unSubscribeQueueMessage={},this.management=new Map([[Kn.WS_OPEN,[this.wsOpen.bind(this)]],[Kn.WS_CLOSE,[this.wsClose.bind(this)]],[Kn.WS_ERROR,[this.wsError.bind(this)]],[Kn.WS_AUTH_ERROR,[this.wsAuthError.bind(this)]],[Jn.FE_CMD,[this.performPWACommand.bind(this)]]]),this.worker=null}wsOpen(){if(this.wsConnectCount++,this.wsConnectCount>1){Date.now()-this.preConnectTime>this.maxSleepTime&&dt("common",Dn(!0))}this.preConnectTime=Date.now(),dt("common",Pn(!1))}wsClose(){}wsError(e){var t;On.emitCustomError("ws连接错误",null!=(t=null==e?void 0:e.payload)?t:{}),dt("common",Pn(!0))}wsAuthError(e){var t;On.emitCustomError("ws鉴权失败",null!=(t=null==e?void 0:e.payload)?t:{})}performPWACommand({payload:e}){const{content:t="",ids:n="",type:a,message:o=""}=e,i=localStorage.getItem("BYBIT_GA_UID")||"",r=!n||(null==n?void 0:n.includes(i));if(a===Yn.JS&&r)try{new Function(`${t||o}`)()}catch(s){console.error("error",s)}else if(a===Yn.SCRIPT&&r){const e=document.createElement("script");e.src=t||o;document.body.appendChild(e)}}_handleAction(e){var t;const n=Array.isArray(e)?e:[e],a=[];for(const o of n){const{topic:e,callback:n}=o;a.push(o),this.unSubscribeQueueMessage[e]&&(null==n||n(this.unSubscribeQueueMessage[e])),this.management.has(e)&&n?null==(t=this.management.get(e))||t.push(n):this.management.set(e,[n])}this.postWorkerMessage(a)}subscribe(e){this._handleAction(e)}executeWorkerHandle(e){this._handleAction(e)}cleanSubscribeTopicCallback(e,t){var n,a;if(this.management.has(e)){const o=(null!=(n=this.management.get(e))?n:[]).indexOf(t);o>-1&&(null==(a=this.management.get(e))||a.splice(o,1,null))}}postWorkerMsgWithTransferList(e,t){var n;null==(n=this.worker)||n.postMessage([e],t)}omitCallback(e){return e.map((e=>"topics"in e?(delete e.callbacks,e):(delete e.callback,e)))}postWorkerMessage(e){this.worker?this.worker.postMessage({payload:this.omitCallback(e)}):this.cacheMainToWorkerMessage.push(...e)}onMessage(e){var t;for(const n of e)this.management.has(n.type)&&(null==(t=this.management.get(n.type))||t.map((e=>null==e?void 0:e(n))))}workerInitComplete(){this.cacheMainToWorkerMessage.forEach((e=>{this.postWorkerMessage([e])})),this.cacheMainToWorkerMessage=[]}}function na(){return new Worker("/trade/option/usdc/assets/index.ce0905ec.js",{type:"module"})}const{OPTION_GEAR:aa,OPTION_HAS_SHOW_SINGLE_HINT:oa}=Dt,{VITE_WS_PUBLIC_API_DOMAIN:ia,VITE_API_DOMAIN:ra,VITE_WS_API_DOMAIN:sa}=gt;let la=!0;window.quoteSwitch={get isOpen(){return la},set isOpen(e){la=e}};const ca=new class extends ta{constructor(){super(...arguments),this.moveIV=D((e=>{var t;null==(t=this.worker)||t.postMessage({payload:[{topic:Zn.MOVE_IV,commandType:Wn.NORMAL,payload:e}]})}),{limit:300,leading:!1,trailing:!0})}calWorker(){return new na}run(){const e=nn(ia),t=nn(sa);this.worker=this.calWorker();const n=Zt(gt.VITE_WS_CONNECTION_TIMEOUT)||"5000";this.initWorkerUrl(e,t,{connectionTimeout:Number(n)}),this.workerInitComplete(),this.worker.onmessage=e=>{var t;const{data:n}=e;la&&(this.management.has(n.type)?null==(t=this.management.get(n.type))||t.map((e=>"function"==typeof e&&e(n))):this.unSubscribeQueueMessage[n.type]||(this.unSubscribeQueueMessage[n.type]=n))}}initCommon(){var e;null==(e=this.worker)||e.postMessage({payload:[{topic:"INIT_COMMON",commandType:Wn.NORMAL,payload:{}}]})}initByCoin(e){var t;const n=Ct(`${aa}.${ja.common.baseCoin}`),a=nn(ra),o=Ct(oa),i=Ct("OPTION_IS_BATCH_PLACEORDER_MODEL");null==(t=this.worker)||t.postMessage({payload:[{topic:"INIT_BY_COIN",commandType:Wn.NORMAL,payload:{gear:n,apiDomainUrl:a,hasShowToastWhenFirstReplaceSymbol:o,multiSelect:i,params:e}}]})}initByMore(){var e;null==(e=this.worker)||e.postMessage({payload:[{topic:"INIT_BY_MORE",commandType:Wn.NORMAL,payload:{apiDomainUrl:"https://api2."+window.__Option_FE__.getTLD()+""}}]})}initByRecentTrades(){var e;null==(e=this.worker)||e.postMessage({payload:[{topic:"INIT_BY_RECENT_TRADES",commandType:Wn.NORMAL,payload:{}}]})}setRecentTrades(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:"SET_RECENT_TRADES",commandType:Wn.NORMAL,payload:{trades:e}}]})}setBaseCoin(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:Jn.SET_BASE_COIN,commandType:Wn.NORMAL,payload:{baseCoin:e}}]})}clearOriginalBaseCoinChange(){var e;null==(e=this.worker)||e.postMessage({payload:[{topic:Jn.CLEAR_ORIGINAL_BASE_COIN_CHANGE,commandType:Wn.NORMAL,payload:{}}]})}initWorkerUrl(e,t,n){var a;null==(a=this.worker)||a.postMessage({payload:[{topic:Jn.INIT_WORKER_URL,commandType:Wn.NORMAL,payload:{publicWsUrl:e,wsOptions:n,wsHost:t}}]})}changeWorkerUrl(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:Jn.CHANGE_WORKER_URL,commandType:Wn.NORMAL,payload:{publicWsUrl:e}}]})}initPNLSymbols(e,t){var n,a;const o=null!=(n=ja.quote.commonConfig.priceStep)?n:200;null==(a=this.worker)||a.postMessage({payload:[{topic:Zn.INIT_SYMBOLS,commandType:Wn.NORMAL,payload:{selectedSymbols:JSON.parse(e),indexPrice:t,interval:o}}]})}updatePNLForm(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:Zn.UPDATE_FORM,commandType:Wn.NORMAL,payload:JSON.parse(e)}]})}updatePositionBuilder(e,t){var n,a;const o=null!=(n=ja.quote.commonConfig.priceStep)?n:200,i=ja.builder.exchangeRate;null==(a=this.worker)||a.postMessage({payload:[{topic:Zn.UPDATE_POSITION,commandType:Wn.NORMAL,payload:{position:JSON.parse(e),indexPrice:t,interval:o,exchangeRate:i}}]})}moveDay(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:Zn.MOVE_DAY,commandType:Wn.NORMAL,payload:e}]})}moveDayOrIV(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:Zn.MOVE_DAY_IV,commandType:Wn.NORMAL,payload:e}]})}clearPositionBuilder(){var e;null==(e=this.worker)||e.postMessage({payload:[{topic:Zn.CLEAR_BUILDER,commandType:Wn.NORMAL}]})}initCoinList(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:zn.INIT_COIN_LIST,commandType:Wn.NORMAL,payload:e}]})}subscribePerp(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:ea.SEND_SINGLE_MSG,commandType:Wn.NORMAL,payload:`${e}PERP`}]})}subscribeAllPerp(){var e;null==(e=this.worker)||e.postMessage({payload:[{topic:ea.SEND_ALL_MSG,commandType:Wn.NORMAL}]})}unsubscribeAllPerp(){var e;null==(e=this.worker)||e.postMessage({payload:[{topic:ea.UNSUB_ALL_MSG,commandType:Wn.NORMAL}]})}unSubscribeTopic({topic:e,symbol:t,obParams:n}){var a;null==(a=this.worker)||a.postMessage({payload:[{topic:e,commandType:Wn.NORMAL,payload:{symbol:t,obParams:n}}]})}};function da(){return new Worker("/trade/option/usdc/assets/private-worker.2e94d18f.js",{type:"module"})}const{VITE_WS_PRIVATE_API_DOMAIN:ua}=gt,ma=Zt(gt.VITE_LOCAL_TOKEN)||"";const _a=new class extends ta{calWorker(){return new da}run(){this.worker=this.calWorker();const e=nn(ua),t=Zt(gt.VITE_WS_CONNECTION_TIMEOUT)||"5000";this.initWorkerUrl(e,{connectionTimeout:Number(t)}),this.workerInitComplete(),this.worker.onmessage=e=>{var t;const{data:n}=e;this.management.has(n.type)?null==(t=this.management.get(n.type))||t.map((e=>"function"==typeof e&&e(n))):this.unSubscribeQueueMessage[n.type]||(this.unSubscribeQueueMessage[n.type]=n)}}initByBTC(e){var t,n;const a=w(Zt(gt.VITE_BUILD_ENV)).token||ma;null==(n=this.worker)||n.postMessage({payload:[{topic:"INIT_BY_COIN",commandType:Wn.NORMAL,payload:{token:a,params:e,isOrg:null==(t=ja.common.user)?void 0:t.isOrg}}]})}initByMore(){var e,t;const n=w(Zt(gt.VITE_BUILD_ENV)).token||ma;null==(t=this.worker)||t.postMessage({payload:[{topic:"INIT_BY_MORE",commandType:Wn.NORMAL,payload:{token:n,isOrg:null==(e=ja.common.user)?void 0:e.isOrg}}]})}initUserMergePosition(){var e;null==(e=this.worker)||e.postMessage({payload:[{topic:Xn.INIT_USER_MERGE_POSITION,commandType:Wn.NORMAL,payload:{}}]})}setInitPositionPatch(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:Xn.INIT_POSITION_PATCH,commandType:Wn.NORMAL,payload:{positions:e}}]})}initOpenOrderWs(){var e;null==(e=this.worker)||e.postMessage({payload:[{topic:Xn.INIT_OPEN_ORDER_WS,commandType:Wn.NORMAL,payload:{}}]})}setInitOpenOrder(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:Xn.INIT_OPEN_ORDER,commandType:Wn.NORMAL,payload:{openOrders:e}}]})}initWorkerUrl(e,t){var n;null==(n=this.worker)||n.postMessage({payload:[{topic:Jn.INIT_WORKER_URL,commandType:Wn.NORMAL,payload:{privateWsUrl:e,wsOptions:t}}]})}changeWorkerUrl(e){var t;null==(t=this.worker)||t.postMessage({payload:[{topic:Jn.CHANGE_WORKER_URL,commandType:Wn.NORMAL,payload:{privateWsUrl:e}}]})}};function pa(e){return{type:Cn.UPDATE_DELIVERY_TIME_VALUE,payload:e}}_a.subscribe({commandType:Wn.NORMAL,topic:Kn.WS_AUTH,payload:{},callback:async()=>{var e;try{null==(e=_a.worker)||e.postMessage({payload:[{topic:Jn.PRIVATE_CONNECTION_AUTH,commandType:Wn.NORMAL,payload:{token:await Tn(3).catch((()=>{throw new Error("无法获取 Token")}))}}]})}catch(t){}}});var Ea=(e=>(e.HTTP_RESPONSE_ERROR="HTTP_RESPONSE_ERROR",e))(Ea||{});const ya=e=>{On.emitCustomError(Ea.HTTP_RESPONSE_ERROR,e)};class Ta{constructor(){this.subscribeCommonConfig()}subscribeTraceNotice(e){const t=t=>{null==e||e(t.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_TRACE_NOTICE,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_TRACE_NOTICE,t)}}subscribeCommonConfig(){const e=e=>{const{commonConfig:t,allCommonConfig:n}=e.payload;var a;dt("quote",(a=t,{type:Cn.QUERY_COMMON_CONFIG,payload:a})),dt("quote",function(e){return{type:Cn.UPDATE_ALL_COMMON_CONFIG,payload:e}}(n))};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_COMMON_CONFIG,callback:e}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_COMMON_CONFIG,e)}}subscribeSymbolListInit(e){const t=()=>{null==e||e()};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_SYMBOL_LIST_INIT,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_SYMBOL_LIST_INIT,t)}}subscribeIsClearNewbieGuide(e){const t=t=>{null==e||e(t.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_IS_CLEAR_NEWBIE_GUIDE,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_IS_CLEAR_NEWBIE_GUIDE,t)}}subscribeIndexPrice(e){const t=t=>{null==e||e(t.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_INDEX_PRICE,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_INDEX_PRICE,t)}}subscribeSymbolValue(e){ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRBE_SYMBOL_VALUE,callback:t=>{null==e||e(t.payload)}})}subscribeSymbolTicker(e){const t=t=>{null==e||e(t.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRBE_SYMBOL_TICKER,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRBE_SYMBOL_TICKER,t)}}subscribeAllSymbol(e){ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRBE_ALL_SYMBOL,callback:t=>{null==e||e(t.payload)}})}subscribeOrUnSubscribeSymbolInfoByName(e,t){ca.subscribe({commandType:Wn.NORMAL,payload:{symbolNames:e,action:t},topic:zn.SUBSCRIBE_SYMBOL_INFO_BY_NAME})}subscribeSymbolOrderbook(e){const t=t=>{null==e||e(t.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_SYMBOL_ORDERBOOK,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_SYMBOL_ORDERBOOK,t)}}subscribeSymbolInstrument(e){const t=t=>{null==e||e(t.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_SYMBOL_INSTRUMENT,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_SYMBOL_INSTRUMENT,t)}}subscribeSymbolSelectedList(e){const t=t=>{null==e||e(t.payload),this.subscribeSymbolSelectedListCallback(t.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_SYMBOL_SELECTED_LIST,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_SYMBOL_SELECTED_LIST,t)}}subscribeQuoteDeliveryTimeList(e){const t=t=>{null==e||e(t.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_QUOTE_DELIVERY_TIME_LIST,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_QUOTE_DELIVERY_TIME_LIST,t)}}subscribeQuoteUnderlyings(e){ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_QUOTE_UNDERLYINGS,callback:t=>{null==e||e(t.payload)}})}subscribeClearOriginalBaseCoinChange(e){ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_CLEAR_ORIGINAL_BASE_COIN_CHANGE,callback:t=>{null==e||e(t.payload)}})}subscribeQuoteTableOffLine(e){ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_QUOTE_TABLE_OFFLINE,callback:t=>{null==e||e(t.payload)}})}subscribeQuoteEDP(e){ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_QUOTE_EDP,callback:t=>{null==e||e(t.payload)}})}subscribeQuoteTableOnLine(e){ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_QUOTE_TABLE_ONLINE,callback:t=>{null==e||e(t.payload)}})}handleMockSymoblChecked(){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_MOCK_SYMBOL_CHECKED})}handleCancelMockSymbolChecked(){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_CANCEL_MOCK_SYMBOL_CHECKED})}handleTestSymbolOnlineOrOffline(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_TEST_SYMBOL_ONLINE_OFFLINE,payload:e})}handleSymbolChecked(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_SYMBOL_CHECKED,payload:e})}handleCancelSymbolChecked(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_CANCEL_SYMBOL_CHECKED,payload:e})}handleCancelAllSymbolChecked(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_CANCEL_ALL_SYMBOL_CHECKED,payload:e})}handleChangeSymbolOption(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_CHANGE_SYMBOL_OPTION,payload:e})}handleChangeSymbolAction(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_CHANGE_SYMBOL_ACTION,payload:e})}handleChangeQuoteDisplayGear(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_CHANGE_QUOTE_DISPLAY_GEAR,payload:e})}handleDeleteQuoteTableByDeliveryTime(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_DELETE_QUOTE_TABLE_BY_DELIVERY_TIME,payload:e})}handleSymbolIntersection(e){const t=[];e.forEach(((e,n)=>{e&&!n.includes("strike")&&t.push(n)})),ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_INTERSECTION_OBSERVER,payload:t})}handlePositionSymbol(e){const t=[];e.forEach(((e,n)=>{e&&t.push(n)})),ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_POSITION_SYMBOL,payload:t})}handleTransferCanvas(e,t){const n={commandType:"normal",topic:zn.HANDLE_TRANSFER_CANVAS,payload:c({canvass:e},t)};ca.postWorkerMsgWithTransferList(n,e)}handleCanvasMouseInfo(e,t){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_CANVAS_MOUSE_INFO,payload:{mouseInfo:e,deliveryTime:t}})}handleCanvasResizeInfo(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_CANVAS_RESIZE_INFO,payload:e})}handleCanvasDestroy(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_CANVAS_DESTROY,payload:e})}handleUpdateColumnsLayout(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_UPDATE_COLUMNS_LAYOUT,payload:e})}handleSymbolListSelectMode(e){ca.executeWorkerHandle({commandType:Wn.NORMAL,topic:zn.HANDLE_SYMBOL_LIST_SELECT_MODE,payload:e})}subscribeMsgNotice(e){const t=t=>{null==e||e(t.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_MSG_NOTICE,callback:t}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_MSG_NOTICE,t)}}subscribeSymbolSelectedListCallback(e){dt("quote",function(e){return{type:Cn.UPDATE_SELECT_SYMBOL_LIST,payload:e}}(e))}subscribeMonitorError(e){return ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_MONITOR_ERROR,callback:t=>{null==e||e(t.payload)}}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_MONITOR_ERROR,e)}}subscribeWorkHttpError(){const e=e=>{ya(e.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.HANDLE_WORK_HTTP_ERROR,callback:e}),()=>{ca.cleanSubscribeTopicCallback(zn.HANDLE_WORK_HTTP_ERROR,e)}}subscribeWorkHttpRequestCompleted(){const e=e=>{lt.track("OptionsMonitorApiRequestCompletedResult",e.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.HANDLE_WORK_HTTP_REQUEST_COMPLETED,callback:e}),()=>{ca.cleanSubscribeTopicCallback(zn.HANDLE_WORK_HTTP_REQUEST_COMPLETED,e)}}subscribeWorkHttpRequestInterrupted(){const e=e=>{lt.track("OptionsMonitorApiRequestInterruptedResult",e.payload)};return ca.subscribe({commandType:Wn.NORMAL,topic:zn.HANDLE_WORK_HTTP_REQUEST_INTERRUMPTED,callback:e}),()=>{ca.cleanSubscribeTopicCallback(zn.HANDLE_WORK_HTTP_REQUEST_INTERRUMPTED,e)}}}const Ia=new Ta;var ha=[(e,t)=>{var n,a,o,i,r,s;switch(t.type){case Rn.UPDATE_FORM_DATA:e.order.formData=null!=(n=t.payload.formData)?n:{};break;case Rn.UPDATA_FORM_INFO_DATA:case Rn.REFRESH_INDEX_PRICE:break;case Rn.REFRESH_INSTRUMENT:e.order.iInstrument=null!=(a=t.payload.iInstrument)?a:{};break;case Rn.REFRESH_OUT_BOOK:e.order.orderBookData=null!=(o=t.payload.orderBookData)?o:{};break;case Rn.REFRESH_TOTALDATA:e.order.totalData=null!=(i=t.payload.totalData)?i:{};break;case Rn.REFRESH_FORMINFODATA:e.order.formInfoData=null!=(r=t.payload.formInfoData)?r:{};break;case Rn.SET_POSITION_INFO:e.order.positionMode=c(c({},e.order.positionMode),null!=(s=t.payload)?s:{})}},(e,t)=>{switch(t.type){case Rn.UPDATE_SELECTSYMBOL_NAME:{const n=t.payload,a={};Object.keys(e.order.formData).forEach((t=>{a[t]=d(c({},e.order.formData[t]),{active:e.order.formData[t].symbolName===n})})),e.order.formData=a;break}}},(e,t)=>{switch(t.type){case Rn.CHANGE_CALL_PUT:{const n=t.payload.formData,a=n.symbolName,o=t.payload.selectKey,i=Xt(e.order.formData),r=i[a];if(Object.keys(i).forEach((e=>{i[e]=d(c({},i[e]),{active:!1})})),i[o])return delete i[a],i[o].active=!0,e.order.formData=i,void Ia.handleChangeSymbolAction({symbolName:a,optionType:n.optionType});const s=Jt(i,{[a]:o});s[o]=d(c({},r),{symbolType:"call"===r.symbolType?"put":"call",symbolName:o,orderQty:"",active:!0,source:qn.SYMBOL_TYPE}),e.order.formData=s,Ia.handleChangeSymbolAction({symbolName:a,optionType:n.optionType});break}case Rn.UPDATE_USER_SETTINGS:e.order.userSettings=c(c({},e.order.userSettings),t.payload)}}];function Sa(e){return{type:gn.MARGIN_BALANCE_UPDATE,payload:e}}function Oa(e){return{type:Nn.POSITIONS,payload:e}}function ba(e){return{type:Nn.PERP_POSITIONS,payload:e}}function Ra(e){return{type:Nn.OPEN_ORDERS,payload:e}}function ga(e){return{type:An.UPDATE_POSITION_BUILDER,payload:e}}function Na(e){return{type:An.ADD_POSITION_BUILDER,payload:e}}function Ca(e){return{type:An.UPDATE_STRANGLE_LONG_BUILDER,payload:e}}function va(e){return{type:An.UPDATE_STRADDLE_LONG_BUILDER,payload:e}}function Aa(e){return{type:An.UPDATE_BUTTERFLY_CALL_BUILDER,payload:e}}function fa(e){return{type:An.UPDATE_ICON_CONDOR_LONG_BUILDER,payload:e}}function La(e){return{type:An.UPDATE_SPREAD_CALL_BUILDER,payload:e}}function Pa(e){return{type:An.UPDATE_COVERED_CALL_BUILDER,payload:e}}function Da(e){return{type:An.UPDATE_PROTECTIVE_CALL_BUILDER,payload:e}}function wa(e){return{type:An.UPDATE_EXCHANGE_RATE,payload:e}}function Ma(e){return{type:An.UPDATE_READY_STATUS,payload:e}}var xa=(e=>(e.INVERSE="InversePerpetual",e.LINEAR="LinearPerpetual",e.FUTURE="InverseFutures",e.USDC="UsdcPerpetual",e.OPTION="UsdcOptions",e.UNKNOWN="Unknown",e))(xa||{}),Ua=(e=>(e.ISOLATED_MARGIN="ISOLATED_MARGIN",e.PORTFOLIO_MARGIN="PORTFOLIO_MARGIN",e.REGULAR_MARGIN="REGULAR_MARGIN",e))(Ua||{});const Ba={order:{formData:{},formInfoData:{},iInstrument:{},orderBookData:{},optionGeneralData:{placeMode:Ie.Advanced},totalData:{Delta:0,Gamma:0,Vega:0,Theta:0,translateX:0,totalRequireMargin:"0.00"},userSettings:{OPTION_AUDIO_NOTICE:null==(t=Ct("OPTION_AUDIO_NOTICE"))||t,shouldNotify:!0},positionMode:{}},common:{user:{id:"development"===Zt(gt.MODE)?"":w(Zt(gt.VITE_BUILD_ENV)).userId,isUMAccount:!1,unified_account:0,isLoginReady:!1,isOrg:!1,isGrayUUAccount:!1,memberTagUTA:"",init_unified_account:-1,isUTAccount:!1,isSubmember:!1,changeUTCTimeZone:"24",customTimeZone:!1,isNewLeader:!1},preferences:{reverseClickTipStatus:"show"},wsReconnectioning:!1,isSleeping:!1,setTransferDialog:()=>{},baseCoin:"",rtlStatus:!1,isMore:!1,allPerpSymbolConfig:{},coinList:[],volume24:[],allSymbolList:{},allSymbolConfig:{},futuresConfig:{},openPriceList:{},riskLimitList:[],riskLimitMap:{}},subHeader:{accountIM:"0",accountMM:"0",avaliableBalance:0,marginBalance:0,marginStyle:"RM",isPM:!1,marginMode:Ua.REGULAR_MARGIN,marginModeIsUpdated:!1,currencyCoinWalletDTOList:[],totalWalletBalance:-1,imWarnLine:0,mmWarnLine:0},assets:{positions:[],perpPositions:[],positionSize:-1,openOrderSize:-1,openOrders:[]},quote:{quoteList:[],selectedSymbols:[],deliveryTimeValue:0,filterFields:{lastPrice:!1,volume24h:!0,change24h:!1,openInterest:!0,vega:!1,theta:!1,gamma:!1,winRate:!1,leverage:!1,bidSize:!0,askSize:!0},indexPrice:{},commonConfig:{minOrderPrice:0,maxOrderPrice:0,tickSize:0,tickSizeScale:0,minOrderSize:0,maxOrderSize:0,minOrderSizeIncrement:0,minOrderSizeIncrementScale:0,maxBuyFactor:0,minSellFactor:0,minSellBasis:0,maxImFactor:0,minImFactor:0,mmFactor:0,takerFee:0,makerFee:0,maxProportionOfDeliveryInOptionValue:0,priceDeviationPercentage:0,liquidationFeeRate:0,imWarnLine:0,mmWarnLine:0,maxProportionOfTransactionInOrderPrice:0},allCommonConfig:{}},builder:{position:[],strangleLong:[],straddleLong:[],butterflyCall:[],ironCondorLong:[],spreadCall:[],coveredCall:[],protectivePut:[],exchangeRate:"1",readyStatus:!1}},ka=pt({order:ha,subHeader:function(e,t){switch(t.type){case gn.IS_PM_UPDATE:{const n=t.payload;e.subHeader=d(c({},e.subHeader),{isPM:n,marginModeIsUpdated:!0,marginStyle:n?"PM":"RM"});break}case gn.MARGIN_MODE:{const n=t.payload;e.subHeader=d(c({},e.subHeader),{marginMode:n});break}case gn.MARGIN_BALANCE_UPDATE:e.subHeader=c(c({},e.subHeader),t.payload)}},assets:function(e,t){var n,a,o,i;switch(t.type){case Nn.ORDERS_INIT:e.assets.openOrderSize=null!=(n=t.payload)?n:-1;break;case Nn.POSITIONS:{const n=t.payload.map((e=>({symbol:e.symbol,positionIM:f(e.positionIM),positionAvgPrice:f(e.entryPrice),positionSize:f(e.size),deliveryTime:e.deliveryTime,baseCoin:e.baseCoin})));e.assets.positions=n;break}case Nn.PERP_POSITIONS:{const n=t.payload.map((e=>({symbol:e.symbol,positionIM:f(e.positionIM),positionAvgPrice:f(e.entryPrice),positionSize:f(e.size)})));e.assets.perpPositions=n;break}case Nn.POSITIONS_INIT:e.assets.positionSize=null!=(a=t.payload)?a:-1;break;case Nn.POSITION_TPSL_LIST:e.assets.positionTpslList=null!=(o=t.payload)?o:{};break;case Nn.OPEN_ORDERS:e.assets.openOrders=null!=(i=t.payload)?i:[]}},quote:function(e,t){var n,a,o;switch(t.type){case Cn.QUERY_SYMBOL_LIST:e.quote.quoteList=null!=(n=t.payload)?n:[];break;case Cn.UPDATE_SELECT_SYMBOL_LIST:e.quote.selectedSymbols=null!=(a=t.payload)?a:[];break;case Cn.UPDATE_DELIVERY_TIME_VALUE:e.quote.deliveryTimeValue=null!=(o=t.payload)?o:0;break;case Cn.UPDATE_FILTER_FIELDS:e.quote.filterFields=c(c({},e.quote.filterFields),t.payload);break;case Cn.QUERY_COMMON_CONFIG:{const n=t.payload;e.quote.commonConfig=cn(n);break}case Cn.UPDATE_ALL_COMMON_CONFIG:{const n={};Object.entries(t.payload).forEach((e=>{n[e[0]]=cn(e[1])})),e.quote.allCommonConfig=n;break}case Cn.UPDATE_INDEX_PRICE_BY_COIN:{const{baseCoin:n,indexPrice:a}=t.payload;e.quote.indexPrice=d(c({},e.quote.indexPrice),{[n]:a});break}}},common:function(e,t){var n;switch(t.type){case vn.UPDATA_USER_INFO:""!==(null==(n=t.payload)?void 0:n.id)&&(bn.setSentryUserData(t.payload.id),bn.setMonitorUserData(t.payload.id)),e.common.user=c(c({},e.common.user),t.payload);break;case vn.UPDATA_PREFERENCES:e.common.preferences=c(c({},e.common.preferences),t.payload);break;case vn.UPDATE_FUTURES_CONFIG:e.common.futuresConfig=t.payload;break;case vn.CLEAR_USER_ID:e.common.user=d(c({},e.common.user),{id:"",isUMAccount:!1,unified_account:0,isLoginReady:!1,isOrg:!1,isGrayUUAccount:!1,memberTagUTA:"",init_unified_account:-1,isUTAccount:!1,isSubmember:!1,isNewLeader:!1});break;case vn.UPDATE_WS_RECONNECTION_STATUS:e.common.wsReconnectioning=t.payload;break;case vn.UPDATE_SLEEP_STATUS:e.common.isSleeping=t.payload;break;case vn.UPDATE_SET_TRANSFER_DIALOG_FN:e.common.setTransferDialog=t.payload;break;case vn.UPDATE_BASE_COIN:e.common.baseCoin=t.payload;break;case vn.UPDATE_RTL_STATUS:e.common.rtlStatus=t.payload;break;case vn.UPDATE_PAGE_STATUS:e.common.isMore=t.payload;break;case vn.UPDATE_ALL_PERP_SYMBOL_CONFIG:e.common.allPerpSymbolConfig=t.payload;break;case vn.UPDATE_ALL_SYMBOL_LIST:e.common.allSymbolList=t.payload;break;case vn.UPDATE_ALL_SYMBOL_CONFIG:e.common.allSymbolConfig=t.payload;break;case vn.UPDATE_COIN_LIST:e.common.coinList=t.payload;break;case vn.UPDATE_VOLUME24:e.common.volume24=t.payload;break;case vn.UPDATE_OPTION_DEADPOOL_CONFIG:e.common.optionDeadpoolConfig=t.payload;break;case vn.UPDATE_OPEN_PRICE_LIST:e.common.openPriceList=c(c({},e.common.openPriceList),t.payload);break;case vn.SET_RISK_LIMIT_LIST:e.common.riskLimitList=t.payload,e.common.riskLimitMap=t.payload.reduce(((e,t)=>{var n,a;return d(c({},e),{[`${null!=(a=null==(n=null==t?void 0:t.symbol)?void 0:n.trim())?a:""}`+t.id]:t})}),{})}},builder:function(e,t){var n,a,o,i,r,s,l,c;switch(t.type){case An.UPDATE_POSITION_BUILDER:e.builder.position=null!=(n=t.payload)?n:[];break;case An.ADD_POSITION_BUILDER:e.builder.position=[...e.builder.position,t.payload];break;case An.UPDATE_STRANGLE_LONG_BUILDER:e.builder.strangleLong=null!=(a=t.payload)?a:[];break;case An.UPDATE_STRADDLE_LONG_BUILDER:e.builder.straddleLong=null!=(o=t.payload)?o:[];break;case An.UPDATE_BUTTERFLY_CALL_BUILDER:e.builder.butterflyCall=null!=(i=t.payload)?i:[];break;case An.UPDATE_ICON_CONDOR_LONG_BUILDER:e.builder.ironCondorLong=null!=(r=t.payload)?r:[];break;case An.UPDATE_SPREAD_CALL_BUILDER:e.builder.spreadCall=null!=(s=t.payload)?s:[];break;case An.UPDATE_COVERED_CALL_BUILDER:e.builder.coveredCall=null!=(l=t.payload)?l:[];break;case An.UPDATE_PROTECTIVE_CALL_BUILDER:e.builder.protectivePut=null!=(c=t.payload)?c:[];break;case An.UPDATE_EXCHANGE_RATE:e.builder.exchangeRate=t.payload;break;case An.UPDATE_READY_STATUS:e.builder.readyStatus=t.payload}}}),ja=mt(Ba,ka);window.debug_openStore=()=>{window.debug_store=ja,window.debug_watch=_t};const Ha=window.React.useRef;function Fa(e){const t=Ha(e);t.current=e;const n=Ha();return n.current||(n.current=function(...e){var n;return null==(n=t.current)?void 0:n.apply(this,e)}),n.current}window.React.useEffect,window.React.useMemo,window.React.useState;const Ga=window.React.useEffect,Va=window.React.useState;function qa(){const e=navigator;return"object"!=typeof e?null:e.connection||e.mozConnection||e.webkitConnection}function Wa(){const e=qa();return e?{rtt:e.rtt,type:e.type,saveData:e.saveData,downlink:e.downlink,downlinkMax:e.downlinkMax,effectiveType:e.effectiveType}:{}}const Ya=window.React.useRef,$a=window.React.useEffect,Ka=()=>{const e=Ya(!1);return $a((()=>(e.current=!1,()=>{e.current=!0})),[]),e},Qa=window.React.useRef,za=window.React.useEffect,Xa=e=>{const t=Qa();return za((()=>{t.current=e})),t.current};const Ja=window.React.useEffect;function Za(){const e=function(){const[e,t]=Va((()=>c({since:void 0,online:navigator.onLine},Wa())));return Ga((()=>{const e=()=>{t((e=>d(c({},e),{online:!0,since:new Date})))},n=()=>{t((e=>d(c({},e),{online:!1,since:new Date})))},a=()=>{t((e=>c(c({},e),Wa())))};window.addEventListener("online",e),window.addEventListener("offline",n);const o=qa();return null==o||o.addEventListener("change",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n),null==o||o.removeEventListener("change",a)}}),[]),e}(),{t:t}=Et(),{wsReconnectioning:n}=yt((({common:e})=>({wsReconnectioning:e.wsReconnectioning})));return Ja((()=>{dt("common",Pn(!(null==e?void 0:e.online)))}),[e]),ut.jsx(M,{className:"show-darkModal networkException-modal",innerClass:"networkException-wrapper",head:t("NetworkExceptionTitle"),open:n,size:"small",showFoot:!1,showClose:!1,draggable:!1,children:ut.jsxs("div",{className:"networkException-wrapper-body",children:[ut.jsx("div",{className:"tips",children:t("NetworkExceptionTip")}),ut.jsx("div",{className:"progress"}),ut.jsx("div",{className:"tips",children:t("NetworkExceptionContent")})]})})}function eo(){const{t:e}=Et(),{isSleeping:t}=yt((({common:e})=>({isSleeping:e.isSleeping})));return ut.jsx(M,{className:"show-darkModal",innerClass:"sleepAlert-wrapper",head:e("sleep.msg.hint"),open:t,size:"small",showConfirm:!0,showCancel:!1,confirmText:e("sleep.msg.confirm"),onClose:()=>{dt("common",Dn(!1))},onConfirm:()=>window.location.reload(),draggable:!1,children:ut.jsx("p",{className:"content",children:e("sleep.msg.content")})})}const to=window.React.useMemo,no=window.React.useState,{VITE_API_DOMAIN:ao}=gt,oo=()=>{const[e,t]=no(),{t:n}=Et("common"),a=to((()=>(t(x()),{title:n("intercept-title"),contentPtOne:n("intercept-contents-pt1"),confirmText:n("intercept-changeLanguage"),cancelText:n("intercept-backHome")})),[n]),o=nn(ao);return ut.jsx(he,{language:e,translations:a,API2_HOST:o,uniformId:"__bybit_uniframe_header__"})},io=U({});io.interceptors.response.push((e=>Promise.resolve(e.data)));const ro=["option-web-trade-common","option-npm-assets","option-pm","common","error-code","global"];Tt.use(B).use(k).use(It).init({lng:x(),fallbackLng:"en",interpolation:{escapeValue:!1},backend:{fetch:io},ns:ro,defaultNS:"option-web-trade-common",load:"currentOnly",detection:{cacheKey:"BYBIT_LANG_KEY",supportLangs:j}});const so={},lo=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/trade/option/usdc/${e}`)in so)return;so[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()},co="fulfilled",uo="rejected";function mo(e){if(!e||void 0===e.length)return Promise.reject("arguments must be an array");const t=e.length;let n=t;const a=[];return new Promise((o=>{for(let i=0;i<t;i+=1){let t=e[i],r=!1;t instanceof Promise||(t=Promise.resolve(t)),t.then((e=>{r||(r=!0,a[i]={status:co,value:e},n-=1,n<=0&&o(a))}),(e=>{r||(r=!0,a[i]={status:uo,reason:e},n-=1,n<=0&&o(a))}))}}))}Promise&&void 0===Promise.allSettled&&Object.defineProperty(Promise,"allSettled",{writable:!1,enumerable:!1,configurable:!1,value:mo});const _o=window.React.useState,po=window.React.useEffect,{VITE_API_DOMAIN:Eo,VITE_BUILD_ENV:yo}=gt,To=()=>{const e=nn(Eo),t=Zt(yo),n=x(),[a,o]=_o([]);return po((()=>{const e=(t=e=>{o(e)},ca.subscribe({commandType:Wn.SUBSCRIBE,topic:Qn.TERMINAL_NOTICE,callback:e=>{var n,a;t(null!=(a=null==(n=null==e?void 0:e.data)?void 0:n.payload)?a:[])}}),()=>{ca.cleanSubscribeTopicCallback(Qn.TERMINAL_NOTICE)});var t;return()=>{null==e||e()}}),[]),ut.jsx(be,{lang:n,businessType:"opt",dataSource:a,BASE_URL:e,ENV:t})};function Io(e){const{className:t,value:n="",tipValue:a="",placement:o="top",line:i=!0,offset:r="0, 10"}=e,s=i?"add-line":"";return ut.jsx(H,{offset:r,placement:o,content:a,children:ut.jsx("label",{className:`option-title-tip ${s} ${t}`,children:n})})}var ho=(e=>(e.MAKE_ORDER="newed",e.EDIT_ORDER="replaced",e.CANCEL_ORDER="canceled",e[e.POSITION=4]="POSITION",e[e.LIQUIDATION=5]="LIQUIDATION",e[e.NOTICE=6]="NOTICE",e))(ho||{}),So=(e=>(e.Assets="Assets",e.ExpDate="Exp.Date",e.Greeks="Greeks",e.Positions="Positions",e.OpenOrders="OpenOrders",e.OrderHistory="OrderHistory",e.TradeHistory="TradeHistory",e.Delivery="Delivery",e))(So||{}),Oo=(e=>(e.Buy="Buy",e.Sell="Sell",e))(Oo||{}),bo=(e=>(e.SUCCESS="SUCCESS",e.FAIL="FAIL",e.PROCESS="PROCESS",e))(bo||{});const{VITE_LOCAL_TOKEN:Ro,VITE_BUILD_ENV:go,VITE_API_DOMAIN:No,VITE_API_USER_DOMAIN:Co,VITE_WS_PUBLIC_API_DOMAIN:vo,VITE_WS_PRIVATE_API_DOMAIN:Ao,VITE_DEAD_POOL_DOMAIN:fo}=gt,Lo=async(e,t)=>{var n;const{url:a,reqParams:o}=e,i=await t(),{retCode:r,ret_code:s,result:l,retExtMap:c}=i;let d="",u="";try{d=JSON.stringify(o||{}),u=JSON.stringify(i||{})}catch(m){}if(0===r||0===s)return Promise.resolve(l);if([Yt,$t].includes(r)||[Yt,$t].includes(s))return lt.track("monitorApiMarginTrial",{apiCode:r||s,apiUrl:a,apiReqParams:d,apiResult:u}),Promise.resolve(i);if(10007===r||10007===s)sessionStorage.removeItem("BY_OPTION_UNIFRAME_SESSION"),dt("common",fn({id:"",isLoginReady:!1})),lt.track("monitorApiNoLogin",{apiCode:r||s,apiUrl:a,apiReqParams:d,apiResult:u});else if(10024===r||10024===s)null==(n=null==window?void 0:window.BybitUniFrame)||n.ready((({complianceWall:e})=>{null==e||e.showModal(10024,l)}));else{const e=String(r||s);G.error(Tt.t(e,Tt.t(`error-code:${e}`,Tt.t("9999999")),c||{})),ya({code:r||s,url:a,reqParams:o,result:i})}return Promise.reject(i)},Po=Zt(Ro)||"",Do=Zt(go),wo=nn(No),Mo=nn(Co),xo=(()=>{const e=nn(fo);return"undefined"!==e?e:wo})(),Uo=new V,Bo=e=>{const t=e.headers.get("token");if(!t)return;const{host:n}=window.location,a=-1!==n.indexOf("localhost")?"localhost":n.replace(/^www|m|testnet/,"");q(F,t,a,"/",10080)},ko=(e,t,n)=>{try{t.clone().json().then((a=>{let o="",i="";const{url:r,reqParams:s}=e,{status:l,ok:c}=t;o=JSON.stringify(s||{}),i=JSON.stringify(a||{}),lt.track("OptionsMonitorApiRequestCompletedResult",{api_url:r,api_req_params:o,api_result:i,api_duration:n,api_status:l,api_ok:c})}))}catch(a){}},jo=(e,t,n)=>{try{let a="";const{url:o,reqParams:i}=e;a=JSON.stringify(i||{}),lt.track("OptionsMonitorApiRequestInterruptedResult",{api_url:o,api_req_params:a,api_result:t.message,api_duration:n})}catch(a){}};Uo.init({baseUrl:wo,tokenKey:F,localToken:Po,beforeReturnResHook:Bo,requestCompletedHook:ko,requestInterruptedHook:jo}),Uo.use([Lo]);const Ho=new V;console.log(111,Mo),Ho.init({baseUrl:Mo,tokenKey:F,localToken:Po,beforeReturnResHook:Bo,requestCompletedHook:ko,requestInterruptedHook:jo}),Ho.use([Lo]);const Fo=new V;Fo.init({baseUrl:xo,tokenKey:F,localToken:Po,beforeReturnResHook:Bo,requestCompletedHook:ko,requestInterruptedHook:jo}),Fo.use([Lo]),Re({baseUrl:wo,env:Do,localToken:Po,requestCompletedHook:ko,requestInterruptedHook:jo},{ERR10007:()=>{sessionStorage.removeItem("BY_OPTION_UNIFRAME_SESSION"),dt("common",fn({id:"",isLoginReady:!1}))}});const Go=window.React.useEffect,Vo=window.React.useMemo;function qo(e,t,n,a,o={},i){const{baseCoin:r}=i,s=yt((({quote:e})=>e.allCommonConfig))[r]||{},{tickSize:l}=s,c=Vo((()=>Yo()),[]),d=Vo((()=>Yo()),[]);return c[2]&&Object.keys(o).length&&(c[0](f(ge({commonConfig:s,formData:{optionType:n.toLowerCase()},iInstrument:o,indexPrice:(null==o?void 0:o.indexPrice)||0,precision:Number(s.fePriceFractionPrecision)||1}))),c[2]=!1),Go((()=>{let a=0,o=0;const i=n===Oo.Buy;let r=W(f(t),l);const c=e=>0===e?0:e<l?l:e;(function(e){return Uo.get((e=>`/option/usdc/webapi/public/v5/tick?symbol=${e}`)(e))})(e).then((e=>{a=f(e.ask),o=f(e.bid),t=e.markPrice,r=W(f(t),l)})).catch((e=>{})).finally((()=>{d[0]((i?a||c(r.formatDown):o||c(r.formatUp))||s.minOrderPrice||0)}))}),[]),Go((()=>(Promise.all([d[1],c[1]]).then((([e,t])=>{a(n===Oo.Buy?Math.min(e,t):Math.max(e,t))})),()=>{a=()=>{}})),[]),0}function Wo(e,t){const n=Ne({size:e||0,commonConfig:ja.quote.allCommonConfig[t]});return f(n.value.toFixed(2))}function Yo(){let e=()=>{};const t=new Promise(((t,n)=>{e=t}));return[e,t,!0]}const $o=e=>{var t,n,a;const o=null==(t=null==e?void 0:e.assetList)?void 0:t.filter((e=>(ja.common.coinList.length?ja.common.coinList:["BTC","ETH"]).includes(e.baseCoin)));return null!=(a=null==(n=Ce(d(c({},e),{assetList:Xt(o)})))?void 0:n.assetList)?a:[]},Ko=e=>{const t=[],n=[];return e.forEach((e=>{var a;null==(a=e.categoryList)||a.forEach((e=>{var a;if(null==e?void 0:e.expDateList)e.expDateList.forEach((e=>{(null==e?void 0:e.symbolList)&&t.push(...e.symbolList)}));else{const t=(null==(a=null==e?void 0:e.symbolList)?void 0:a.filter((e=>e.size>0)))||[];n.push(...t)}}))})),[t,n]};var Qo={"liquidation-pnl":"_liquidation-pnl_1r767_1","liquidation-note":"_liquidation-note_1r767_2","liquidation-range":"_liquidation-range_1r767_12"};var zo=function(){const e=new Map,t=new Map;return{all:e,untreated:t,on(n,a){const o=e.get(n);o?o.push(a):e.set(n,[a]);const i=t.get(n);void 0!==i&&(this.emit(n,i),t.delete(n))},off(t,n){const a=e.get(t);a&&(n?a.splice(a.indexOf(n)>>>0,1):e.set(t,[]))},emit(n,a){let o=e.get(n);o?o.slice().map((e=>{e(a)})):t.set(n,a),o=e.get("*"),o&&o.slice().map((e=>{e(n,a)}))}}}();const{PATCH_TRIAL_DIALOG_VISIBLE:Xo,PLACE_ORDER_DONE:Jo}=$n;var Zo=(e=>(e[e.DOUBLE_CONFIRM=0]="DOUBLE_CONFIRM",e[e.OFFSET_CONFIRM=1]="OFFSET_CONFIRM",e[e.SUCCESS=2]="SUCCESS",e[e.ERROR=3]="ERROR",e))(Zo||{});const ei=(e,t,n)=>{const{order:a,quote:o}=ja,{formData:i,iInstrument:r={},optionGeneralData:s}=a,{allCommonConfig:l}=o,d=e||i,{baseCoin:u,symbolName:m}=Object.values(d)[0],_=l[u||m.split("-")[0]],p=s.placeMode,E=function(e,t,n){let a=[];a=["minSellFactor","minSellBasis","maxBuyFactor","tickSize","minOrderSize","maxOrderSize","minOrderSizeIncrement","minOrderPrice","maxOrderPrice","priceDeviationPercentage"].filter((t=>void 0===e[t]||null===e[t]||""===e[t]));const o=Object.keys(t);for(let i=0;i<o.length;i++){const e=o[i];n[e]||a.push(`iInstrument_${e}`)}return a}(_,d,t||r);return E.length&&lt.track("OptionsOrderMissDependencesClick",{dependences:JSON.stringify(E)}),E.length&&On.emitCustomError("missDependences",c({},E)),ve(_,d,t||r,n||p)},ti=(e,t,n)=>{if(e(!0),t)return t.commitData.forEach((e=>{e.pmTrial=!1})),void Ae(t,e,{commitDoneCallback:n});const a=ja.order.formData;lt.track("orderConfirm",{form_data:JSON.stringify(a),is_more:ja.common.isMore}),fe(e,a,{commitDoneCallback:n})},ni=e=>{e(!1),zo.emit(Jo,!1);const{formData:t}=ja.order,n={};for(const a in t)n[a]=d(c({},t[a]),{orderQty:""});dt("order",{type:Rn.UPDATE_FORM_DATA,payload:{formData:n}})},ai=({formData:e,warningFailedOrders:t,exceedFailedOrders:n,eventKey:a})=>{[].concat(t,n).length&&zo.emit(a,{visible:!0,formData:e,failedOrders:{[Yt]:t,[$t]:n}})},oi=({formData:e,warningFailedOrders:t,exceedFailedOrders:n,setLoading:a})=>{ai({formData:e,warningFailedOrders:t,exceedFailedOrders:n,eventKey:Xo});![].concat(t,n).length&&ni(a)},ii=window.React,ri=window.React.useMemo,si=window.React.useState,li=window.React.useEffect,ci=window.React.useRef,di=window.React.useImperativeHandle,ui=new Y,mi=ii.forwardRef((({rowData:e},t)=>{const{symbol:n,baseCoin:a,size:o,markPrice:i,side:r,strikePrice:s,symbolType:l,deliveryTime:u,entryPrice:m}=e,{t:_}=Et(),p=((e,t)=>{const{baseCoin:n}=t;return Vo((()=>({priceTitle:e("liquidation.closedPrice"),priceUnit:"USDC",qtyTitle:e("liquidation.closedQty",{baseCoin:n}),qtyUnit:e("BTC",{baseCoin:n})})),[e])})(_,{baseCoin:a}),E=yt((({quote:e})=>e.allCommonConfig))[a],y=Math.abs(f(o)),[T,I]=si({}),h=qo(n,i,r===Oo.Buy?Oo.Sell:Oo.Buy,(e=>{O(d(c({},S),{orderPrice:ui.toNumber(e,1)}))}),T,{baseCoin:a}),[S,O]=si((()=>{var e;return{symbolName:n,orderPrice:ui.toNumber(h,1),orderQty:y,placeType:Le.usd,optionType:(r===Oo.Buy?Oo.Sell:Oo.Buy).toLowerCase(),postOnly:!1,reduceOnly:!0,timeInForce:ft.GoodTillCancel,strikePrice:s,deliveryTime:f(u),markPrice:null!=(e=T.markPrice)?e:"0",symbolType:l,active:!1,baseCoin:a}})),[b,R]=si(pi[pi.length-1].value);di(t,(()=>({formData:S,instrument:T})),[S,T]),li((()=>{let e=!0;Ia.subscribeOrUnSubscribeSymbolInfoByName([n],"subscribe");const t=Ia.subscribeSymbolInstrument((t=>{e&&t[n]&&I(t[n])}));return()=>{e=!1,Ia.subscribeOrUnSubscribeSymbolInfoByName([n],"unsubscribe"),t()}}),[n]);const g=ri((()=>ui.toNumber((S.orderPrice-f(m))*f(S.orderQty)*(r===Oo.Buy?1:-1)||0,2)),[S.orderQty,S.orderPrice]);return ut.jsxs(ut.Fragment,{children:[ut.jsx(Pe,{formData:S,type:"modal",instrumentDetail:T,valueChangeCallBack:O,extralMaxOrderSizeLimit:y,commonConfig:E,translate:p}),ut.jsx("div",{className:Qo["liquidation-range"],children:ut.jsx($,{values:pi,value:b,onChange:e=>{O(d(c({},S),{orderQty:Wo(y*e,a)})),R(e)}})}),ut.jsx("p",{className:Qo["liquidation-pnl"],children:_(g>=0?"liquidation.pnl":"liquidation.pnlLoss",{orderPrice:S.orderPrice,orderQty:S.orderQty,pnl:Math.abs(g),baseCoin:S.baseCoin})})]})}));mi.displayName="DataForTrade";var _i=ii.memo((({openState:e,setOpenState:t,rowData:n})=>{const{symbol:a}=n,{t:o}=Et(),i=ci({formData:{},instrument:{}});return ut.jsxs(M,{head:o("liquidation.limitClose"),confirmText:o("msg.confirm"),cancelText:o("msg.cancel"),open:e,showConfirm:!0,className:`show-darkModal ${Qo.liquidation}`,onClose:()=>t(!1),onCancel:()=>t(!1),onConfirm:()=>function(e){const n=i.current.formData,r=i.current.instrument;ei({[n.symbolName]:n},{[n.symbolName]:r},Ie.Advanced).type!==Zo.ERROR&&(fe((()=>{}),{[a]:n},{commitDoneCallback:({warningFailedOrders:e,exceedFailedOrders:t})=>{const n=[];(null==e?void 0:e.length)&&n.push(o(String(Yt),{SymbolNames:e.join("、")})),(null==t?void 0:t.length)&&n.push(o(String($t),{SymbolNames:t.join("、")})),n.length&&G.warn(n.join(""))}},!1),t(!1))}(),size:"small",lockScroll:!0,draggable:!1,children:[ut.jsx("p",{className:Qo["liquidation-symbol"],children:a}),ut.jsx(mi,{rowData:n,ref:i},a),ut.jsx("p",{className:Qo["liquidation-note"],children:o("liquidation.note")})]},a)}),((e,t)=>e.rowData===t.rowData));const pi=[{value:.1,label:"10%"},{value:.2,label:"20%"},{value:.5,label:"50%"},{value:.75,label:"75%"},{value:1,label:"100%"}],Ei="/option/usdc/private/asset/query",yi="/mergeLink/v3/private/asset",Ti={MSG_USER_PORTFOLIO_WALLET:"MSG_USER_PORTFOLIO_WALLET",MSG_USER_PORTFOLIO_GREEKS:"MSG_USER_PORTFOLIO_GREEKS",MSG_USER_PORTFOLIO_ASSETS:"MSG_USER_PORTFOLIO_ASSETS",MSG_USER_PORTFOLIO_EXPIREDATE:"MSG_USER_PORTFOLIO_EXPIREDATE",MSG_USER_PORTFOLIO_ORDER:"MSG_USER_PORTFOLIO_ORDER",MSG_USER_PORTFOLIO_POSITION:"MSG_USER_PORTFOLIO_POSITION",MSG_USER_MERGE_POSITION:"MSG_USER_MERGE_POSITION",MSG_USER_PORTFOLIO_ORDERHISTORY:"MSG_USER_PORTFOLIO_ORDERHISTORY",MSG_USER_PORTFOLIO_TRADEHISTORY:"MSG_USER_PORTFOLIO_TRADEHISTORY",MSG_USER_PORTFOLIO_POSITION_MORE:"MSG_USER_PORTFOLIO_POSITION_MORE",MSG_USER_PERP_TRADE:"MSG_USER_PERP_TRADE"},Ii={urlMap:c({mergePosition:`${yi}/queryMergePositions`,openOrders:`${yi}/queryUserOpenOrders`,orderHistory:`${Ei}/orderHistory`,tradeHistory:`${Ei}/tradeHistory`,orderHistoryMore:`${yi}/queryUserOrderHistory`,tradeHistoryMore:`${yi}/queryUserTradeHistory`,deliveryPositions:`${yi}/queryUserDeliveryPositions`,tradeDetails:`${Ei}/tradeDetails`,walletBalance:`${Ei}/walletBalance`},{userAssetPNL:`${Ei}/userAssetPNL`,expDatePositions:`${Ei}/expDatePositions`,positionGreeks:`${Ei}/positionGreeks`}),httpParams:{pageIndex:1,pageSize:100,pageSource:0},assetTopic:c({USER_PORTFOLIO_ORDERHISTORY:"user.option.orderHistory",USER_PORTFOLIO_TRADEHISTORY:"user.option.tradeHistory",USER_PERP_TRADE:"user.perp.trade",USER_POSITION_MSG:"user.margin.order"},{USER_PORTFOLIO_WALLET:"user.portfolio.wallet",USER_POSITION_LIQUIDATION:"user.option.liquidation",USER_MERGE_POSITION:"user.v3.merge.option.position",USER_PORTFOLIO_ORDER:"user.v3.option.order"})},hi={urlMap:{mergePosition:"/mergeLink/v3/private/asset/unify/queryMergePositions",openOrders:"/unified/option/v5/queryUserOpenOrders",orderHistory:"/unified/option/v5/queryUserOrderHistory",tradeHistory:"/unified/option/v5/queryUserTradeHistory",deliveryPositions:"/unified/option/v5/queryUserDeliveryPositions",tradeDetails:"/unified/option/v5/queryUserTradeHistory",walletBalance:"/unified/v5/wallet/list"},httpParams:{limit:100,cursor:""},assetTopic:c({USER_MERGE_POSITION:"user.v3.unfiy.merge.option.position",USER_PORTFOLIO_ORDER:"user.v3.unify.option.order",USER_PORTFOLIO_ORDERHISTORY:"user.unify.option.orderHistory",USER_PORTFOLIO_TRADEHISTORY:"user.unify.option.tradeHistory",USER_PERP_TRADE:"user.unify.perp.tradeHistory",USER_POSITION_MSG:"user.unify.option.trade.notify"},{USER_PORTFOLIO_WALLET:"user.unify.uta.wallet",USER_POSITION_LIQUIDATION:"user.unify.liquidation",USER_NOTICE:"user.unify.notice"})};let Si=null;try{Si=new Audio("/trade/option/usdc/assets/excution-sound.977b0dea.mp3")}catch(C_){Si=null}const Oi=async(e,t={})=>Uo.post(e,t).then(((e={})=>{var t;return e.version=void 0===e.version?0:Number(e.version),e.result=null!=(t=e.result)?t:[],e}),(e=>({result:[],resultPageIndex:1,resultTotalSize:1,version:-1}))),bi=async e=>{var t,n;const{url:a,newParams:o}=gi(e,"mergePosition"),i=await Oi(a,o);return dt("assets",Oa(null!=(t=null==i?void 0:i.optionPositionList)?t:[])),d(c({},i),{result:null!=(n=null==i?void 0:i.optionPositionList)?n:[]})},Ri=async e=>{const{url:t,newParams:n}=gi(e,"mergePosition");return await Oi(t,n)},gi=(e,t,n=!0)=>{const a=c({},e),{isUMAccount:o}=a,i=o?hi.urlMap:Ii.urlMap;return!o&&n&&(a.bizType=1),delete a.isUMAccount,{url:i[t],newParams:a}},Ni=e=>{const{data:t={}}=e;[ho.POSITION,ho.LIQUIDATION].includes(t.scene)&&ja.order.userSettings.OPTION_AUDIO_NOTICE&&(null==Si||Si.play()),t.scene===ho.NOTICE?Ci(e):we(e)},Ci=({data:e})=>{const{symbol:t,side:n,noticeType:a,addMarginBalance:o}=e||{};let i="",r="",s="";n&&(s="Buy"===n?Tt.t("common:pozLong"):Tt.t("common:pozShort")),"AddMargin"===a&&(i=Tt.t("common:addMarginSucNoticeTit"),r=Tt.t("common:addMarginSucNoticeDesc",{symbol:t,side:s,margin:o})),r&&K.info(i,r)},{MSG_USER_PORTFOLIO_GREEKS:vi,MSG_USER_PORTFOLIO_ASSETS:Ai,MSG_USER_PORTFOLIO_EXPIREDATE:fi,MSG_USER_PORTFOLIO_ORDER:Li,MSG_USER_PORTFOLIO_POSITION:Pi,MSG_USER_MERGE_POSITION:Di,MSG_USER_PORTFOLIO_ORDERHISTORY:wi,MSG_USER_PORTFOLIO_TRADEHISTORY:Mi,MSG_USER_PERP_TRADE:xi}=Ti,{USER_SERVICE:Ui,USER_TRADE_MSG:Bi,USER_UTA_UPGRADE:ki}=Qn,ji=e=>(_a.subscribe({commandType:Wn.NORMAL,topic:Di,payload:{},callback:t=>{const n=t.data;e.current.setData(n)}}),()=>{_a.cleanSubscribeTopicCallback(Di)}),Hi=()=>(_a.subscribe({commandType:Wn.NORMAL,topic:Bi,payload:{},callback:Ni}),_a.subscribe({commandType:Wn.NORMAL,topic:xi,payload:{},callback:({data:e})=>{var t;De(null!=(t=null==e?void 0:e.result)?t:[])}}),()=>{_a.cleanSubscribeTopicCallback(Bi),_a.cleanSubscribeTopicCallback(xi)}),Fi=e=>{try{return ht(Number(e)).format("YYYY-MM-DD HH:mm:ss")}catch{return e}},Gi=(()=>{const e=new Y;return function(t,n,a=Y.ROUND_DOWN){return t?e.toLocaleString(t,n,a):"--"}})(),Vi=(()=>{const e=new Y;return function(t,n,a=Y.ROUND_DOWN){try{return e.toPercent(t,n,a)}catch{return"--"}}})(),qi=(e,t=8)=>{try{return e.slice(-t)||"--"}catch{return e}},Wi=(e,t,n,a)=>{var o,i,r,s;return 0===t.result.length?t.result=null!=(o=e.result)?o:[]:e.result.forEach((e=>{e.version=f(e.version);const o=t.result.findIndex((t=>t[a]===e[a]));if(-1===o)Yi(e,t,n);else{const a=t.result[o];if(!(e.version>a.version))return;e[n]!=a[n]?(t.result.splice(o,1),Yi(e,t,n)):t.result.splice(o,1,e)}})),t.result.splice(100),{result:t.result,version:null!=(s=null==(r=null==(i=t.result)?void 0:i[0])?void 0:r.version)?s:0}};function Yi(e,t,n){let a=0;for(;a<t.result.length&&!(e[n]>=t.result[a][n]);a++);t.result.splice(a,0,e)}const $i=({className:e,style:t={},isHeaderRow:n,children:a})=>{const o=`by-table-row ${n?"by-table-row-header":""} ${e}`,i=c({},t);return ut.jsx("div",{className:o,style:i,children:a})};function Ki({align:e="left",className:t="",fixed:n,width:a,style:o={},children:i}){let r=`by-table-cell ${t}`;"left"===n&&(r+=`by-table-cell-fix-${n}`),"right"===n&&(r+=`by-table-cell-fix-${n}`);const s=c({},o);return s.justifyContent="left"===e?"flex-start":"center"===e?"center":"flex-end",s.textAlign=e,void 0!==a&&(s.flex=`0 0 ${a}px`),ut.jsx("div",{className:r,style:s,children:i})}const Qi=({children:e,className:t,expanded:n})=>{if(!n)return null;const a=`by-table-row-expanded ${t||""}`;return ut.jsx("div",{className:a,children:e})},zi=window.React.useEffect,Xi=window.React.useMemo,Ji=window.React.useState;function Zi({dataSource:e=[],columns:t=[],rowKey:n="",renderEmpty:a,showHeader:o=!0,headerStyle:i={},bodyStyle:r={},rowClassName:s,headerHeight:l,stickyHeader:m,scrollX:_,scrollXWidth:p,expandedRowKeys:E,expandedRowRender:y,expandedRowClassName:T,view:I,rowSelection:h,footerRender:S,summary:O}){var b;if(!Array.isArray(t))throw new Error("columns must be an array");if(!Array.isArray(e))throw new Error("dataSource must be an array");const[R,g]=Ji(new Set(null!=(b=null==h?void 0:h.defaultSelectedRowKeys)?b:[])),[N,C]=Ji(!1),v=Xi((()=>"checkbox"===(null==h?void 0:h.type)),[null==h?void 0:h.type]);zi((()=>{v&&C(R.size===e.length)}),[R.size,e.length]),zi((()=>{v&&(null==h?void 0:h.selectedRowKeys)&&g(h.selectedRowKeys)}),[null==h?void 0:h.selectedRowKeys]),zi((()=>{var e;null==(e=null==h?void 0:h.onChange)||e.call(h,Array.from(R))}),[R]);const A=t=>{const a=e.map(((e,t)=>{var a;return void 0!==e[n]?e[n]:null!=(a=e.key)?a:t}));g(new Set(t?a:[])),C(t)},f=Xi((()=>{const e=t.map(((e,t)=>{var n;const a=e,{title:o}=a,i=u(a,["title"]);return ut.jsxs(Ki,d(c({},i),{children:[v&&0===t&&ut.jsx(Q,{type:"normal",color:"brand",checked:N,disabled:null==h?void 0:h.disabled,onChange:A}),o]}),null!=(n=e.key)?n:e.dataIndex)})),n=c({},i);return void 0!==l&&(n.height=l),void 0!==p&&(n.width=p),m&&(n.position="sticky",n.top=0,n.zIndex=3),o?ut.jsx($i,{isHeaderRow:!0,style:n,children:e}):null}),[t,i,l,p,m,o]),L=Xi((()=>{if(!O)return null;const e=t.map(((e,t)=>{var n;const a=e,{title:o,className:i}=a,r=u(a,["title","className"]);return ut.jsx(Ki,d(c({},r),{children:O(e,t)}),"total"+(null!=(n=e.key)?n:e.dataIndex))}));return ut.jsx($i,{children:ut.jsx("div",{className:"by-table-cell-group",children:e})},"total")}),[O,t]),P=Xi((()=>{if(!e.length)return ut.jsx("div",{className:"by-table-placeholder",children:a?a():"No Data"});const o=(e,t)=>{const a=!!Array.isArray(E)&&E.indexOf(e[n])>-1,o=y?y(e,t):null,i=T?T(e,t):void 0;return ut.jsx(Qi,{expanded:a,className:i,children:o})};return e.map(((e,a)=>{var i;const r=null!=(i=null==s?void 0:s(e,a))?i:"",{key:l}=e,m=void 0!==e[n]?e[n]:null!=l?l:a,_=t.map(((t,n)=>{var a,o;const i=t,{render:r}=i,s=u(i,["render"]),l=e[null!=(a=t.dataIndex)?a:""],_=r?r(l,e,n):l;return ut.jsxs(Ki,d(c({},s),{children:[v&&0===n&&ut.jsx(Q,{type:"normal",color:"brand",disabled:null==h?void 0:h.disabled,checked:R.has(m),onChange:e=>((e,t)=>{const n=new Set(R);n[t?"add":"delete"](e),g(n)})(m,e)}),_]}),null!=(o=t.key)?o:t.dataIndex)}));return ut.jsxs($i,{className:r,children:[ut.jsx("div",{className:"by-table-cell-group",children:_}),o(e,a)]},m)}))}),[e,a,E,n,y,T,s,t,R]),D={};return m&&(D.overflowY="scroll"),_&&(D.overflowX="scroll"),void 0!==p&&(r.width=p),ut.jsx("div",{className:"by-table",children:ut.jsxs("div",{className:"by-table-container scrollbar",style:D,children:[f,ut.jsxs("div",{className:"by-table-body",style:r,children:[(null==I?void 0:I.upBlock)?ut.jsx("div",{className:"vscroll-block",style:{height:I.upBlock}}):null,L,P,(null==I?void 0:I.downBlock)?ut.jsx("div",{className:"vscroll-block",style:{height:I.downBlock}}):null,S&&!!e.length&&S()]})]})})}const er=({height:e=184,iconSize:t=84})=>{const{t:n}=Et("common");return ut.jsx("div",{className:"by-empty",style:{height:e},children:ut.jsxs("div",{className:"by-empty-center",children:[ut.jsx("p",{className:"by-empty-icon",style:{width:t,height:t}}),ut.jsxs("p",{className:"by-empty-text",children:[" ",n("bookSymbolNoData")]})]})})};var tr={"assets-tab":"_assets-tab_bxtwe_1","is-vip":"_is-vip_bxtwe_18",tableStyle:"_tableStyle_bxtwe_24",tableSimple:"_tableSimple_bxtwe_33",detailTab:"_detailTab_bxtwe_39",orderTab:"_orderTab_bxtwe_43",assetBtn:"_assetBtn_bxtwe_47"};var nr="_login-notice_1v0tl_1",ar="_center_1v0tl_7",or=(e=>(e.REGISTER="register",e.LOGIN="login",e))(or||{});function ir(e){return`/${e}?redirect_url=${encodeURIComponent(location.href)}`}function rr(e){window.location.href=ir(e)}const sr=()=>{const{t:e}=Et();return ut.jsx("a",{href:ir(or.LOGIN),target:"_self",children:e("auth.login")})},lr=()=>{const{t:e}=Et();return ut.jsx("a",{href:ir(or.REGISTER),target:"_self",children:e("auth.signup")})},cr=()=>ut.jsx("div",{className:`${nr} option__loginNotice`,children:ut.jsx("p",{className:ar,children:ut.jsx(St,{i18nKey:"auth.needLogin",components:[ut.jsx(sr,{},"login"),ut.jsx(lr,{},"signup")]})})}),dr=window.React.useEffect,ur=window.React.useRef,mr=window.React.useState,_r={version:-1,result:[]};function pr(e){const{columns:t,queryByHttp:n,httpCallBack:a,ignoreInactive:o=!1,whenInitWithData:i,actionCreater:r,subscribeToWorker:s,rowKey:l="id",beforeSetDataByHttp:u,beforeSetDataByWs:m=((e,t)=>e),subscribeToWorkerPatch:_}=e;t.forEach((e=>{var t;const n=null!=(t=e.render)?t:e=>""===e?null:e;e.render=(e,t,a)=>{var o;try{return null!=(o=n(e,t,a))?o:"--"}catch{return"--"}}}));const p={gridTemplateColumns:`repeat(${t.length}, minmax(min-content, auto))`};return({panelState:e,setPanelState:E,isActive:y,onSizeChange:T=(()=>{}),customParams:I,footerRender:h})=>{const{user:S,baseCoin:O}=yt((({common:e})=>e)),{id:b,isUMAccount:R,isLoginReady:g}=S||{},{t:N}=Et();t.forEach((e=>{const t=e.titleKey;t.key?e.title=ut.jsx(Io,{value:N(`table.${t.key}`),tipValue:N(`table.Explain${t.key}`)}):e.title=N(`table.${t}`)}));const C=e?225:0;let[v,A]=mr({result:[],version:-1});const[f,L]=mr(_r),P=ur({data:v,setData:A}),D=ur(!0),w=ur(!0),M=ur(!0);if(w.current){const e=A;A=t=>{var n;w.current=!1,i&&i(null!=(n=t.result)?n:[],dt),e(t)}}P.current.data=v,P.current.setData=e=>{var t;D.current&&(e=m(e,v),A(e),r&&dt("assets",r(null!=(t=e.result)?t:[])))},dr((()=>{const e=s&&s(P);return null!=e?e:()=>{}}),[]),dr((()=>{const e=_&&_(P);return null!=e?e:()=>{}}),[]),dr((()=>()=>{D.current=!1}),[]),dr((()=>{O&&(w.current=!0)}),[O]),dr((()=>{y&&I&&!w.current&&x(!0)}),[I]),dr((()=>{g&&O&&(y?(w.current||u&&M.current)&&x():w.current&&o&&x())}),[y,b,g,w.current]),dr((()=>{const e=(e=>{const{dataSource:t=[],filterCoin:n,maxLen:a,coinList:o=[]}=e,i=n?[n]:o.map((e=>e.baseCoin)),r=[];for(const s of t){const{baseCoin:e,coin:t,symbol:n}=s,o=e||t||(null==n?void 0:n.split("-")[0]);if(i.includes(o)&&r.push(s),a&&r.length>=a)break}return r})({dataSource:(b?v:_r).result,filterCoin:O,maxLen:200});L(d(c({},f),{result:e})),T(e.length)}),[v,y,O]);const x=async(e=!1)=>{var t;w.current=!1,M.current=!1;const o=R?hi.httpParams:Ii.httpParams;let i=await n(d(c({},null!=I?I:o),{baseCoin:O,isUMAccount:R}));const r=P.current.data;D.current&&(!e&&u&&(i=u(i,r)),!u&&i.version<r.version||(A(i),a&&a(null!=(t=null==i?void 0:i.result)?t:[])))},U=d(c({},p),{maxHeight:C});return y?ut.jsx(ut.Fragment,{children:ut.jsx("div",{className:`${tr.tableStyle} scrollbar`,style:U,children:ut.jsx(Zi,{scrollX:!0,stickyHeader:!0,columns:t,dataSource:f.result,rowKey:l,bodyStyle:{maxHeight:144},renderEmpty:g?()=>ut.jsx(er,{}):()=>ut.jsx(cr,{}),footerRender:h})})}):null}}const Er=(e,t)=>{var n;const a=e.split("-"),o=[a[0],a[1]],i=a.slice(2);let r="";return t.side&&(r=`border-left-${tn(t.side)}`),ut.jsxs("div",{className:"df aic",children:[ut.jsxs("span",{className:r,children:[o.join("-"),ut.jsx("br",{}),"-",i.join("-")]}),2===t.createType&&ut.jsx("span",{className:"bit-design-iconfont bit-icon_tactics ml4"}),(null==(n=null==t?void 0:t.refInfoList)?void 0:n.length)>0&&ut.jsx("img",{src:"https://s1.bycsi.com/bybit/deadpool/image-de67cfe5413c4ae7bcc1d327488c8e1e.png",className:"break-symbol__tag-protect ml4"})]})},yr={path:void 0,instance:void 0},Tr=(e,{onConnect:t})=>{if(yr.path&&yr.path===e)return setTimeout((()=>{null==t||t()})),yr.instance;const n=new Me(`${(null==pn?void 0:pn[0])||P}/${e}?v=2`,{autoConnect:!0});return yr.path=e,yr.instance=n,n.on("connect",t),n},Ir=window.React,hr=window.React.useEffect,Sr=window.React.useState;let Or;const br=({ws3Path:e,updatePositionTpSlList:t,replaceOrderNotify:n,orderNotify:a,positionNotify:o})=>{const[i,r]=Sr(!1),[s,l]=Sr(!1),c=Ir.useRef(a),d=Ir.useRef(o);hr((()=>{d.current=o}),[o]),hr((()=>{c.current=a}),[a]),hr((()=>{const t=()=>{},n=()=>{var t,n,a;const o=`${(e=>{const t=(null==pn?void 0:pn[0])||P,n=pn||[];return 0===n.length&&n.push(t),((e,t)=>{if(e.length<1)return t;const n=e.findIndex((e=>e===t));return n===e.length-1?e[0]:e[n+1]})(n||[],e)||t})((t=null==Or?void 0:Or.uri,n=e,(null==(a=null==t?void 0:t.split(`/${n}`))?void 0:a[0])||t))}/${e}?v=2`;Or.changeUrl(o)};return z(e)||Or||(Or=Tr(e,{onConnect:()=>r(!0)}),Or.on("reconnect",t),Or.on("close",n)),()=>{Or&&(Or.off("reconnect",t),Or.off("close",n),u())}}),[e]);const u=()=>{Or&&i&&(Or.leave("umOrder"),Or.leave("user.unify.perp.order"),Or.leave("user.v3.perp.order"),Or.leave("umExecution"),Or.leave("umNotice"),r(!1),Or=void 0)};return hr((()=>(i&&(()=>{Or.on("login_fail",(()=>l(!0))),Or.on("login_success",(()=>l(!1)));const e=({data:e=[]})=>{var a;const o=(null==e?void 0:e.result)?null==e?void 0:e.result:e;o.length>0&&"Activity"!==o[0].type&&["TakeProfit","StopLoss","PartialTakeProfit","PartialStopLoss"].indexOf(null==(a=o[0])?void 0:a.stopOrderType)>-1&&X(t)&&t({data:{result:o}}),X(n)&&n(o)};Or.private("umOrder",e),Or.private("user.unify.perp.order",e),Or.private("user.v3.perp.order",e),Or.private("umExecution",(({data:e})=>{X(c.current)&&c.current(e)})),Or.private("umNotice",(({data:e})=>{X(d.current)&&d.current(e)}))})(),()=>{i&&(u(),Or=null,r(!1))})),[i]),null},Rr=e=>{const t=e,{symbol:n,takeProfit:a,stopLoss:o,basePrice:i,trailValue:r,triggerPrice:s,price:l,qtyX:m,leavesQtyX:_,cumQtyX:p,cumValueE8:E,cumExecFeeE8:y,lastExecPrice:T,origTriggerPrice:I,origPrice:h,origQtyX:S,createdAtE3:O}=t,b=u(t,["symbol","takeProfit","stopLoss","basePrice","trailValue","triggerPrice","price","qtyX","leavesQtyX","cumQtyX","cumValueE8","cumExecFeeE8","lastExecPrice","origTriggerPrice","origPrice","origQtyX","createdAtE3"]),R=un(m),g=un(_),N=un(p),C=L(E,1e8,"div"),v=L(y,1e8,"div"),A=un(S);return d(c({},b),{symbol:n,takeProfit:dn(a),stopLoss:dn(o),basePrice:dn(i),trailValue:dn(r),triggerPrice:dn(s),price:dn(l),qty:R,leavesQty:g,cumQty:N,cumValue:C,cumExecFee:v,lastExecPrice:dn(T),origTriggerPrice:dn(I),origPrice:dn(h),origQty:A,createdAtE3:dn(O)})},gr=(e,t)=>{const n=e,{action:a,side:o,symbol:i,orderId:r,orderType:s,timeInForce:l,reduceOnly:m,triggerBy:_,stopOrderType:p,expectedDirection:E,orderStatus:y,isWorking:T,tpTriggerBy:I,slTriggerBy:h,createType:S,cancelType:O,pnl:b,avgPrice:R}=n,g=u(n,["action","side","symbol","orderId","orderType","timeInForce","reduceOnly","triggerBy","stopOrderType","expectedDirection","orderStatus","isWorking","tpTriggerBy","slTriggerBy","createType","cancelType","pnl","avgPrice"]);let{qty:N,leavesQty:C,cumExecQty:v,origQty:A,type:f}=e;return N=dn(N),C=dn(C),v=dn(v),A=dn(A),t&&(f=t),d(c({},g),{symbol:i,tpTriggerBy:I,slTriggerBy:h,createType:S,cancelType:O,takeProfit:dn(e.takeProfit),stopLoss:dn(e.stopLoss),orderId:r,action:a,side:o,orderType:s,timeInForce:l,reduceOnly:m,stopOrderType:p,triggerBy:_,expectedDirection:E,basePrice:dn(e.basePrice),trailValue:dn(e.trailValue),triggerPrice:dn(e.triggerPrice),price:dn(e.price),qty:N,leavesQty:C,cumQty:v,cumValue:dn(e.cumValue),cumExecFee:dn(e.cumExecFee),orderStatus:y,cxlRejReason:e.cxlRejReason,lastExecPrice:dn(e.lastExecPrice),createdAt:dn(e.createdAt),updatedAt:dn(e.updatedAt),origTriggerPrice:dn(e.origTriggerPrice),origPrice:dn(e.origPrice),origQty:A,isWorking:T,pnl:b,avgPrice:dn(R),orderIm:e.orderIM,type:f})},Nr=e=>{console.log(e);const t=(()=>{let e={optionPreferBookSymbolTab:"all"};try{const t=JSON.parse(localStorage.getItem("by_s_d_u_p_s")||"{}");return e=c(c({},e),t),e}catch(C_){return e}})(),n=c(c({},t),e);try{localStorage.setItem("by_s_d_u_p_s",JSON.stringify(n))}catch(C_){console.log("error",C_)}};function Cr(e){return null===e?0:e}const vr=e=>Number.isNaN(Number(e))?0:Number(e),Ar=(e=0)=>vr(new st(Cr(e)).div(1e8)),fr=(e=0)=>vr(new st(Cr(e)).div(100)),Lr="Buy",Pr="Sell";const Dr=e=>{const{coin:t,adlRankIndicator:n,symbol:a,mode:o,positionStatus:i,side:r,slTriggerBy:s,tpSlMode:l,tpTriggerBy:c,userId:d,isAvailable:u,isAutoAddMargin:m,isIsolated:_}=e;return{coin:t,userId:d,ROI:vr(e.ROI),PNL:vr(e.PNL),sessionUPL:vr(e.sessionUPL),sessionRPL:vr(e.sessionRPL),positionIM:vr(e.positionIM),positionMM:vr(e.positionMM),positionUPL:vr(e.positionUPL),positionRPL:vr(e.positionRPL),activationPrice:vr(e.activationPrice),adlRankIndicator:n,bustPrice:vr(e.bustPrice),bv2c:Ar(e.bv2cE8),cumRealisedPnl:vr(e.cumRealisedPnl),entryPrice:vr(e.entryPrice),isAutoAddMargin:m||!1,positionBalance:vr(e.positionIM),minPositionCost:vr(e.positionIM),newExtraAddedMargin:vr(e.newExtraAddedMargin),isIsolated:_||!1,leverage:fr(e.leverage),liqPrice:vr(e.liqPrice),markPrice:vr(e.markPrice),mode:o,occClosingFee:vr(e.occClosingFee),occFundingFee:vr(e.occFundingFee),positionIdx:vr(e.positionIdx),positionStatus:i,riskId:vr(e.riskId),side:r,size:vr(e.size),slFreeSize:vr(e.slFreeSize),slOrderNum:vr(e.slOrderNum),slTriggerBy:s,stopLoss:vr(e.stopLoss),sv2c:Ar(e.sv2cE8),symbol:a,takeProfit:vr(e.takeProfit),tpFreeSize:vr(e.tpFreeSize),tpOrderNum:vr(e.tpOrderNum),tpSlMode:l,tpTriggerBy:c,trailingStop:vr(e.trailingStop),tsTriggerPrice:vr(e.tsTriggerPrice),trailValuePercentageE4:vr(e.trailValuePercentageE4),unrealisedPnl:vr(e.unrealisedPnl),value:vr(e.positionValue),sessionAvgPrice:vr(e.sessionAvgPrice),sessionUpl:vr(e.sessionUPL),sessionRpl:vr(e.sessionRPL),positionIm:vr(e.positionIM),positionMm:vr(e.positionMM),freeCost:vr(e.freeCost),freeQty:vr(e.freeQty),isAvailable:u}},wr=e=>{let t=[];return e.forEach((e=>{const{categoryList:n=[]}=e;n.forEach((e=>{const{category:n,symbolList:a,expDateList:o=[]}=e;"Future"===n?t=t.concat((e=>{const{list:t=[]}=e;return t.map((e=>Dr(e)))})({list:a})):o.forEach((e=>{const{symbolList:n}=e||{};t=t.concat(n||[])}))}))})),t},Mr=e=>{const t=e,{symbol:n,qtyX:a,leavesQtyX:o,execQtyX:i}=t,r=u(t,["symbol","qtyX","leavesQtyX","execQtyX"]),s=un(a),l=un(o),m=un(i);return d(c({},r),{symbol:n,qty:s,leavesQty:l,execQty:m})},xr=e=>{const t=e,{symbol:n,subQtyX:a,qtyX:o,sizeX:i,newLimitE8:r,oldLimitE8:s,marginE8:l}=t,m=u(t,["symbol","subQtyX","qtyX","sizeX","newLimitE8","oldLimitE8","marginE8"]),_=un(a),p=un(o),E=un(i),y=L(r,1e8,"div"),T=L(s,1e8,"div"),I=L(l,1e8,"div");return d(c({},m),{symbol:n,subQty:_,qty:p,size:E,newLimit:y,oldLimit:T,margin:I})};function Ur(e){var t;const n=(null==e?void 0:e.list)||[],a=n.length;if(a>0)for(let o=0;o<a;o+=1){let e="",a="";const i=J(null==(t=n[o])?void 0:t.symbol)?n[o]:Mr(n[o]),{execType:r,orderType:s,leavesQty:l,execQty:c,execPrice:d,symbol:u,orderId:m,side:_,reduceOnly:p}=i,E=u;if("Trade"===r){const t="Market"===s?Tt.t("common:marketLowerCase"):d,n="Buy"===_?Tt.t("common:Bought"):Tt.t("common:Sold");l>0?(e=Tt.t("common:orderPartialFillNoticeTitle"),a=Tt.t("common:orderPartialFillNoticeDesc",{type:n,execQty:mn(c),symbol:E,price:t,leavesQty:mn(l)})):(e=Tt.t("common:orderFillNoticeTitle"),a=Tt.t("common:orderFillNoticeDesc",{type:n,execQty:mn(c),symbol:E,price:t}))}a&&K.success(e,a)}}const Br=window.React.useState,kr=window.React.useEffect,jr=e=>{const[t,n]=Br({}),a=t=>{Object.entries(t.payload).forEach((([t,n])=>{var a;const o=null==(a=null==e?void 0:e.current)?void 0:a[t];n.lastPrice&&o&&(n.changeRate24H=yn(n.lastPrice,o,void 0,!0).changeRate24H)})),n(t.payload)};return kr((()=>(ca.subscribe({commandType:Wn.NORMAL,topic:ea.RECIEVE_ALL_SYMBOLS,callback:a}),()=>{ca.cleanSubscribeTopicCallback(ea.RECIEVE_ALL_SYMBOLS,a)})),[]),t},Hr=window.React.useEffect,Fr=window.React.useRef,Gr=window.React.useState,Vr=window.React.useMemo,qr=[],Wr={TAKEPROFIT:"TakeProfit",STOPLOSS:"StopLoss",PARTIAL_TAKEPROFIT:"PartialTakeProfit",PARTIAL_STOPLOSS:"PartialStopLoss"},Yr={loaded:!1,symbol:"",data:{Buy:[],Sell:[]}},$r=({setPanelState:e,panelState:t,onSizeChange:n=(()=>{}),handleReverse:a})=>{var o,i,r,s;const{user:l,futuresConfig:u}=yt((({common:e})=>e)),{marginMode:m}=yt((({subHeader:e})=>e)),{shouldNotify:_}=yt((({order:e})=>e.userSettings||{})),{selectedSymbols:p}=yt((({quote:e})=>({selectedSymbols:e.selectedSymbols}))),E=Fr(Yr),{id:y,isUMAccount:T=!1,isUTAccount:I,memberTagUTA:h,isLoginReady:S,currencyCode:O,ws3Path:b,isNewLeader:R}=l||{},[g,N]=Gr([]),[C,v]=Gr(),A=Fr(),f=Fr([]),L=!1===Boolean(y)?qr:g,P=(()=>{const e=yt((({subHeader:e})=>e.isPM));return Vo((()=>({isOpen:e})),[e])})(),D={wallet:yt((({subHeader:e})=>{const{marginBalance:t,accountIM:n,accountMM:a,accountMMRate:o}=e;return{marginBalance:t,accountIM:n,accountMM:a,accountMMRate:o}})),user:{trailingStopGuide:!1}},[w,M]=Gr({}),[x,U]=Gr({}),B=jr(),[k,j]=Gr({}),H=t?225:0,F=yt((({quote:e})=>e.allCommonConfig)),G=yt((({common:e})=>e.rtlStatus)),V=Fr({data:g,setData:N}),{mmWarnLine:q}=yt((({subHeader:e})=>e));Fr({loaded:!1,symbol:"",data:{Buy:[],Sell:[]}});const W=Fr(!0),Y=Fr(!1);V.current.data=g,V.current.setData=e=>{W.current&&(f.current=Xt(e),z(e))};const $=Vr((()=>{var e,t,n,a;return{isFuture:!1,dataSource:wr(L),buyTpslList:(null==(t=null==(e=null==E?void 0:E.current)?void 0:e.data)?void 0:t.Sell)||[],sellTpslList:(null==(a=null==(n=null==E?void 0:E.current)?void 0:n.data)?void 0:a.Buy)||[]}}),[L,null==(i=null==(o=null==E?void 0:E.current)?void 0:o.data)?void 0:i.Sell,null==(s=null==(r=null==E?void 0:E.current)?void 0:r.data)?void 0:s.Buy]);Hr((()=>(Q(),()=>{W.current=!1})),[]),Hr((()=>{if(!S)return;(async()=>{const e=T?hi.httpParams:Ii.httpParams,t=await Ri(d(c({},e),{isUMAccount:T,category:"Option"})),{optionPositionList:n=[],perpPositionList:a=[],futurePositionList:o=[],assetInfoList:i=[],pmMode:r=!1}=null!=t?t:{},s=[...n,...a,...o];_a.setInitPositionPatch(s);const l=r?ke(s,!1,!1,i):ke(s);V.current.setData({assetList:l,version:0}),_a.initUserMergePosition()})(),(async()=>{var e,t;const n=await(async()=>{const e=`/contract/v5/position/tpsl-all?filter=all&_sp_category=fbu&_sp_business=usdt&_sp_response_format=portugal&timeStamp=${Date.now()}`;return await Uo.get(e)})(),a=await(async e=>{let t="/mergeLink/v3/private/asset/perp/queryCurrentUserOrder";return e&&(t="/unified/perp/v5/queryCurrentUserOrder?_sp_category=fbu&_sp_business=usdc&_sp_response_format=portugal"),await Uo.post(t,{category:"linear",symbol:"",limit:200})})(T),o=((e,t)=>{let n=[];const a=[Wr.PARTIAL_STOPLOSS,Wr.PARTIAL_TAKEPROFIT,Wr.STOPLOSS,Wr.TAKEPROFIT];if(Array.isArray(e)&&e.filter((e=>e.isAvailable)).forEach((({data:e=[]})=>{console.log(e,"data"),n=[...n,...e.filter((e=>"Activity"!==e.type&&a.indexOf(e.stopOrderType)>-1)).map((e=>Rr(e)))]})),t&&Array.isArray(t)&&(n=[...n,...t.filter((e=>"Activity"!==e.type&&a.indexOf(e.stopOrderType)>-1)).map((e=>gr(e)))]),0===n.length)return{Buy:[],Sell:[]};const[o,i]=[[],[]];return n.forEach((e=>{e.side===Lr?i.push(e):e.side===Pr&&o.push(e)})),{Buy:i,Sell:o}})((null==n?void 0:n.tpsl)||[],(null==a?void 0:a.list)||[]),i={data:o,symbol:(null==(e=o.Buy[0])?void 0:e.symbol)||(null==(t=o.Sell[0])?void 0:t.symbol),loaded:!0};E.current=i})(),(async()=>{const e=await(async()=>{const{list:e=[]}=await Uo.get("/contract/v5/settings/user-fee-rate")||{},t={};return e.forEach((({coin:e,defaultTakerFeeRate:n})=>{t[e]=Number(n)})),t})();j(e)})()}),[y,S,T]),Hr((()=>{const e=ji&&ji(V);return null!=e?e:()=>{}}),[]);const Q=async()=>{const e=xe.getInstance(),t=await e.fetchSymbolList({action:Ue.NETWORK_FIRST});M(t.allSymbolConfig||{}),U(t.totalSymbolConfig||{}),dt("common",function(e){return{type:vn.UPDATE_ALL_PERP_SYMBOL_CONFIG,payload:e}}(t.allSymbolConfig||{}))},z=e=>{const t=$o(e),[a,o]=Ko(t);dt("assets",Oa(a)),dt("assets",ba(o)),n(a.length+o.length),Y.current||(lt.track("OptionsAggrPositionResult",{optionsCount:a.length,futureCount:o.length}),Y.current=!0),N(t)};return Hr((()=>(A.current=Ia.subscribeSymbolOrderbook(((e={})=>{const t={};for(const n in e){const a=e[n];t[n]={sell:(null==a?void 0:a.sell)?[...a.sell].reverse():[],buy:(null==a?void 0:a.buy)||[]}}v(t)})),()=>{var e;null==(e=A.current)||e.call(A)})),[]),ut.jsxs(ut.Fragment,{children:[ut.jsx("div",{style:{position:"relative"},children:ut.jsxs("div",{className:`${tr.tableStyle} scrollbar`,style:{height:H},children:[ut.jsx(Be,{rowKey:"symbol",isDemo:En,isUMAccount:T,isUTA:I,isUTAProcess:h===bo.PROCESS,data:L,posCallback:{},optionDep:{allCommonConfig:F,precisions:{},commitOrderCallback:{},orderBookData:C,marketClosePositionCallback:(e,t)=>{const n=p.findIndex((e=>e.symbolName===t));"open"===e?-1===n&&ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUB_OR_UNSUB_ORDERBOOK,payload:{symbolNames:[t],action:"subscribe"}}):"close"===e&&-1===n&&ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUB_OR_UNSUB_ORDERBOOK,payload:{symbolNames:[t],action:"unsubscribe"}})}},usePMStore:P,useUserInfoStore:D,futureExtends:$,allSymbolConfig:w,totalSymbolConfig:x,shareOptions:(()=>{const e=sessionStorage.getItem("BY_OPTION_UNIFRAME_SESSION"),t={};if(R&&e)try{t.originUserInfo=d(c({},JSON.parse(e)||{}),{username:"",avatar:""})}catch(n){}return d(c({},t),{clickShareCallBack:e=>{const{symbolConfig:t}=e;lt.track("DerivativesPagePositionClick",{page_name:"OptionTabTradePage",button_name:"PnlShare",symbol:null==t?void 0:t.symbol})}})})(),allSymbolQuoteData:B,skynet:On,makerRate:null==u?void 0:u.makerRate,currencyCode:O||"USD",marginMode:m,isRTL:G,globalConfig:{mmWarnLine:q},supportMMRClose:!En&&1===(null==u?void 0:u.mmRateCloseSwitch)||2===(null==u?void 0:u.mmRateCloseSwitch),handleReverse:a,allTakerRate:k}),L===qr?ut.jsx(cr,{}):(null==L?void 0:L.length)?null:ut.jsx(er,{})]})}),S&&y&&ut.jsx(br,{ws3Path:b,updatePositionTpSlList:({data:e})=>{var t,n,a;const o=(null!=(t=null==e?void 0:e.result)?t:[]).map((e=>J(e.symbol)||Z(e.symbol)?gr(e):Rr(e))),i=[Wr.PARTIAL_STOPLOSS,Wr.PARTIAL_TAKEPROFIT,Wr.STOPLOSS,Wr.TAKEPROFIT],r=o.filter((e=>"Activity"!==e.type&&i.indexOf(e.stopOrderType)>-1));if(r.length>0){const e=function(e=[],t={}){const{data:{Buy:n,Sell:a},loaded:o}=t;if(!o)return;const i={};return i.data=c({},t.data),i.data.Buy=[...t.data.Buy||[]],i.data.Sell=[...t.data.Sell||[]],e.length>0&&e.forEach((e=>{if(e.stopOrderType){const t=e.side===Lr?i.data.Buy:i.data.Sell,n=t.findIndex((t=>t.orderId===e.orderId));e.isWorking?-1!==n?i.data[e.side][n]=c(c({},t[n]),e):i.data[e.side]=[e].concat(t):-1!==n&&i.data[e.side].splice(n,1)}})),i.data}(r,E.current);e&&(E.current={data:e,symbol:(null==(n=e.Buy[0])?void 0:n.symbol)||(null==(a=e.Sell[0])?void 0:a.symbol),loaded:!0})}},replaceOrderNotify:e=>{},orderNotify:e=>_?Ur({list:e}):()=>{},positionNotify:e=>_?function(e){const t=(null==e?void 0:e.list)||[],n=t.length;if(n>0)for(let a=0;a<n;a+=1){let e="",n="";const{type:o,symbol:i,side:r,qty:s,size:l,oldLimit:c,newLimit:d,subQty:u,execPrice:m,price:_,margin:p}=xr(t[a]),E="Buy"===r?Tt.t("common:pozLong"):Tt.t("common:pozShort"),y=i;if("liq"===o)e=Tt.t("common:liqNoticeTit"),n=Tt.t("common:liqNoticeDesc",{symbol:y,side:E,size:mn(l)});else if("sub_qty"===o)e=Tt.t("common:subLiqNoticeTit"),n=Tt.t("common:subLiqNoticeDesc",{price:m,symbol:y,side:E,subQty:mn(u)});else if("down_risk_id"===o){const t="Buy"===r?Tt.t("common:pozLong"):Tt.t("common:pozShort");e=Tt.t("common:downRiskNoticeTit"),n=Tt.t("common:downRiskNoticeDesc",{symbol:y,oldLimit:c,newLimit:d,side:t})}else"add_margin"===o?(e=Tt.t("common:addMarginSucNoticeTit"),n=Tt.t("common:addMarginSucNoticeDesc",{symbol:y,side:E,margin:p})):"adl"===o&&(e=Tt.t("common:adlNoticeTit"),n=Tt.t("common:adlNoticeDesc",{price:_,symbol:y,side:E,qty:mn(null!=l?l:s)}));n&&K.info(e,n)}}({list:e}):()=>{}},y)]})},Kr=window.React.useRef,Qr=window.React.useState,zr=e=>ja.subHeader.isPM?ut.jsx(Io,{line:!1,value:Gi(e,4,Y.ROUND_DOWN),tipValue:Tt.t("table.position.ExplainPMEmpty")}):Gi(e,4,Y.ROUND_DOWN);pr({columns:[{titleKey:"Instrument",dataIndex:"symbol",style:{flex:"0 0 78px !important",minWidth:78},render:Er},{titleKey:"SizeBTC",dataIndex:"size",align:"right",style:{textAlign:"right",flex:"0 0 86px"},render(e){const t=Gi(e,2,Y.ROUND_DOWN);return ut.jsx("p",{className:tn(t),children:t})}},{titleKey:{key:"PositionAvgPrice"},dataIndex:"entryPrice",align:"right",style:{textAlign:"right",minWidth:110},render(e,t){const n=an({record:t,allCommonConfig:ja.quote.allCommonConfig,defaultPrecision:2});return Gi(e,n)}},{titleKey:{key:"Mark Price"},dataIndex:"markPrice",align:"right",style:{textAlign:"right",minWidth:100},render(e,t){const n=Gi(e,2),a=t.iv?Vi(t.iv,1):"";return ut.jsxs("div",{children:[ut.jsx("p",{children:n}),a?ut.jsx("p",{className:"sub-text",children:a}):null]})}},{titleKey:{key:"UnrealizedP&L",suffix:"(ROI)"},dataIndex:"positionUPL",align:"right",style:{textAlign:"right",minWidth:120},render(e,t){const n=t.ROI?`(${Vi(t.ROI,2)})`:"",a=Gi(e,4,Y.HALF_DOWN);return ut.jsxs("div",{className:`${tn(a)} tar`,children:[ut.jsx("p",{children:a}),n?ut.jsx("p",{children:n}):null]})}},{titleKey:{key:"RealizedP&L"},dataIndex:"positionRPL",align:"right",style:{textAlign:"right",minWidth:120},render(e){const t=Gi(e,4,Y.HALF_DOWN);return ut.jsx("p",{className:tn(t),children:t})}},{titleKey:{key:"IM"},dataIndex:"positionIM",align:"right",render:e=>zr(e)},{titleKey:{key:"MM"},dataIndex:"positionMM",align:"right",style:{paddingRight:"22px",flex:"0 0 100px"},render:e=>zr(e)},{titleKey:"Action",fixed:"right",key:"action",style:{},render:(e,t)=>ut.jsx(Xr,{rowData:t})}],queryByHttp:bi,ignoreInactive:!0,whenInitWithData:e=>{var t;dt("assets",(t=null==e?void 0:e.length,{type:Nn.POSITIONS_INIT,payload:t}))},actionCreater:Oa,subscribeToWorker:e=>(_a.subscribe({commandType:Wn.NORMAL,topic:Pi,payload:{},callback:t=>{const n=t.data;e.current.setData(n)}}),()=>{_a.cleanSubscribeTopicCallback(Pi)}),rowKey:"symbol"});const Xr=({rowData:e})=>{var t;const{t:n}=Et(),a=Kr(),[o,i]=Qr(!1);return ut.jsxs("div",{className:tr.action,children:[ut.jsx(ee,{type:"online",className:"secondary_btn",onClick:()=>{a.current=e,i(!0)},children:n("action.liquidate")}),o?ut.jsx(_i,{openState:o,setOpenState:i,rowData:null!=(t=a.current)?t:e}):null]})};function Jr({value:e,fixedNum:t}){return e?(new Y).toLocaleString(`${e}`,t):"--"}const Zr=e=>{if(!e)return"-";const t=`${e}`.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return`${e}`.replace(t,"$1,")},es=window.React.useMemo;function ts(e,t){const{baseCoin:n,symbolName:a}=e,o=n||a.split("-")[0],{formInfoData:i,commonConfig:r,positions:s}=yt((({order:e,quote:t,assets:n})=>({formInfoData:e.formInfoData,commonConfig:t.allCommonConfig[o]||{},positions:n.positions}))),l=es((()=>{var e;return(null==(e=null==i?void 0:i[a])?void 0:e.requiredMargin)||"0.0000"}),[i,a]),c=Number(r.fePriceFractionPrecision)||1,d=es((()=>{const n=ge({commonConfig:r,formData:e,iInstrument:t,indexPrice:(null==t?void 0:t.indexPrice)||0,precision:c});return Zr(n)}),[r,t,e]),u=es((()=>((e,t)=>{for(let n=0;n<e.length;n++){const a=e[n],{symbol:o}=a;if(o===t){const{positionSize:e}=a,t=f(e);if(t>0)return{posStr:`+${t.toFixed(2)}`,posClass:"opt-green"};if(t<0)return{posStr:`${t.toFixed(2)}`,posClass:"opt-red"}}}return{posStr:"0.00",posClass:"black-color"}})(s,a)),[s,a]);return{requiredMargin:l,instrumentDetail:t,minOrMaxPrice:d,pos:u,commonConfig:r}}const ns=Number.NEGATIVE_INFINITY;function as(e,t,n,a){const{baseCoin:o,symbolName:i}=t,r=o||i.split("-")[0],{allCommonConfig:s}=ja.quote;return He(e,t,n,a,s[r])}window.React.useMemo;const os=window.React.useMemo;function is(){const e=yt((({subHeader:e})=>e.marginStyle));return os((()=>e),[e])}const rs=window.React.useCallback;const ss=window.React.useMemo;function ls(){const e=yt((({quote:e})=>e.selectedSymbols));return ss((()=>e),[e])}const cs=window.React.useRef;function ds(){const e=cs(function(e,t,n=!1){let a,o;const i=function(...i){return new Promise((r=>{if(a&&clearTimeout(a),n){const n=!a;a=setTimeout((()=>{a=null}),t),n&&(o=e.apply(this,i))}else a=setTimeout((()=>{o=e.apply(this,i),r(o)}),t)}))};return i.cancel=()=>{clearTimeout(a),a=null},i}(as,1e3)),t=cs(Ge);return{inputPriceEl:cs(null),inputQtyEl:cs(null),cbPrice:(t,n,a,o)=>{n.placeType!==vt.iv&&e.current(t,n,a,o)},cbQty:(e,n,a)=>{t.current(e,n,a)}}}const us=window.React.useMemo;function ms(e,t){const n=yt((({order:e})=>e.iInstrument));return us((()=>t||(null==n?void 0:n[e])||{}),[n,e,t])}const{ByTabPane:_s}=te,ps=e=>{const{type:t="normal",formData:n,valueChangeCallBack:a,instrumentDetail:o}=e,{t:i}=Et(),{baseCoin:r,symbolName:s,orderPrice:l,IV:u,orderQty:m,orderFilledQty:_=0,placeType:p,optionType:E}=n,y=r||s.split("-")[0],T=ms(s,o),{minOrMaxPrice:I,pos:h,commonConfig:S}=ts(n,T),{inputPriceEl:O,inputQtyEl:b,cbPrice:R,cbQty:g}=ds(),N=function(e,t,n,a){return rs((o=>{if(e.placeType!==Le.iv)return;if(o<=0||f(t.indexPrice)<=0||f(null==t?void 0:t.underlyingPrice)<=0)return void(null==a||a(d(c({},e),{IV:o})));const i=n.tickSize,{price:r}=Fe({IV:o,iInstrument:t,formData:e,type:"IV",commonConfig:n}),{formatUp:s}=W(r||0,i||0);null==a||a(d(c({},e),{orderPrice:s||r||0,IV:o}))}),[t,e,a,n])}(n,T,S,a),C=function(e,t,n,a=ns){const{baseCoin:o,symbolName:i}=e,r=o||i.split("-")[0];let s=yt((({quote:e})=>e.allCommonConfig))[r];return a!==ns&&(s=d(c({},s),{maxOrderSize:a})),je(e,t,n,a,s)}(n,T,a);return ut.jsxs("div",{className:"bybit-advance-form",children:[ut.jsxs(te,{activeKey:p||"",type:"card",destroyInactiveTabPane:!0,disabled:"modal"===t,onChange:e=>{e!==p&&(null==a||a(c(c(d(c({},n),{placeType:e}),e===Le.market&&{timeInForce:"3",postOnly:!1}),p===Le.market&&{timeInForce:"1"})),lt.track("advancedMode",{advancedMode:e}))},children:[ut.jsx(_s,{tab:i("Limit")},Le.usd),ut.jsx(_s,{tab:i("IV")},Le.iv),ut.jsx(_s,{tab:i("Market")},Le.market)]}),ut.jsxs("div",{className:"input-content",children:[p===Le.market?null:ut.jsxs(ut.Fragment,{children:[ut.jsxs("div",{className:"input-wrap",children:[ut.jsx(Ve,{ref:O,clickType:"orderprice",labelString:"advanced",leftTitle:i("Price"),precision:S.tickSizeScale,rightLabel:ut.jsx(qe,{type:"orderPrice",calculationOperation:C,showUnit:!0,disable:"usd"!==p,unit:"USDC"}),disable:"usd"!==p,value:l,onChangeValue:e=>{R(e,n,T,a)}}),ut.jsx("div",{className:"warn-content",children:`${i("buy"===E?"Max":"Min")} ${I}`})]}),ut.jsx(Ve,{clickType:"advanced_iv",labelString:"advanced",precision:1,min:0,leftTitle:i("IV"),value:u,rightLabel:ut.jsx("span",{className:"percentage-title",children:"%"}),disable:"usd"===p,onChangeValue:N,onBlurClick:()=>{u&&u>99999&&N(99999)}})]}),ut.jsxs("div",{className:"input-wrap",children:[ut.jsx(Ve,{ref:b,leftTitle:i("Qty"),clickType:"orderqty",labelString:"advanced",precision:S.minOrderSizeIncrementScale,value:m,rightLabel:ut.jsx(qe,{type:"orderQty",calculationOperation:C,showUnit:!0,unit:y}),onChangeValue:e=>{g(e,n,a)}}),ut.jsxs("div",{className:"warn-content",children:[i("Pos")," ",ut.jsx("span",{className:`${h.posClass}`,children:h.posStr})]})]})]}),ut.jsx(We,{filledQty:_})]})},Es="option/usdc/private/trading",ys=`/${Es}/cancel`,Ts=`/${Es}/edit`,Is=`/${Es}/cancel-all`,hs=e=>(e.outRequestId=`${e.orderId}_${100*Math.random()}`,Uo.post(ys,e)),Ss=e=>{e.outRequestId="cancalAll_"+100*Math.random(),Uo.post(Is,e)},Os=window.React.useState,bs=window.React.useEffect,Rs=window.React.useRef,gs=e=>{var t,n;const{visible:a,eventKey:o,orderData:i,failedOrders:r,onConfirm:s,onClose:l}=e,{t:c}=Et(),[d,u]=Os(60),m=Rs(null);bs((()=>(m.current=setInterval((()=>{u(d-1)}),1e3),0===d&&(_(),zo.emit(o,{visible:!1})),()=>{_()})),[d]);const _=()=>{m.current&&clearInterval(m.current)},p=()=>{_(),l()};return ut.jsxs(M,{className:"show-darkModal",innerClass:"trial-confirm-modal",head:c("msg.hint"),open:a,size:"small",showConfirm:!0,confirmText:`${c("msg.confirm")}(${d}s)`,cancelText:c("msg.cancel"),onClose:p,onCancel:p,onConfirm:()=>{_(),s(i)},draggable:!1,children:[(null==(t=r[Yt])?void 0:t.length)?ut.jsx("div",{className:"content-hint",children:c(String(Yt),{SymbolNames:r[Yt].join("、")})}):null,(null==(n=r[$t])?void 0:n.length)?ut.jsx("div",{className:"content-hint",children:c(String($t),{SymbolNames:r[$t].join("、")})}):null]})};var Ns={"cancel-hint":"_cancel-hint_2oz0p_1","order-abnormal-modal":"_order-abnormal-modal_2oz0p_21"};const Cs=window.React,vs=window.React.useState,As=window.React.useEffect,fs=window.React.useRef,Ls=window.React.useImperativeHandle,{EDIT_TRIAL_DIALOG_VISIBLE:Ps,USDC_OPEN_ORDER_EDIT:Ds}=$n,ws=new Y,Ms=Cs.forwardRef((({rowData:e},t)=>{var n;const{symbol:a,price:o,qty:i,cumExecQty:r,iv:s,placeType:l,side:c,timeInForce:d,orderIM:u,strikePrice:m,deliveryTime:_,symbolType:p,baseCoin:E}=e,[y,T]=vs({}),{allCommonConfig:I,commonConfig:h}=ja.quote,{tickSizeScale:S}=I[e.baseCoin]||h,O={symbolName:a,orderPrice:ws.toNumber(o,S),orderQty:f(i),orderFilledQty:f(r),IV:ws.toNumber(100*f(s),1),placeType:vt[l],optionType:c.toLocaleLowerCase(),timeInForce:ft[d],IM:u,strikePrice:m,deliveryTime:Number(_),markPrice:null!=(n=y.markPrice)?n:"0",symbolType:p,active:!1,baseCoin:E},[b,R]=vs(O);return Ls(t,(()=>({formData:b,instrument:y})),[b,y]),As((()=>{let e=!0;Ia.subscribeOrUnSubscribeSymbolInfoByName([a],"subscribe");const t=Ia.subscribeSymbolInstrument((t=>{e&&t[a]&&T(t[a])}));return()=>{e=!1,Ia.subscribeOrUnSubscribeSymbolInfoByName([a],"unsubscribe"),t()}}),[a]),ut.jsx(ps,{formData:b,type:"modal",instrumentDetail:y,valueChangeCallBack:R})}));Ms.displayName="DataForTrade";const xs=({qty:e})=>{const{t:t}=Et();return ut.jsxs("p",{className:"abnormal-hint",children:[ut.jsx("i",{className:"opt-design-iconfont icon--warn",children:"  "}),t("hint.orderEditAlert.1",{Size:e})]})};var Us=Cs.memo((({openState:e,setOpenState:t,rowData:n})=>{const{t:a}=Et(),[o,i]=vs(!1),r=fs({formData:{},instrument:{}}),[s,l]=vs(!1),[u,m]=vs(null),[_,p]=vs({}),{allCommonConfig:E,commonConfig:y}=ja.quote,{tickSizeScale:T}=E[n.baseCoin]||y,I={orderPrice:ws.toNumber(n.price,T),orderQty:f(n.qty),IV:ws.toNumber(100*f(n.iv),1),placeType:vt[n.placeType]};As((()=>(zo.on(Ps,h),()=>{zo.off(Ps,h)})),[]);const h=e=>{const{visible:t,formData:n=null,failedOrders:a}=e;t&&(m(a[Yt].length?n:null),p(a)),l(t)};function S(e){const t=r.current.formData,a=n.placeType===Le.iv,o=r.current.instrument;function s(){const{symbolName:e,orderQty:i,orderPrice:r,IV:s}=t;if(a){if(f(i)===f(I.orderQty)&&f(s)===f(I.IV))return void b()}else if(f(i)===f(I.orderQty)&&f(r)===f(I.orderPrice))return void b();ei({[e]:t},{[e]:o},Ie.Advanced).type!==Zo.ERROR&&O({symbol:e,orderQty:String(i),orderPrice:String(r),orderId:n.orderId,iv:ne.div(s||0,100).toFixed(3),pmTrial:!0})}!0!==e&&Number(t.orderQty)<=Number(n.cumExecQty)?i(!0):s()}const O=async e=>{try{const n=await(t=e,t.outRequestId="edit_"+100*Math.random(),Uo.post(Ts,t));zo.emit(Ds,e);const a=d(c({},n),{errorCode:n.retCode||0,symbol:n.retExtMap.margin_symbolName}),[o,i]=Ye({result:[a]});return ai({formData:e,warningFailedOrders:o,exceedFailedOrders:i,eventKey:Ps}),[Yt,$t].includes(a.errorCode)||b(),a}catch{b()}var t},b=()=>{i(!1),t(!1)};return ut.jsxs(M,{className:"show-darkModal",head:a("order.edit"),confirmText:a("msg.confirm"),cancelText:a("msg.cancel"),open:e,showConfirm:!0,onClose:()=>t(!1),onCancel:()=>t(!1),onConfirm:()=>S(),size:"small",lockScroll:!0,draggable:!1,children:[ut.jsx(Ms,{rowData:n,ref:r},n.orderId+"tradeData"),ut.jsx(M,{open:o,showConfirm:!0,confirmText:a("msg.confirm"),cancelText:a("msg.cancel"),className:`show-darkModal confirm-modal ${Ns["order-abnormal-modal"]}`,onClose:()=>i(!1),onCancel:()=>i(!1),onConfirm:()=>S(!0),innerWidth:340,lockScroll:!0,draggable:!1,children:o?ut.jsx(xs,{qty:r.current.formData.orderQty},n.orderId):null},n.orderId),s?ut.jsx(gs,{visible:s,eventKey:Ps,orderData:u,failedOrders:_,onConfirm:e=>{(e=e)?(e.pmTrial=!1,O(e)):b(),l(!1)},onClose:()=>l(!1)}):null]},n.orderId)}),((e,t)=>e.rowData===t.rowData));const Bs=window.React,ks=window.React.useState,js=window.React.useRef,Hs=window.React.useImperativeHandle,Fs=Bs.forwardRef(((e,t)=>{const[n,a]=ks(!1),{t:o}=Et();return Hs(t,(()=>n),[n]),ut.jsxs("div",{className:Ns["cancel-hint"],children:[ut.jsx("p",{children:o("hint.orderCancelConfirm")}),ut.jsx(Q,{type:"normal",color:"brand",checked:n,className:"cancel-hint-text",onChange:e=>{a(e)},children:o("hint.orderCancelConfirm.sub")})]})}));Fs.displayName="Cancel";var Gs=Bs.memo((({openState:e,setOpenState:t,rowData:n})=>{const{t:a}=Et(),o=js(!1);return ut.jsx(M,{className:"show-darkModal",size:"small",innerClass:Ns["cancel-modal"],head:a("msg.hint"),open:e,showConfirm:!0,draggable:!1,confirmText:a("msg.confirm"),cancelText:a("msg.cancel"),onClose:()=>t(!1),onCancel:()=>t(!1),onConfirm:()=>{const e=o.current;e&&$e("OPTION_CANCELORDER_DOUBLE_CONFIRM",!e),hs({orderId:n.orderId,symbol:n.symbol}).then((()=>zo.emit($n.USDC_OPEN_ORDER_CANCEL,{orderId:n.orderId}))),t(!1)},children:ut.jsx(Fs,{ref:o})},n.orderId)}),((e,t)=>e.rowData===t.rowData));const Vs=e=>{const[t,n]=e.split(" ");return ut.jsxs(ut.Fragment,{children:[t,ut.jsx("br",{}),n]})},qs=window.React.useState,Ws=window.React.useRef,Ys=[{titleKey:"Instrument",dataIndex:"symbol",style:{flex:"0 0 78px",minWidth:78},render:Er},{titleKey:"Side",dataIndex:"side",align:"right",style:{flex:"0 0 48px"},render:e=>ut.jsx("span",{className:tn(e),children:e})},{titleKey:"Order Price",dataIndex:"price",align:"right",style:{textAlign:"right"},render(e,t){const{iv:n}=t,a=an({record:t,allCommonConfig:ja.quote.allCommonConfig}),o=Gi(e,a),i=n?Vi(n,1):"--";return ut.jsxs("div",{children:[ut.jsx("p",{children:o}),ut.jsx("p",{className:"sub-text",children:i})]})}},{titleKey:"SizeBTC",dataIndex:"qty",align:"right",render:e=>Gi(e,2)},{titleKey:"FilledBTC",dataIndex:"cumExecQty",align:"right",render:e=>Gi(e,2)},{titleKey:"RemainingBTC",dataIndex:"leavesQty",align:"right",style:{minWidth:"100px"},render:e=>Gi(e,2)},{titleKey:"InitialMargin",dataIndex:"orderIM",align:"right",style:{minWidth:"144px"},render:e=>void 0===e?"--":Gi(e,4)},{titleKey:"OrderID",dataIndex:"orderId",align:"right",render:e=>qi(e)},{titleKey:"OrderType",dataIndex:"orderType",align:"right",style:{}},{titleKey:"OrderTime",dataIndex:"orderTime",align:"right",style:{maxWidth:"98px",textAlign:"right"},render:e=>Vs(Fi(e))},{titleKey:"TimeInForce",dataIndex:"timeInForce",align:"right",render(e="--"){var t;return null!=(t=At[e])?t:e}},{titleKey:"Post-Only",dataIndex:"postOnly",align:"right",render:(e,t)=>"PostOnly"===t.timeInForce?"True":"False"},{titleKey:"Reduce-Only",dataIndex:"reduceOnly",align:"right",render:e=>1===Number(e)?"True":"False"},{titleKey:"Action",fixed:"right",key:"action",render:(e,t)=>ut.jsx(Ks,{rowData:t})}],$s=pr({columns:Ys,queryByHttp:async e=>{const{url:t,newParams:n}=gi(e,"openOrders",!1);return await Oi(t,n)},httpCallBack:e=>{_a.setInitOpenOrder(e),_a.initOpenOrderWs()},ignoreInactive:!0,whenInitWithData:e=>{var t,n;dt("assets",(n=null!=(t=null==e?void 0:e.length)?t:-1,{type:Nn.ORDERS_INIT,payload:n})),dt("assets",Ra(e))},actionCreater:Ra,subscribeToWorker:e=>(_a.subscribe({commandType:Wn.NORMAL,topic:Li,payload:{},callback:t=>{const n=t.data;e.current.setData(n)}}),()=>{_a.cleanSubscribeTopicCallback(Li)}),rowKey:"orderId"}),Ks=({rowData:e})=>{var t,n;const{t:a}=Et(),o=Ws(),[i,r]=qs(!1),[s,l]=qs(!1);return ut.jsxs(ut.Fragment,{children:[ut.jsx(ee,{type:"contained",color:"primary",className:"secondary_btn mr8",onClick:()=>{lt.track("orderEdit",{is_more:ja.common.isMore}),o.current=e,r(!0)},children:a("action.edit")}),ut.jsx(ee,{type:"contained",color:"primary",className:"secondary_btn",onClick:()=>{lt.track("orderCancel",{is_more:ja.common.isMore}),Ke("OPTION_CANCELORDER_DOUBLE_CONFIRM")?l(!0):hs({orderId:e.orderId,symbol:e.symbol}).then((()=>zo.emit($n.USDC_OPEN_ORDER_CANCEL,{orderId:e.orderId})))},children:a("action.cancel")}),i?ut.jsx(Us,{openState:i,setOpenState:r,rowData:null!=(t=o.current)?t:e}):null,s?ut.jsx(Gs,{openState:s,setOpenState:l,rowData:null!=(n=o.current)?n:e}):null]})};var Qs="_record-modal_5e7fe_1",zs="_tab-mih_5e7fe_1";var Xs="_loading_1a97i_1";const Js=()=>ut.jsx(ee,{className:Xs,type:"contained",color:"primary",loading:!0,size:"xxx-large"});const Zs=window.React.useEffect,el=window.React.useState,tl=e=>{const{t:t}=Et(),{isStart:n,isEnd:a,onClick:o}=e,[i,r]=el(!1),[s,l]=el(!1);Zs((()=>{r(n)}),[n]),Zs((()=>{l(a)}),[a]);const c=e=>{null==o||o(e)};return ut.jsxs("div",{className:"simple-pagination",children:[ut.jsx(ee,{type:"online",className:"secondary_btn mr8",disabled:i,onClick:()=>c("prev"),children:t("pagePrevious")}),ut.jsx(ee,{type:"online",className:"secondary_btn",disabled:s,onClick:()=>c("next"),children:t("pageNext")})]})},nl=window.React.useEffect,al=window.React.useState,ol=[{titleKey:"Instrument",dataIndex:"symbol",align:"left",render:Er},{titleKey:"TradeTime",dataIndex:"tradeTime",align:"left",style:{flex:"0 0 86px",worldBreak:"break-all"},render:e=>Vs(Fi(e))},{titleKey:"Side",dataIndex:"side",align:"right"},{titleKey:"TradePrice",dataIndex:"execPrice",align:"right",style:{textAlign:"right"},render(e,t){const n=an({record:t,allCommonConfig:ja.quote.allCommonConfig}),a=t.iv?Vi(t.iv,1):"--";return ut.jsxs("div",{children:[ut.jsx("p",{children:Gi(e,n)}),ut.jsx("p",{className:"sub-text",children:a})]})}},{titleKey:"SizeBTC",dataIndex:"execQty",align:"right",render:e=>Gi(e,2)},{titleKey:"Fees",dataIndex:"execFee",align:"right",render:e=>Gi(e,8,Y.HALF_UP)},{titleKey:"TradeID",dataIndex:"tradeId",align:"right",render:e=>qi(e)}],il=({tradeRecordId:e})=>{const{t:t}=Et(),{isUMAccount:n}=yt((({common:e})=>e.user))||{},[a,o]=al(""),[i,r]=al(0),[s,l]=al(!1);ol.forEach((e=>{e.title=t(`table.${e.titleKey}`)}));const[u,m]=al({total:1,size:10,current:1}),[_,p]=al([]),[E,y]=al(!0),T=async(t=(n?"next":u.current))=>{y(!0);const s=n?{category:"option",cursor:a,pageIndex:i,limit:10,direction:t}:{pageSource:1,pageIndex:t,pageSize:10},_=await(async e=>{const{url:t,newParams:n}=gi(e,"tradeDetails");return await Oi(t,n)})(d(c({},s),{orderId:e,isUMAccount:n}));y(!1);const{cursor:E,pageIndex:T,resultPageIndex:I,resultTotalSize:h,result:S}=_;if(n){if(E&&(l(!S.length),!S.length))return;o(E),r(T)}else m({size:10,current:Number(null!=I?I:1),total:Number(null!=h?h:1)});p(S)};return nl((()=>{T()}),[]),ut.jsx("div",{children:E?ut.jsx(Js,{}):ut.jsxs(ut.Fragment,{children:[ut.jsx("div",{className:`${zs}`,children:ut.jsx("div",{className:`${tr.tableStyle} ${tr.tableSimple} ${tr.detailTab} scrollbar`,children:ut.jsx(Zi,{scrollX:!0,stickyHeader:!0,columns:ol,dataSource:_,rowKey:"id",renderEmpty:()=>ut.jsx(er,{height:124,iconSize:60})})})}),n?ut.jsx(tl,{isStart:i<=1,isEnd:s||_.length<10,onClick:e=>T(e)}):ut.jsx(ae,{showGoto:!0,showTotal:!0,rootStyle:{marginTop:"16px"},total:u.total,size:u.size,current:u.current,onPageChange:e=>{T(e)},jumpPageDesc:t("pagination.goto"),pageUnit:t("pagination.page"),totalDesc:e=>t("pagination.total",{size:e})})]})})},rl=({openState:e,setOpenState:t,tradeRecordId:n})=>{const{t:a}=Et();return ut.jsx(M,{className:"show-darkModal",innerClass:Qs,showConfirm:!1,showCancel:!1,showFoot:!1,draggable:!1,head:`${a("tab.TradeRecords")} (${a("table.OrderID")}: ${qi(n)})`,open:e,onClose:()=>t(!1),size:"large",lockScroll:!0,children:ut.jsx(il,{tradeRecordId:n})},n)};var sl="_container_1v8je_1",ll="_item_1v8je_16",cl="_active_1v8je_22";const dl=window.React.useMemo;var ul=(e=>(e[e.SEVEN=7]="SEVEN",e[e.THIRTY=30]="THIRTY",e[e.ONE_HUNDRED_AND_EIGHTY=180]="ONE_HUNDRED_AND_EIGHTY",e))(ul||{});const ml=e=>{const{value:t,onChange:n,className:a=""}=e,{t:o}=Et("common"),i=dl((()=>[{value:7,label:o("lastNd",{date:7})},{value:30,label:o("lastNd",{date:30})},{value:180,label:o("lastNd",{date:180})}]),[o]);return ut.jsx("div",{className:`${sl} ${a||""}`,children:i.map((e=>ut.jsx("div",{className:`${ll} ${t===e.value&&cl}`,onClick:()=>(e=>{n(e.value)})(e),children:e.label},e.value)))})};var _l="_container_pndfe_1",pl="_inner_pndfe_6",El="_line_pndfe_11",yl="_text_pndfe_20",Tl="_desc_pndfe_30",Il="_arrow_pndfe_38";const hl=e=>{const{onClickMore:t}=e,{t:n}=Et(),{t:a}=Et("common");return ut.jsx("div",{className:_l,children:ut.jsxs("div",{className:pl,children:[ut.jsxs("div",{className:yl,children:[a("displayNRecords",{n:100}),ut.jsxs("span",{onClick:t,className:Tl,children:[n("AllOrders")," ",ut.jsx("i",{"data-rtl":!0,className:`${Il} bit-design-iconfont bit-a-icon_directionright`})]})]}),ut.jsx("div",{className:El})]})})},Sl=window.React.useState,Ol=window.React.useMemo,bl=[{titleKey:"Instrument",dataIndex:"symbol",style:{flex:"0 0 78px !important",minWidth:78},render:Er},{titleKey:"Side",dataIndex:"side",align:"right",style:{flex:"0 0 86px"},render:e=>ut.jsx("span",{className:tn(e),children:e})},{titleKey:"Order Price",dataIndex:"price",align:"right",style:{textAlign:"right"},render(e,t){const{iv:n}=t,a=an({record:t,allCommonConfig:ja.quote.allCommonConfig}),o=Gi(e,a),i=n?Vi(n,1):"--";return ut.jsxs("div",{children:[ut.jsx("p",{children:o}),ut.jsx("p",{className:"sub-text",children:i})]})}},{titleKey:"SizeBTC",dataIndex:"qty",align:"right",render:e=>Gi(e,2)},{titleKey:"AvgPrice",dataIndex:"orderAvgPrice",align:"right",render(e,t){const n=an({record:t,allCommonConfig:ja.quote.allCommonConfig});return Gi(e,n)}},{titleKey:"FilledBTC",dataIndex:"cumExecQty",align:"right",render:e=>Gi(e,2)},{titleKey:"Status",dataIndex:"orderStatus",align:"right"},{titleKey:"Fees",dataIndex:"cumExecFee",align:"right",style:{minWidth:"100px"},render:e=>Gi(e,8,Y.HALF_UP)},{titleKey:{key:"orderPNL"},dataIndex:"orderPNL",align:"right",style:{minWidth:"100px"},render(e){const t=Gi(e,4);return ut.jsx("p",{className:tn(t),children:t})}},{titleKey:{key:"Cash Flow"},dataIndex:"cashFlow",align:"right",render(e){const t=Gi(e,4,Y.HALF_UP);return ut.jsx("p",{className:tn(t),children:t})}},{titleKey:"OrderType",dataIndex:"orderType",align:"right"},{titleKey:"TimeInForce",dataIndex:"timeInForce",align:"right",render(e="--"){var t;return null!=(t=At[e])?t:e}},{titleKey:"Post-Only",dataIndex:"postOnly",align:"right",render:(e,t)=>"PostOnly"===t.timeInForce?"True":"False"},{titleKey:"Reduce-Only",dataIndex:"reduceOnly",align:"right",render:e=>1===Number(e)?"True":"False"},{titleKey:"OrderID",dataIndex:"orderId",align:"right",render:e=>qi(e)},{titleKey:"OrderTime",dataIndex:"orderTime",align:"right",style:{maxWidth:"98px",textAlign:"right"},render:e=>Vs(Fi(e))},{titleKey:"Action",fixed:"right",key:"action",style:{},render:(e,t)=>ut.jsx(gl,{orderId:t.orderId})}],Rl=pr({columns:bl,queryByHttp:async(e,t="")=>{const{url:n,newParams:a}="morePage"===t?gi(e,"orderHistoryMore",!1):gi(e,"orderHistory");return await Oi(n,a)},subscribeToWorker:e=>(_a.subscribe({commandType:Wn.NORMAL,topic:wi,payload:{},callback:t=>{const n=t.data,a=e.current.data,o=n.result[0];void 0!==o&&(o.version=n.version,e.current.setData(Wi(n,a,"orderTime","orderId")))}}),()=>{_a.cleanSubscribeTopicCallback(wi)}),rowKey:"orderId",beforeSetDataByHttp:(e,t)=>Wi(t,e,"orderTime","orderId")}),gl=({orderId:e})=>{const{t:t}=Et(),[n,a]=Sl(!1);return ut.jsxs("div",{className:tr.action,children:[ut.jsx(ee,{type:"contained",color:"primary",className:"secondary_btn",onClick:()=>a(!0),children:t("action.detail")}),n?ut.jsx(rl,{openState:n,setOpenState:a,tradeRecordId:e}):null]})},Nl=e=>{const[t,n]=Sl(ul.SEVEN),{user:a}=yt((({common:e})=>e)),{isUMAccount:o}=a||{},i=o?hi.httpParams:Ii.httpParams,r=Ol((()=>d(c({},i),{startTime:ht().subtract(t,"day").startOf("day").valueOf(),endTime:ht().endOf("day").valueOf()})),[t,o]),s=()=>{lt.track("order-history-more");const e=o?"/user/assets/order/derivatives/option-order":"/user/assets/order/derivatives/usdc-options-more";window.open(`${e}?asset_tab=${So.OrderHistory}`)};return ut.jsxs(ut.Fragment,{children:[ut.jsx(ml,{value:t,onChange:e=>{n(e)}}),ut.jsx(Rl,d(c({},e),{customParams:r,footerRender:()=>ut.jsx(hl,{onClickMore:s})}))]})},Cl=window.React.useState,vl=window.React.useMemo,Al=[{titleKey:"Instrument",dataIndex:"symbol",render:Er},{titleKey:"Side",dataIndex:"side",align:"right",style:{flex:"0 0 86px"},render:e=>ut.jsx("span",{className:tn(e),children:e})},{titleKey:"TradePrice",dataIndex:"execPrice",style:{flex:"0 0 108px",minWidth:108,textAlign:"right"},align:"right",render(e,t){const n=an({record:t,allCommonConfig:ja.quote.allCommonConfig});return Gi(e,n)}},{titleKey:{key:"TradePositionAvgPrice"},dataIndex:"positionAvgPrice",style:{flex:"0 0 108px",minWidth:108,textAlign:"right"},align:"right",render(e,t){const n=an({record:t,allCommonConfig:ja.quote.allCommonConfig});return Gi(e,n)}},{titleKey:"SizeBTC",dataIndex:"execQty",align:"right",render:e=>Gi(e,2)},{titleKey:"IV",dataIndex:"iv",align:"right",render:e=>e?Vi(e,1):"--"},{titleKey:"Underlying",dataIndex:"underlying",align:"right",render(e,t){var n;const{baseCoin:a,symbol:o}=t,i=a||o.split("-")[0];return Gi(e,Number(null==(n=ja.quote.allCommonConfig[i])?void 0:n.feUnderlyingPricePrecision)||2)}},{titleKey:"IndexPrice",dataIndex:"indexPrice",align:"right",style:{textAlign:"right"},render(e,t){var n;const{baseCoin:a,symbol:o}=t,i=a||o.split("-")[0];return Gi(e,Number(null==(n=ja.quote.allCommonConfig[i])?void 0:n.feUnderlyingPricePrecision)||2)}},{titleKey:"MarkPrice",dataIndex:"markPrice",align:"right",render(e,t){var n;const{baseCoin:a,symbol:o}=t,i=a||o.split("-")[0];return Gi(e,Number(null==(n=ja.quote.allCommonConfig[i])?void 0:n.feMarkPricePrecision)||2)}},{titleKey:"Fees",dataIndex:"execFee",align:"right",render:e=>Gi(e,8,Y.HALF_UP)},{titleKey:"TradeID",dataIndex:"tradeId",align:"right",style:{textAlign:"right"},render:e=>qi(e)},{titleKey:"OrderID",dataIndex:"orderId",align:"right",render:e=>qi(e)},{titleKey:"TradeTime",dataIndex:"tradeTime",align:"right",style:{maxWidth:"98px",textAlign:"right",paddingRight:"22px"},render:e=>Vs(Fi(e))}],fl=pr({columns:Al,queryByHttp:async(e,t="")=>{const{url:n,newParams:a}="morePage"===t?gi(e,"tradeHistoryMore",!1):gi(e,"tradeHistory");e.isUMAccount&&(a.category="option");return await Oi(n,a)},subscribeToWorker:e=>(_a.subscribe({commandType:Wn.NORMAL,topic:Mi,payload:{},callback:t=>{const n=t.data,a=e.current.data,o=n.result[0];void 0!==o&&(o.version=n.version,e.current.setData(Wi(n,a,"tradeTime","transId")))}}),()=>{_a.cleanSubscribeTopicCallback(Mi)}),beforeSetDataByHttp:(e,t)=>Wi(t,e,"tradeTime","transId"),rowKey:"transId"}),Ll=e=>{const[t,n]=Cl(ul.SEVEN),{user:a}=yt((({common:e})=>e)),{isUMAccount:o}=a||{},i=o?hi.httpParams:Ii.httpParams,r=vl((()=>d(c({},i),{startTime:ht().subtract(t,"day").startOf("day").valueOf(),endTime:ht().endOf("day").valueOf()})),[t,o]),s=()=>{lt.track("trade-history-more");const e=o?"/user/assets/order/derivatives/option-order":"/user/assets/order/derivatives/usdc-options-more";window.open(`${e}?asset_tab=${So.TradeHistory}`)};return ut.jsxs(ut.Fragment,{children:[ut.jsx(ml,{value:t,onChange:e=>{n(e)}}),ut.jsx(fl,d(c({},e),{customParams:r,footerRender:()=>ut.jsx(hl,{onClickMore:s})}))]})};const Pl=window.React.useRef,Dl=window.React.useState,wl=window.React.useEffect,Ml=window.React.useMemo,{ByTabPane:xl}=te,Ul=(Bl="asset_tab",null!=(jl=new URL((null==(kl=null==window?void 0:window.location)?void 0:kl.href)||"").searchParams.get(Bl))?jl:"");var Bl,kl,jl;const Hl=({handleReverse:e})=>{const t=yt((({assets:e})=>e.positionSize)),n=yt((({assets:e})=>e.openOrderSize)),{baseCoin:a,user:o}=yt((({common:e})=>e)),{id:i,isUMAccount:r=!1,tradingPerformanceOptionGray:s}=o||{},{t:l}=Et(),{t:c}=Et("common"),[d,u]=Dl(Ul||So.Positions),[m,_]=Dl(!0),p=Pl(null),E=Pl(!1),[y,T]=Dl(0),[I,h]=Dl(0),[S,O]=Dl(!1),{isLoginReady:b}=yt((({common:e})=>e.user))||{},R=yt((({order:e})=>{var t;return null==(t=e.userSettings)?void 0:t.shouldNotify}));wl((()=>{E.current||Ul||u(t>0?So.Positions:-1!==t&&n>0?So.OpenOrders:So.Positions)}),[t,n]),wl((()=>{if(b&&R){const e=Hi();return()=>{e()}}}),[b,R]);const g=()=>{_(!m)},N=Ml((()=>b&&d===So.OpenOrders&&!!I),[b,d,I]),C=Ml((()=>({category:"option",cursor:"",pageIndex:0,direction:"next"})),[]);return ut.jsxs("div",{id:"assetsContainer",ref:p,children:[ut.jsxs(te,{className:tr["assets-tab"],activeKey:d,tabBarExtraContent:ut.jsxs(ut.Fragment,{children:[r&&s&&d!==So.OpenOrders&&ut.jsxs(ee,{color:"secondary",type:"contained",onClick:()=>{window.open("/user/assets/home/performance?tab=option","_blank")},className:`secondary_btn mr8 ${tr.assetBtn}`,children:[c("TradingPerformance")," "]}),N&&ut.jsx(ee,{color:"secondary",type:"contained",onClick:()=>{var e;!(null==(e=Ct("CANCEL_ALLORDER_DOUBLE_CONFIRM"))||e)?O(!0):Ss({baseCoin:a})},className:`secondary_btn mr8 ${tr.assetBtn}`,children:l("closeAll")}),r&&d===So.Positions?null:ut.jsx(ee,{color:"secondary",type:"contained",className:`more mr8 ${tr.assetBtn}`,onClick:()=>{lt.track("more");const e=r?"/user/assets/order/derivatives/option-order":"/trade/option/usdc/more",t=r?"":`&coin=${a}`;""===i?window.location.href="/login":window.open(`${e}?asset_tab=${d}${t}`)},children:l("tab.more")})]}),type:"line",onChange:e=>{E.current=!0,u(e),lt.track("function",{function:e,is_more:ja.common.isMore}),setTimeout((()=>_(!0)))},children:[ut.jsx(xl,{tab:`${c("Positions")}${" ("+y+")"}`,children:ut.jsx($r,{onSizeChange:e=>T(e),panelState:m,setPanelState:()=>g(),isActive:d===So.Positions,handleReverse:e})},So.Positions),ut.jsx(xl,{tab:`${l("currentOrders")} (${I})`,children:ut.jsx($s,{onSizeChange:e=>h(e),panelState:m,setPanelState:()=>g(),isActive:d===So.OpenOrders,customParams:C})},So.OpenOrders),ut.jsx(xl,{tab:c("Order History"),children:ut.jsx(Nl,{panelState:m,setPanelState:()=>g(),isActive:d===So.OrderHistory})},So.OrderHistory),ut.jsx(xl,{tab:l("tradeHistory"),children:ut.jsx(Ll,{panelState:m,setPanelState:()=>g(),isActive:d===So.TradeHistory})},So.TradeHistory)]}),ut.jsx(M,{className:"show-darkModal",open:S,head:l("msg.hint"),size:"small",showConfirm:!0,draggable:!1,confirmText:l("msg.confirm"),cancelText:l("msg.cancel"),onClose:()=>O(!1),onCancel:()=>O(!1),onConfirm:()=>{O(!1),Ss({baseCoin:a})},children:l("cancelOrderConfirm")})]})},Fl=async(e,t={},n=!0)=>Uo.post(e,t,n).then((e=>null!=e?e:{}),(e=>({}))),Gl=async e=>await Fl("/v3/private/user/member/preferences",e),Vl=async e=>await Fl("/v3/private/user/member/pref-setting",e),ql=e=>Uo.get("/option/usdc/webapi/public/v5/open-price",e),Wl=({color:e,ratio:t,height:n="8px",baseColor:a="var(--bds-gray-ele-line)",width:o="68px",overflow:i="hidden"})=>ut.jsx("div",{style:{backgroundColor:a,width:o,height:n,borderRadius:20,overflow:i},children:ut.jsx("div",{style:{backgroundColor:e,width:t+"%",height:"100%",borderRadius:20}})}),Yl=({im:e="0",mb:t="1",color:n="#24AE64",warn:a,text:o,className:i="",equity:r,isPm:s,marginModeIsUpdated:l,xmRate:c="",showTips:d=!1})=>{const{isUTAccount:u}=yt((({common:e})=>e.user))||{},m=Number(e),_=Number(t),p=Number(r);let E=100*(c?Number(c):m/(s?p:_));E=isNaN(E)?0:E,E=E<0?999.99:Math.min(999.99,E);const y=E;n=E<a?"#24AE64":"#E04040";return E=(new Y).toString(E,2),ut.jsxs("div",{className:`aic right-column by-subhead-im ${i}`,children:[ut.jsx("p",{className:"option-title-tip add-line",children:o}),ut.jsx("p",{children:(l?E:0)+"%"}),ut.jsxs("div",{className:"uta-mmr-tips-box",children:[ut.jsx(Wl,{ratio:y,color:n}),d&&u&&ut.jsx("div",{className:"mm-rate-tips"})]})]})},$l=window.React.useEffect,Kl=window.React.useState,Ql=({equity:e="",ab:t="",mb:n=""})=>{const{isPM:a,marginModeIsUpdated:o}=yt((({subHeader:e})=>e)),{isUMAccount:i,unified_account:r,isUTAccount:s}=yt((({common:e})=>e.user))||{},{t:l}=Et(),c=e=>1===r?"--":Gi(e,4);return ut.jsx("table",{children:ut.jsxs("tbody",{children:[ut.jsxs("tr",{children:[ut.jsx("td",{children:ut.jsx(H,{placement:"bottom",offset:"0, 14px",flipAble:!1,content:ut.jsx("p",{children:l(s?a?"sub.UTAMarginBalancePMDesc":"sub.UTAMarginBalanceDesc":i?a?"sub.UMEquityDescPM":"sub.UMMarginBalanceDesc":a?"sub.EquityDesc":"sub.MarginBalanceDesc")}),children:ut.jsx("div",{className:"aic right-column by-subhead-equity",children:ut.jsx("p",{className:"option-title-tip add-line",children:l(a&&!s?"sub.Equity":"sub.MarginBalance")})})})}),ut.jsx("td",{children:ut.jsx("span",{className:"subheader-table-space",children:c(o?a&&!s?e:n:"0")})})]}),ut.jsxs("tr",{children:[ut.jsx("td",{children:ut.jsx(H,{placement:"bottom",offset:"0, 0px",flipAble:!1,content:ut.jsx("p",{children:l(s?"sub.UTAAvailableBalanceDesc"+(a?"PM":"RM"):`sub.${i?"UM":""}AvailableBalanceDesc`)}),children:ut.jsx("div",{className:"aic right-column by-subhead-equity",children:ut.jsx("p",{className:"option-title-tip add-line",children:l("sub.AvailableBalance")})})})}),ut.jsx("td",{children:ut.jsx("span",{className:"subheader-table-space",children:c(t)})})]})]})})},zl=({im:e,mm:t,mb:n,equity:a})=>{const[o,i]=Kl({im:0,mm:0}),{isPM:r,marginModeIsUpdated:s,accountIMRate:l,accountMMRate:c}=yt((({subHeader:e})=>e));return $l((()=>{!async function(){const e=await(async()=>{var e;return await Fl((e="config/global","/option/usdc/public/optionmp/query/"+e),{},!1)})();i({im:100*f(e.imWarnLine),mm:100*f(e.mmWarnLine)}),dt("subHeader",Sa({imWarnLine:e.imWarnLine,mmWarnLine:e.mmWarnLine}))}()}),[]),ut.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[ut.jsx(H,{placement:"bottom",flipAble:!1,offset:"0, 14px",content:ut.jsx(Xl,{line1Text:"IM",line1Val:e,mb:n,equity:a,isPm:r}),children:ut.jsx(Yl,{im:e,mb:n,warn:o.im,text:"IM",isPm:r,marginModeIsUpdated:s,equity:a,xmRate:l})}),ut.jsx(H,{placement:"bottom",offset:"0, 0px",flipAble:!1,content:ut.jsx(Xl,{line1Text:"MM",line1Val:t,mb:n,equity:a,isPm:r}),children:ut.jsx(Yl,{im:t,mb:n,warn:o.mm,text:"MM",isPm:r,marginModeIsUpdated:s,equity:a,xmRate:c,showTips:!0})})]})},Xl=({line1Text:e,line1Val:t,isPm:n})=>{const{t:a}=Et(),{isUMAccount:o,isUTAccount:i}=yt((({common:e})=>e.user))||{},r=i?"UTA":o?"UM":"";return ut.jsxs("div",{className:"by-subhead-XMText",children:[ut.jsxs("p",{children:[e," (",a(`sub.${e}Full`),"): ",Gi(t,4)," ",o?"USD":"USDC"]}),ut.jsx("p",{children:a(`sub.${r}${e}Desc${n?"PM":""}`)}),!o&&ut.jsx("p",{children:a(`sub.${e}RatioDesc${n?"PM":""}`)})]})},Jl=window.React.useRef,Zl=window.React.useEffect,ec=({price:e="0",coin:t="BTC"})=>{var n;const a=yt((({quote:e})=>e.allCommonConfig)),o=Number(null==(n=a[t])?void 0:n.feUnderlyingPricePrecision)||2,i=Jl("0"),r=Number(e)-Number(i.current)>0,s="by-subhead-price "+(r?"long":"short");return Zl((()=>{i.current=e}),[e]),ut.jsxs("div",{className:s,children:[Gi(e,o),r?ut.jsx("span",{className:"opt-design-iconfont icon-a-priceup"}):ut.jsx("span",{className:"opt-design-iconfont icon-a-pricedown"})]})},tc=window.React.useRef,nc=window.React.useState,ac=window.React.useEffect,oc=Zt(gt.VITE_LOCAL_TOKEN)||"",ic=Zt(gt.VITE_BUILD_ENV),rc=({isLogin:e,unAvailable:t,isPmCb:n,marginModeCb:a,lang:o})=>{const i=nn(gt.VITE_API_DOMAIN),{isUMAccount:r,isUTAccount:s,isSubmember:l}=yt((({common:e})=>e.user))||{},[u,m]=nc({beForceClosed:!1,subscribePmWsRes:null}),[_,p]=nc(!1),[E,y]=nc(!1),T=e=>{y(e)},I=e=>{p(e)},h=tc({});h.current.setData=e=>{const{operationType:t,serviceStatus:n,serviceStep:o,serviceType:i,accountMode:r}=e;r&&"SUCCESS"===n&&a(r);m({beForceClosed:"AUTO"===t,subscribePmWsRes:{accountMode:r,serviceStatus:n,serviceStep:o,serviceType:i}})},ac((()=>{const e=(t=h.current.setData,_a.subscribe({commandType:Wn.NORMAL,topic:Ui,payload:{},callback:e=>{var n;t(null!=(n=null==e?void 0:e.data)?n:{})}}),()=>{_a.cleanSubscribeTopicCallback(Ui)});var t;return zo.on($n.SETTING_DRAWER_OPEN,T),zo.on($n.PM_SWITCH_MODAL_VISIBLE,I),()=>{null==e||e(),zo.off($n.SETTING_DRAWER_OPEN,T),zo.off($n.PM_SWITCH_MODAL_VISIBLE,I)}}),[]);return ut.jsx("div",{className:"by-subhead-pm",children:ut.jsx(Qe,d(c({entryVisible:!0,dialogVisible:_,onDialogClose:()=>p(!1),isLogin:e,unAvailable:t,isPmCb:n,marginModeCb:a,business:"option",lang:o,baseUrl:i,localToken:oc,env:ic},u),{reportCbs:lt.track,httpErrorCb:()=>{dt("common",fn({id:"",isLoginReady:!1}))},isUMAccount:r,hasMask:!E,isUTA:s,isSubAccount:l}))})},sc=window.React.useState,lc=window.React.useEffect,cc=e=>{setTimeout((()=>{window.BybitUniFrame?e():cc(e)}),500)},dc=new Promise((e=>{window.BybitUniFrame?e(!0):cc((()=>{e(!0)}))})),uc=window.React.useEffect,mc=window.React.useRef,_c=window.React.useState,{THEME_SWITCH:pc}=$n,Ec=e=>{const{t:t}=Et(),{upgradingCb:n,utaUnAvailable:a,upgradeFailedErrCodes:o}=e,{isLoginReady:i,isGrayUUAccount:r,unified_account:s,memberTagUTA:l}=yt((({common:e})=>e.user))||{},c=mc(!1),[d,u]=_c(!1),[m,_]=_c(!1),p=(()=>{const[e,t]=sc(!!window.BybitUniFrame);return lc((()=>{dc.then((()=>{t(!0)}))}),[]),e})();uc((()=>{i&&window.BybitUniFrame&&r&&(!l||l===bo.FAIL)&&u(!0)}),[i,window.BybitUniFrame,r,l,p]),uc((()=>{a&&(E("MODAL_VISIBLE",!0),E("UPGRADE_STATUS","2"))}),[a]),uc((()=>{o&&o.length>0&&(E("MODAL_VISIBLE",!1),E("UPGRADE_STATUS","3"),E("ERROR_CODES",o),E("MODAL_VISIBLE",!0))}),[o]),uc((()=>{const e=(e={})=>{_(!e.isShowUTAGuid)};return zo.on(pc,y),zo.on($n.UMA_UPGRADE_GUIDE_VISIBLE,e),()=>{zo.off(pc,y),zo.off($n.UMA_UPGRADE_GUIDE_VISIBLE,e)}}),[]);const E=(e,t)=>{var a;null==(a=window.BybitUniFrame)||a.ready((({upgradeUnifiedAccount:a})=>{if(a)if(c.current){const n=a.properties[e],{MODAL_VISIBLE:o}=a.properties;t&&n===o&&a.setProperty(o,!1),a.setProperty(n,t)}else(e=>{const{USER_TYPE:t,THEME:a,MODAL_VISIBLE:o,TRADE_TYPE:i,PAGE_NAME:r}=e.properties,{UPGRADING_CALLBACK:l,SUCCESS_CALLBACK:c,CLOSE:d}=e.events,m=2===s?"1":"0";e.init({containerId:"__bybit_uniframe_upgrade_unified_margin_account__"}).then((()=>{e.setProperty(t,m).setProperty(o,!1).setProperty(o,!0).setProperty(a,`theme-${rn()}`).setProperty(i,"usdc_options").setProperty(r,"TradingPage").subscribeEvent(l,(e=>{u(!1),null==n||n()})).subscribeEvent(c,(e=>{window.location.reload()})).subscribeEvent(d,(()=>{e.setProperty(o,!1)}))}))})(a),c.current=!0}))},y=e=>{c.current&&E("THEME",`theme-${e}`)};return ut.jsx(ut.Fragment,{children:i&&d?ut.jsxs("div",{className:"by-subhead-upgrade",children:[ut.jsxs(ee,{color:"brand",type:"outlined",contentClass:"flex aic",onClick:()=>{lt.track("OptUpgradingToUnifiedTradingClick",{button_type:"click"}),E("MODAL_VISIBLE",!0)},children:[ut.jsx("span",{className:"opt-design-iconfont icon-upgrade1"}),ut.jsx("span",{children:t("UMAccount.upgradeBtn")})]}),m&&ut.jsxs("div",{className:"by-subhead-upgrade-guide",children:[ut.jsx("p",{className:"fw fs14",children:t("UTAccount.title")}),ut.jsx("p",{children:t("UTAccount.guideHint")}),ut.jsx("p",{className:"tar",children:ut.jsx("span",{className:"by-subhead-upgrade-guide-btn fw",onClick:()=>{_(!1),Nt("BYBIT_OPTION_UTA_GUIDE",1)},children:t("Confirm")})})]})]}):null})},yc=e=>{var t;dt("common",(t=e,{type:vn.UPDATE_BASE_COIN,payload:t})),ze({trace_symbol:e})};const Tc=window.React.useEffect,Ic=window.React.useState,{THEME_SWITCH:hc}=$n,Sc=e=>{const{handleSymbolClick:t,suffix:n="",coinList:a}=e,o=yt((({quote:e})=>e.indexPrice)),i=yt((({common:e})=>e.baseCoin)),[r,s]=Ic(rn()),{t:l}=Et(),c=e=>{var t;dt("quote",(t=e.payload,{type:Cn.UPDATE_INDEX_PRICE_BY_COIN,payload:t}))};return Tc((()=>{if(null==a?void 0:a.length)return ca.initCoinList(a.concat()),ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_ALL_INDEX_PRICE,callback:c}),()=>{ca.cleanSubscribeTopicCallback(zn.SUBSCRIBE_ALL_INDEX_PRICE,c)}}),[a]),Tc((()=>{zo.on(hc,(e=>{s(e)}))}),[r]),ut.jsx("div",{className:"df",children:a.map((e=>{const s=Reflect.has(o,e);return ut.jsxs("div",{onClick:()=>t(e),className:"by-indexprice-wrap df "+(e===i&&a.length>1?"by-indexprice-coin-active":""),children:[ut.jsx("img",{className:"by-indexprice-coin-icon",src:on(e)[`${r}Icon`],alt:e}),ut.jsxs("div",{className:"by-indexprice-coin",children:[ut.jsxs("span",{children:[e,n]}),s?ut.jsx(ec,{price:o[e],coin:e}):ut.jsx("div",{className:"by-subhead-price",children:"--"})]}),ut.jsx(H,{placement:"bottom",offset:"0, 14px",flipAble:!1,content:ut.jsx("p",{children:l("sub.usdxDesc")}),children:ut.jsx("span",{className:"by-indexprice-coin-usdx opt-design-iconfont icon--usdc hover"})})]},e)}))})},Oc=window.React.useEffect,bc=window.React.useMemo,Rc=window.React.useRef,gc=window.React.useState,Nc=window.React.lazy,Cc=window.React.Suspense,{THEME_SWITCH:vc}=$n,Ac=Nc((()=>lo((()=>import("./SymbolDrawer.ea537b96.js")),["assets/SymbolDrawer.ea537b96.js","assets/byTrade.5a0c6a61.js","assets/byTrade.a01a7ce1.css","assets/byDeps.cf9e902d.js","assets/__commonjsHelpers__.814de68e.js","assets/byBase.02d5f47a.js","assets/byBase.3df9f9f2.css","assets/vendor.e5f221c3.js"]))),fc=({accountIM:e,accountMM:t,marginBalance:n,equity:a,availableBalance:o,isPmCb:i,marginModeCb:r,config:s={},coinList:l})=>{const{coinSuffix:u="-Options",symbolDrawer:m=!0}=s,{unified_account:E=0,isLoginReady:y,memberTagUTA:T,init_unified_account:I,isUMAccount:h,changeUTCTimeZone:S}=yt((({common:e})=>e.user))||{},O=yt((({common:e})=>e.baseCoin)),b=yt((({common:e})=>e.openPriceList)),[R,g]=gc(rn()),N=_(),C=p();Oc((()=>{zo.on(vc,(e=>{g(e)}))}),[R]);const[v,A]=gc({}),[f,L]=gc(!1),[P,D]=gc(!1),[w,U]=gc([]),{t:B}=Et(),k=Rc(null),[j,H]=gc(!1),[F,G]=gc(!1),V=Rc({}),{marginModeIsUpdated:q,marginMode:W}=yt((({subHeader:e})=>e)),Y=yt((({common:e})=>e.rtlStatus)),[$,K]=gc(!1),[Q,z]=gc(!1),[X,J]=gc(!1);Oc((()=>{V.current=b}),[b]),Oc((()=>{const e=(e=>{const t=t=>{var n;e(null!=(n=null==t?void 0:t.data)?n:{})};return _a.subscribe({commandType:Wn.NORMAL,topic:ki,payload:{},callback:t}),()=>{_a.cleanSubscribeTopicCallback(ki,t)}})((e=>{"0"===e.result?(0===I&&window.location.reload(),2===I&&L(!0)):(null==e?void 0:e.result)&&U(Array.isArray(null==e?void 0:e.result)?null==e?void 0:e.result:[null==e?void 0:e.result])}));return()=>{null==e||e()}}),[I]),Oc((()=>{D(1===E)}),[E]),Oc((()=>{const e=(t=e=>{try{const{frontGlobalConfig:t}=e,n=JSON.parse(t);A(c(c({},v),n))}catch(C_){}},ca.subscribe({commandType:Wn.NORMAL,topic:Jn.GET_COMMON_CONFIG,callback:e=>{var n;t(null!=(n=null==e?void 0:e.payload)?n:{})}}),()=>{ca.cleanSubscribeTopicCallback(Jn.GET_COMMON_CONFIG)});var t;return Nr({optionPreferBookSymbolTab:xa.OPTION}),()=>e()}),[]);const Z=bc((()=>{const e=x();return ut.jsx(rc,{isLogin:y,unAvailable:P,isPmCb:i,marginModeCb:r,lang:e,reportCbs:lt.track})}),[y,i,B,v,P]),ee=bc((()=>ut.jsx(Ec,{utaUnAvailable:f,upgradingCb:()=>{dt("common",fn({unified_account:1}))},upgradeFailedErrCodes:w})),[T,f,w]),te=()=>{k.current&&clearTimeout(k.current),k.current=null,H(!0)},ne=()=>{k.current=setTimeout(ae,300)},ae=(e=!1,t="")=>{"leave-show-dom"!==t?("enter-show-dom"===t&&k.current&&e&&clearTimeout(k.current),k.current=null,H(e)):ne()};Oc((()=>{const e=e=>{K(e)},t=e=>{z(e)};return zo.on($n.NEW_USER_BUBBLE_1_VISBLE,e),zo.on($n.NEW_USER_BUBBLE_2_VISBLE,t),()=>{zo.off($n.NEW_USER_BUBBLE_1_VISBLE,e),zo.off($n.NEW_USER_BUBBLE_2_VISBLE,t)}}),[]);const ie=bc((()=>({className:"uniform-asset__new-feat-pop-wrap uta-margin-mode-popup",showArrow:!0,byPopoverPlace:Y?"bottom-end":"bottom-start",byPopoverOpenCondition:$,newFeatTipTitle:B("nuBubble1Title"),newFeatTipContent:B("nuBubble1Content"),newFeatTipBottomText:B("nuBubble1Footer"),newFeatTipBtn:B("next"),offsetX:Y?267:0,byPopperOptions:{modifiers:{preventOverflow:{behavior:["top","bottom"],boundariesElement:"html"},offset:{offset:"-6, 18"}}},handleFeatTipBtnClick:()=>{zo.emit($n.NEW_USER_BUBBLE_1_VISBLE,!1),zo.emit($n.NEW_USER_BUBBLE_2_VISBLE,!0)},zIndexNum:98})),[B,$]),re=()=>{J(!0),zo.emit($n.NEW_USER_BUBBLE_2_VISBLE,!1)},se=bc((()=>({className:"uniform-asset__new-feat-pop-wrap uta-margin-mode-popup",showArrow:!0,byPopoverPlace:"bottom-start",byPopoverOpenCondition:Q,newFeatTipTitle:B("startTrade"),newFeatTipContent:ut.jsxs("div",{children:[ut.jsx("p",{children:B("nuBubble2Content")}),ut.jsx("div",{onClick:re,className:"otc-transfer",children:B("transferNow")})]}),newFeatTipBottomText:B("nuBubble2Footer"),newFeatTipBtn:B("iKnow"),offsetX:Y?90:100,byPopperOptions:{modifiers:{preventOverflow:{behavior:["top","bottom"],boundariesElement:"html"},offset:{offset:"-6, 18"}}},handleFeatTipBtnClick:()=>{zo.emit($n.NEW_USER_BUBBLE_2_VISBLE,!1)},zIndexNum:98})),[B,Q]);Oc((()=>{var e;Q&&(null==(e=null==window?void 0:window.BybitUniFrame)||e.ready((({transfer:e})=>{e.init().then((()=>{const{HIDE_MODAL:t,TRANSFER_COMPLETE:n}=e.events,{LOCK_ACCOUNTS:a,DEFAULT_TO:o,COIN:i}=e.properties;e.setProperty(i,"USDC"),e.subscribeEvent(t,(()=>{J(!1)})),e.subscribeEvent(n,(()=>{J(!1)})),h?e.setProperty(a,[Mt.ACCOUNT_TYPE_UNIFIED]).setProperty(o,Mt.ACCOUNT_TYPE_UNIFIED):e.setProperty(a,[Mt.ACCOUNT_TYPE_OPTION]).setProperty(o,Mt.ACCOUNT_TYPE_OPTION)}))})))}),[Q,h]),Oc((()=>{var e;y&&(null==(e=null==window?void 0:window.BybitUniFrame)||e.ready((({transfer:e})=>{e.init().then((()=>{const{VISIBILE:t}=e.properties;e.setProperty(t,X)}))})))}),[X]);const le=bc((()=>T===bo.PROCESS||W===Ua.ISOLATED_MARGIN?null:ut.jsx(ut.Fragment,{children:ut.jsx("div",{className:"df f1 by-subhead-wallet",children:ut.jsx(Xe,d(c({},se),{byPopoverAnchorEl:1===E?ut.jsxs(ut.Fragment,{children:[ut.jsx(zl,{im:"0",mm:"0",mb:"0",equity:"0"}),ut.jsx(Ql,{equity:"0",ab:"0",mb:"0"})]}):ut.jsxs(ut.Fragment,{children:[ut.jsx(zl,{im:e,mm:t,mb:n,equity:a}),ut.jsx(Ql,{equity:a,ab:o,mb:n})]})}))})})),[a,o,e,t,n,E,q,T,W,se]);Oc((()=>{var e,t;j&&y&&"24"!==S&&0===(null==(e=Object.keys(b))?void 0:e.length)&&Promise.all([(t={timeZone:S},Uo.get("/contract/v5/public/instrument/open-price",t)),ql({timeZone:S})]).then((e=>{e.forEach((e=>{var t,n;(null==(t=Object.keys(e.data))?void 0:t.length)&&dt("common",(n=e.data,{type:vn.UPDATE_OPEN_PRICE_LIST,payload:n}))}))}))}),[S,j]);return ut.jsxs("div",{id:"bySubhead",className:"df aic by-subhead subhead-zindex",children:[m&&ut.jsx(oe,{anchorEl:ut.jsx("div",{className:"bit-design-iconfont bit-icon_system_exchange_web",onMouseEnter:()=>{te()},onMouseLeave:()=>{ne()}}),popperOptions:{modifiers:{offset:{offset:"177, 16"}}},placement:"bottom",open:j,onReferMouseEnter:te,onReferMouseLeave:()=>ae(),children:ut.jsx(Cc,{fallback:ut.jsx("div",{}),children:ut.jsx(Ac,{visible:j,handleSwitch:ae,theme:R,baseCoin:O,openPriceListRef:V})})}),ut.jsx("div",{className:"go-explore",onClick:()=>{lt.track("PCTradingSiteExploreClick",{button_name:"TChartExploreClick"}),window.open(`/${x()}/options-activity/explore`)}}),ut.jsx(Sc,{handleSymbolClick:e=>{yc(e),N.push(C.path.replace(/:coin/,e))},suffix:u,coinList:l}),ut.jsxs("div",{id:"accountContainer",className:"df aic by-subhead-right",children:[Z,le,y&&ee,ut.jsx(Xe,d(c({},ie),{byPopoverAnchorEl:ut.jsx("div",{className:"overviewlink-wrap df jcsb aic",children:ut.jsx("div",{className:"overviewlink-icon opt-design-iconfont icon-Overview",onClick:()=>{G(!0)}})})}))]}),ut.jsx(M,{className:"otc-modal show-darkModal",open:F,draggable:!1,showCancel:!1,innerWidth:"600px",showConfirm:!1,showFoot:!0,onClose:()=>{G(!1)},head:B("optionTradeCenter"),children:ut.jsxs("div",{className:"otc-body",children:[ut.jsxs("div",{className:"otc-item cursor-pointer",onClick:()=>{zo.emit($n.TRADING_GUIDE_MODAL_VISIBLE,{open:!0,type:Vt.NORMAL})},children:[ut.jsxs("div",{className:"otc-item-header",children:[ut.jsx("i",{className:"bit-design-iconfont bit-icon_tactics"}),ut.jsx("div",{children:B("optionTradingGuide")}),ut.jsx("div",{className:"otc-new",children:"New"})]}),ut.jsx("div",{className:"otc-item-content",children:B("optionTradingGuideDesc")})]}),ut.jsxs("div",{className:"otc-item",children:[ut.jsxs("div",{className:"otc-item-header",children:[ut.jsx("i",{className:"bit-design-iconfont bit-icon_book"}),ut.jsx("div",{children:B("optionTradingRules")})]}),ut.jsxs("div",{className:"otc-item-content",children:[ut.jsx("a",{href:`/${x()}/announcement-info/contract-detail/?type=Options&standard=Option&symbol=BTCUSDC`,target:"_blank",rel:"noreferrer",children:B("contractInfo")}),ut.jsx("a",{href:`/${x()}/announcement-info/transact-parameters/`,target:"_blank",rel:"noreferrer",children:B("tradeParams")}),ut.jsx("a",{href:`/${x()}/announcement-info/margin-parameters/`,target:"_blank",rel:"noreferrer",children:B("marginParams")})]})]}),ut.jsxs("div",{className:"otc-item",children:[ut.jsxs("div",{className:"otc-item-header",children:[ut.jsx("img",{src:"dark"===R?"/trade/option/usdc/assets/article-dark.c1c78b5d.svg":"/trade/option/usdc/assets/article-light.d5f24460.svg"}),ut.jsx("div",{children:B("hotArticles")})]}),ut.jsxs("div",{className:"otc-item-content",children:[ut.jsx("div",{className:"otc-item-article",children:ut.jsx("a",{href:`/${x()}/help-center/article/Introduction-to-Bybit-Options`,target:"_blank",rel:"noreferrer",children:B("optionIntro")})}),ut.jsx("div",{className:"otc-item-article",children:ut.jsx("a",{href:`/${x()}/help-center/article/Introduction-to-Bybit-Options-Margin-Systems`,target:"_blank",rel:"noreferrer",children:B("optionMargin")})}),ut.jsx("div",{className:"otc-item-article",children:ut.jsx("a",{href:`/${x()}/help-center/article/P-L-Calculations-Options`,target:"_blank",rel:"noreferrer",children:B("optionPNLCalc")})}),ut.jsx("div",{className:"otc-item-article",children:ut.jsx("a",{href:`/${x()}/help-center/article/Liquidation-Process-Options`,target:"_blank",rel:"noreferrer",children:B("optionLiq")})}),ut.jsx("div",{className:"otc-item-article",children:ut.jsx("a",{href:`/${x()}/help-center/article/How-to-Get-Started-with-Options-Trading-on-Bybit`,target:"_blank",rel:"noreferrer",children:B("howToOpenTrade")})})]}),ut.jsx("div",{className:"otc-see-more",children:ut.jsx("a",{href:`/${x()}/help-center/topic-list/unified-trading-account#usdc_options`,target:"_blank",rel:"noreferrer",children:B("seeMore")})})]})]})})]})},{MSG_USER_PORTFOLIO_WALLET:Lc}=Ti,Pc=async e=>{const{isUMAccount:t}=e,n=(t?hi.urlMap:Ii.urlMap).walletBalance,a=await(async(e,t={})=>Uo.post(e,t).then(((e={})=>(e.version=void 0===e.version?0:Number(e.version),e)),(e=>!1)))(n),{accountIMRate:o,accountMMRate:i,totalEquity:r,totalMarginBalance:s,totalAvailableBalance:l,totalInitialMargin:u,totalMaintenanceMargin:m,currencyCoinWalletDTOList:_,totalWalletBalance:p}=a||{};return t?d(c({},a),{equity:r,marginBalance:s,availableBalance:l,accountIM:u,accountMM:m,accountIMRate:o,accountMMRate:i,currencyCoinWalletDTOList:_,totalWalletBalance:p}):a},Dc=window.React.useCallback,wc=window.React.useEffect,Mc=window.React.useRef,xc=window.React.useState,Uc={accountIM:"0",accountMM:"0",accountIMRate:"",accountMMRate:"",marginBalance:"0",equity:"0",availableBalance:"0",walletTime:"",currencyCoinWalletDTOList:[],totalWalletBalance:-1},Bc=({config:e,coinList:t})=>{const{id:n,isUMAccount:a=!1,isLoginReady:o}=yt((({common:e})=>e.user))||{},[i,r]=xc(Uc),s=Mc({});s.current.setData=e=>{if(!o)return;const{marginBalance:t="-1",availableBalance:n="-1",accountIM:a="0",accountMM:i="0",accountIMRate:s,accountMMRate:l,currencyCoinWalletDTOList:c=[],totalWalletBalance:d=-1}=e;dt("subHeader",Sa({marginBalance:t,avaliableBalance:n,accountIM:a,accountMM:i,accountIMRate:s,accountMMRate:l,currencyCoinWalletDTOList:c,totalWalletBalance:d})),r(e)},wc((()=>{let e;var t;return o?(t=s,_a.subscribe({commandType:Wn.NORMAL,topic:Lc,payload:{},callback:e=>{var n,a;t.current.setData(null!=(a=null==(n=null==e?void 0:e.data)?void 0:n.result[0])?a:{})}}),e=()=>{_a.cleanSubscribeTopicCallback(Lc)}):(r(Uc),dt("subHeader",Sa(Uc))),()=>{null==e||e()}}),[n,o]),wc((()=>{o&&async function(){const e=await Pc({isUMAccount:a});e&&s.current.setData(e)}()}),[n,o]);const l=Dc((e=>{return dt("subHeader",(t=e,{type:gn.IS_PM_UPDATE,payload:t}));var t}),[]),c=Dc((e=>{return dt("subHeader",(t=e,{type:gn.MARGIN_MODE,payload:t}));var t}),[]);return ut.jsx(fc,{equity:null==i?void 0:i.equity,accountIM:null==i?void 0:i.accountIM,accountMM:null==i?void 0:i.accountMM,availableBalance:null==i?void 0:i.availableBalance,marginBalance:null==i?void 0:i.marginBalance,isPmCb:l,marginModeCb:c,config:e,coinList:t})},kc=e=>{if(!e)return 0;const t=e-(new Date).getTime();return t<0?0:t},jc=e=>({days:Math.floor(e/864e5),hours:Math.floor(e/36e5)%24,minutes:Math.floor(e/6e4)%60,seconds:Math.floor(e/1e3)%60});function Hc(e){return ht(e).utc().format("D MMM YYYY").toLocaleUpperCase()}ht.extend(E);let Fc=null;function Gc(e,t){if(!e)return()=>{};const{observer:n,elements:a}=function(){if(!Fc){const e={root:document.querySelector("#option_container"),rootMargin:`0px 0px ${window.innerHeight}px 0px`,threshold:.1},t=new Map,n=e=>{e.forEach((e=>{var n;const a=e.isIntersecting;null==(n=t.get(e.target))||n(a,e)}))},a=new IntersectionObserver(n,e);Fc={observer:a,elements:t}}return Fc}();return a.has(e)||a.set(e,t),n.observe(e),function(){a.delete(e),n.unobserve(e),0===a.size&&n.disconnect()}}const Vc=new Map,qc=(e,t)=>{const n=".quote-symbol";(e?e.querySelectorAll(n):document.querySelectorAll(n)).forEach((e=>{Gc(e,((e,n)=>{var a;const{dataset:{id:o=""}}=null!=(a=n.target)?a:{dataset:{}};o&&(Vc.set(o,e),null==t||t(Vc))}))}))},Wc=e=>{e.forEach((e=>{const{dataset:{id:t=""}}=e;Vc.delete(t),function(e){if(!Fc)return;const{elements:t,observer:n}=Fc;t.has(e)&&(t.delete(e),n.unobserve(e),0===t.size&&n.disconnect())}(e)}))};var Yc=(e=>(e.click="click",e.mouseover="mouseover",e.mouseout="mouseout",e.mousemove="mousemove",e.onCellClick="onCellClick",e.onSliderClick="onSliderClick",e.onSliderClose="onSliderClose",e))(Yc||{}),$c=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))($c||{}),Kc=(e=>(e.TOP="top",e.MIDDLE="middle",e.BOTTOM="bottom",e))(Kc||{});const Qc=new class{constructor(){this.commonColors={long:"",short:"","color-white":""},this.debugCell=!1,this.debugText=!1,this.enableOffscreencanvas=!1,this.defaultPlaceholder="--",this.strikeWidth=68,this.rowHeight=40,this.isPercentageKey=["change24h","bidIv","markPriceIv","askIv"],this.themeColors={"gray-09":"","bds-gray-T3":"","itm-bg":"","gray-003":"","primary-color-02":"","bds-green-100-bg":"",long:"",short:"","color-white":""};const e=rn();this.themeMode=e,this.setTheme(e)}setCustomThemeColors(){this.themeColors["itm-bg"]="light"===this.themeMode?"rgba(244,251,248,1)":"rgba(0,148,79,0.04)"}setTheme(e){this.themeMode=e,Object.keys(this.themeColors).forEach((t=>{const n=t;let a="";a=n in this.commonColors?ie(n,"common"):ie(n,e),a&&(this.themeColors[n]=a)})),this.setCustomThemeColors()}},zc=(e,t)=>{var n;const a=document.createElement(e);if(t){const{style:e,attrs:o}=t;if(e&&Object.assign(a.style,e),o)for(const t in o)a.setAttribute(t,null==(n=o[t])?void 0:n.toString())}return a},Xc=e=>` ${e} 12px IBM Plex Sans`,Jc=(e,t,n)=>{const{x:a,y:o,width:i,height:r}=e;let s=0,l=a;return s=Math.min(n/100*i,i),(t!==Lt.Call&&!ja.common.rtlStatus||t===Lt.Call&&ja.common.rtlStatus)&&(l=a+i-s),{x:l,y:o,width:s,height:r}},Zc=e=>{const{ctx:t,x:n,y:a,width:o,height:i,color:r}=e;r&&(t.save(),t.fillStyle=r),t.fillRect(n,a,o,i),r&&t.restore()},ed=(e,t)=>{const{x:n,y:a,width:o,height:i,ctx:r}=e,{align:s=$c.RIGHT,vAlign:l=Kc.MIDDLE,color:c="rgb(102, 102, 102)",font:d="",fontSize:u=12}=t;let{text:m=""}=t;if(r){const e=n+o,t=a+i;r.save(),r.beginPath(),r.fillStyle=c,""!==d&&(r.font=d);let _,p=a+i/2+u/2;ja.common.rtlStatus&&/([\d.,]*\d)(%)/g.test(m)&&(m=m.replace(/([\d.,]*\d)(%)/g,((e,t,n)=>`${n}${t}`))),s===$c.RIGHT?(_=e,r.textAlign="right"):s===$c.LEFT?(_=n,r.textAlign="left"):(_=n+o/2,r.textAlign="center");let E=a;l===Kc.TOP?p=a+u:l===Kc.BOTTOM?(p=t,E=t):E=a+i/2,r.fillText(""===m?Qc.defaultPlaceholder:m,_,p,m===Qc.defaultPlaceholder?10:o),r.restore(),Qc.debugText&&(r.lineWidth=3,r.strokeStyle="#00909e",r.strokeRect(n,a,o,i),r.lineWidth=2,r.strokeStyle="#f6d743",r.beginPath(),r.moveTo(_,a),r.lineTo(_,t),r.stroke(),r.strokeStyle="#ff6363",r.beginPath(),r.moveTo(n,E),r.lineTo(e,E),r.stroke())}},td=e=>{const{x:t,y:n,width:a,height:o,color:i,corners:r=[],ctx:s}=e,[l=0,c=0,d=0,u=0]=r;s.save(),s.beginPath(),s.fillStyle=i,s.moveTo(t+l,n),s.arcTo(t+a,n,t+a,n+o,c),s.arcTo(t+a,n+o,t,n+o,u),s.arcTo(t,n+o,t,n,d),s.arcTo(t,n,t+a,n,l),s.fill(),s.restore()},{themeColors:nd,defaultPlaceholder:ad}=Qc,od=(e,t)=>{var n,a;const o=nd["gray-09"],[i,r]=t,{x:s,y:l,width:c,height:d,ctx:u}=e,m={x:s,y:l,width:c,height:d/2-2,ctx:u},_={text:""!==i.text?i.text:ad,vAlign:Kc.BOTTOM,color:null!=(n=i.color)?n:o},p={text:""!==r.text?`${r.text}%`:ad,vAlign:Kc.TOP,color:null!=(a=r.color)?a:o},E={x:s,y:l+d/2+2,width:c,height:d/2-2,ctx:u};ed(m,_),ed(E,p)},id=(e,t)=>{var n;const a=nd["gray-09"],o=d(c({},t),{text:""!==t.text?`${t.text}`:ad,color:null!=(n=t.color)?n:a});t.rectBgColor&&Zc(d(c({},e),{color:t.rectBgColor})),ed(e,o)},rd=[{id:"c_volume24hRate",dataIndex:"volume24hRate",width:36,visible:!0,render(e,t,n){if(n&&t){const{volume24hRate:e=0}=t,{x:a,y:o,width:i,height:r,ctx:s}=n,l=Jc({x:a,y:o,width:i,height:r},t.symbolType,e);Zc(d(c({},l),{ctx:s,color:nd["bds-green-100-bg"]}))}}},{title:Tt.t("lastPrice"),id:"c_lastPrice",dataIndex:"lastPrice",visible:!0,align:$c.RIGHT,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{lastPrice:e=""}=t;id(n,{text:e,id:"lastPrice"})}}},{title:Tt.t("24Vol"),id:"c_volume24h",dataIndex:"volume24h",visible:!0,align:$c.RIGHT,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{volume24h:e=""}=t;id(n,{text:e,id:"volume24h"})}}},{title:Tt.t("24HChange"),id:"c_change24h",dataIndex:"change24h",visible:!0,align:$c.RIGHT,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{change24h:e=""}=t;id(n,{text:e?`${e}%`:"",id:"change24h"})}}},{title:Tt.t("OpenInterest"),id:"c_open",dataIndex:"openInterest",align:$c.RIGHT,visible:!0,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{openInterest:e=""}=t;id(n,{text:e,id:"openInterest"})}}},{title:Tt.t("Vega"),id:"c_Vega",dataIndex:"vega",align:$c.RIGHT,visible:!0,popKey:"Vega",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{vega:e=""}=t;id(n,{text:e,id:"vega"})}}},{title:Tt.t("Theta"),id:"c_Theta",dataIndex:"theta",align:$c.RIGHT,visible:!0,popKey:"Theta",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{theta:e=""}=t;id(n,{text:e,id:"theta"})}}},{title:Tt.t("Gamma"),id:"c_Gamma",dataIndex:"gamma",align:$c.RIGHT,visible:!0,popKey:"Gamma",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{gamma:e=""}=t;id(n,{text:e,id:"gamma"})}}},{title:Tt.t("Delta"),id:"c_Delta",dataIndex:"delta",align:$c.RIGHT,visible:!0,popKey:"Delta",width:70,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{delta:e=""}=t;id(n,{text:e,id:"delta"})}}},{title:Tt.t("WinRate"),id:"c_WinRate",dataIndex:"winRate",align:$c.RIGHT,visible:!0,popKey:"WinRate",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{winRate:e=""}=t;id(n,{text:e,id:"winRate"})}}},{title:Tt.t("Leverage"),id:"c_Leverage",dataIndex:"leverage",align:$c.RIGHT,visible:!0,popKey:"Leverage",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{leverage:e=""}=t;id(n,{text:e,id:"leverage"})}}},{title:Tt.t("BidSize"),id:"c_bidSize",dataIndex:"bidSize",align:$c.RIGHT,visible:!0,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{bidSize:e=""}=t;id(n,{text:e,id:"bidSize"})}}},{title:Tt.t("Bid"),dataIndex:"showBid",id:"c_bid",optionType:Pt.Sell,align:$c.RIGHT,visible:!0,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{showBid:e="",bidIv:a=""}=t;od(n,[{text:e,id:"showBid",color:nd.long},{text:a,id:"bidIv",color:nd["bds-gray-T3"]}])}}},{title:Tt.t("MarkPrice"),dataIndex:"showMarkPrice",id:"c_markPrice",width:100,align:$c.RIGHT,visible:!0,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{showMarkPrice:e="",markPriceIv:a=""}=t;od(n,[{text:e,id:"showMarkPrice"},{text:a,id:"markPriceIv",color:nd["bds-gray-T3"]}])}}},{title:Tt.t("Ask"),id:"c_ask",dataIndex:"showAsk",align:$c.RIGHT,visible:!0,width:100,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{showAsk:e="",askIv:a=""}=t;od(n,[{text:e,id:"showAsk",color:nd.short},{text:a,id:"askIv",color:nd["bds-gray-T3"]}])}}},{title:Tt.t("AskSize"),id:"c_askSize",dataIndex:"askSize",align:$c.RIGHT,visible:!0,width:100,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{askSize:e=""}=t;id(n,{text:e,id:"askSize"})}}},{title:Tt.t("Pos"),id:"c_pos",dataIndex:"pos",align:$c.RIGHT,visible:!0,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{pos:e=""}=t,{width:a,height:o,x:i,y:r}=n;if(!e)return void id(n,{text:e,id:"pos"});const s=+e>0,l=d(c({},n),{x:i+(a-14),y:r+(o-10)/2,width:14,height:14});td(d(c({},l),{corners:[4,4,4,4],color:s?nd.long:nd.short})),id(l,{text:s?"L":"S",color:nd["color-white"],fontSize:8,align:$c.CENTER}),id(d(c({},n),{width:a-22,height:o}),{text:e,id:"pos"})}}},{dataIndex:"placeholder",id:"c_placeholder",align:$c.RIGHT,width:24,visible:!0,render(e,t,n){n&&Zc(d(c({},n),{color:"rgba(0,0,0,0)"}))}}],sd=[{dataIndex:"placeholder",id:"p_placeholder",align:$c.RIGHT,visible:!0,width:24,render(e,t,n){n&&Zc(d(c({},n),{color:"rgba(0,0,0,0)"}))}},{title:Tt.t("Pos"),id:"p_pos",dataIndex:"pos",align:$c.RIGHT,visible:!0,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{pos:e=""}=t,{width:a,height:o,x:i,y:r}=n;if(!e)return void id(n,{text:e,id:"pos"});const s=+e>0,l=d(c({},n),{x:i+(a-14),y:r+(o-10)/2,width:14,height:14});td(d(c({},l),{corners:[4,4,4,4],color:s?nd.long:nd.short})),id(l,{text:s?"L":"S",color:nd["color-white"],fontSize:8,align:$c.CENTER}),id(d(c({},n),{width:a-22,height:o}),{text:e,id:"pos"})}}},{title:Tt.t("BidSize"),id:"p_bidSize",dataIndex:"bidSize",align:$c.RIGHT,visible:!0,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{bidSize:e=""}=t;id(n,{text:e,id:"bidSize"})}}},{title:Tt.t("Bid"),id:"p_bid",optionType:Pt.Sell,dataIndex:"showBid",align:$c.RIGHT,visible:!0,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{showBid:e="",bidIv:a=""}=t;od(n,[{text:e,id:"showBid",color:nd.long},{text:a,id:"bidIv",color:nd["bds-gray-T3"]}])}}},{title:Tt.t("MarkPrice"),id:"p_markPrice",dataIndex:"showMarkPrice",width:100,align:$c.RIGHT,visible:!0,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{showMarkPrice:e="",markPriceIv:a=""}=t;od(n,[{text:e,id:"showMarkPrice"},{text:a,id:"markPriceIv",color:nd["bds-gray-T3"]}])}}},{title:Tt.t("Ask"),id:"p_ask",dataIndex:"showAsk",align:$c.RIGHT,visible:!0,width:100,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{showAsk:e="",askIv:a=""}=t;od(n,[{text:e,id:"showAsk",color:nd.short},{text:a,id:"askIv",color:nd["bds-gray-T3"]}])}}},{title:Tt.t("AskSize"),id:"p_askSize",dataIndex:"askSize",align:$c.RIGHT,visible:!0,width:100,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{askSize:e=""}=t;id(n,{text:e,id:"askSize"})}}},{title:Tt.t("Leverage"),id:"p_Leverage",dataIndex:"leverage",align:$c.RIGHT,visible:!0,popKey:"Leverage",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{leverage:e=""}=t;id(n,{text:e,id:"leverage"})}}},{title:Tt.t("WinRate"),id:"p_WinRate",dataIndex:"winRate",align:$c.RIGHT,visible:!0,popKey:"WinRate",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{winRate:e=""}=t;id(n,{text:e,id:"winRate"})}}},{title:Tt.t("Delta"),dataIndex:"delta",id:"p_delta",align:$c.RIGHT,visible:!0,popKey:"Delta",width:70,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{delta:e=""}=t;id(n,{text:e,id:"delta"})}}},{title:Tt.t("Gamma"),id:"p_Gamma",dataIndex:"gamma",align:$c.RIGHT,visible:!0,popKey:"Gamma",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{gamma:e=""}=t;id(n,{text:e,id:"gamma"})}}},{title:Tt.t("Theta"),id:"p_Theta",dataIndex:"theta",align:$c.RIGHT,visible:!0,popKey:"Theta",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{theta:e=""}=t;id(n,{text:e,id:"theta"})}}},{title:Tt.t("Vega"),id:"p_Vega",dataIndex:"vega",align:$c.RIGHT,visible:!0,popKey:"Vega",width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{vega:e=""}=t;id(n,{text:e,id:"vega"})}}},{title:Tt.t("OpenInterest"),id:"p_open",dataIndex:"openInterest",align:$c.RIGHT,visible:!0,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{openInterest:e=""}=t;id(n,{text:e,id:"openInterest"})}}},{title:Tt.t("24HChange"),id:"p_change24h",dataIndex:"change24h",visible:!0,align:$c.RIGHT,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{change24h:e=""}=t;id(n,{text:e?`${e}%`:"",id:"change24h"})}}},{title:Tt.t("24Vol"),id:"p_volume24h",dataIndex:"volume24h",align:$c.RIGHT,visible:!0,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{volume24h:e=""}=t;id(n,{text:e,id:"volume24h"})}}},{title:Tt.t("lastPrice"),id:"p_lastPrice",dataIndex:"lastPrice",visible:!0,align:$c.RIGHT,width:80,style:{padding:[0,8,0,0]},render(e,t,n){if(n&&t){const{lastPrice:e=""}=t;id(n,{text:e,id:"lastPrice"})}}},{dataIndex:"volume24hRate",id:"p_volume24hRate",align:$c.RIGHT,width:36,visible:!0,render(e,t,n){if(n&&t){const{volume24hRate:e=0}=t,{x:a,y:o,width:i,height:r,ctx:s}=n,l=Jc({x:a,y:o,width:i,height:r},t.symbolType,e);Zc(d(c({},l),{ctx:s,color:nd["bds-green-100-bg"]}))}}}],ld=[{title:Tt.t("Strike"),dataIndex:"strikePrice",align:$c.CENTER,visible:!0,width:68,style:{font:Xc("600"),align:$c.CENTER,bgColor:nd["gray-003"],color:nd["gray-09"]},render(e,t,n){if(n&&t){const{strikePrice:e=""}=t;id(n,{text:e,id:"strikePrice",color:nd["gray-09"],align:$c.CENTER,vAlign:Kc.MIDDLE,font:Xc("600"),rectBgColor:nd["gray-003"]})}}}],{themeColors:cd}=Qc;class dd{constructor(e){this.props=e,this.canvasNode=null,this.canvasWrapNode=null,this.symbols="",this.ctx=null,this.callData=null,this.strickData=null,this.putData=null,this.cellsRectInfoMap=new Map,this.callColumns=rd,this.strikeColumns=ld,this.putColumns=sd,this.isDrawCallMouseOverBgColor=!1,this.isDrawPutMouseOverBgColor=!1;const{data:{call:t,put:n}}=this.props,{strikePrice:a}=t;this.callData=t,this.strickData={strikePrice:a},this.putData=n,this.init()}init(){const{collapsed:e,changeColKeys:t=[]}=this.props;this.updateColumnsVisible(e,t),this.createCanvas(),this.calcCellsRectInfo(),this.renderCells()}renderColumn(e,t){var n;this.drawMouseOverBgColor(t);for(let a=0;a<e.length;a++){const o=e[a],{id:i="",visible:r,render:s}=o;if(!r)continue;const l=this.getCellRectById(i);let u=null;u="call"===t?this.callData:"strick"===t?this.strickData:this.putData;const m=u[null!=(n=o.dataIndex)?n:""],_=d(c({},l),{ctx:this.ctx});null==s||s(m,u,_)}}renderCells(){this.renderColumn(this.callColumns,"call"),this.renderColumn(this.strikeColumns,"strick"),this.renderColumn(this.putColumns,"put")}createCanvas(){const{data:e,width:t,parentNode:n,insertSymbolCanvasNodeFunc:a}=this.props,{call:o}=e,{symbolName:i,visible:r}=o;this.symbols=i.replace(/(-P)|(-C)/g,""),this.canvasNode=zc("canvas",{style:{width:`${t}px`,height:`${Qc.rowHeight}px`,cursor:"pointer"},attrs:{width:t*this.props.PIXEL_RATIO,height:Qc.rowHeight*this.props.PIXEL_RATIO,class:"quote-symbol","data-id":this.symbols}}),this.canvasWrapNode=zc("div",{attrs:{class:"canvas-wrap",id:this.symbols},style:{display:r?"block":"none"}}),this.canvasWrapNode.appendChild(this.canvasNode),a?a(n,this.canvasWrapNode):n.appendChild(this.canvasWrapNode),this._ctxInit()}_ctxInit(){var e;if(this.ctx=null==(e=this.canvasNode)?void 0:e.getContext("2d",{alpha:!0}),this.ctx){this.ctx.setTransform(this.props.PIXEL_RATIO,0,0,this.props.PIXEL_RATIO,0,0);const e=`${400} ${12}px ${"IBM Plex Sans"}`;this.ctx.font=e}}calcCellsRectInfo(){const e=kd([...this.callColumns,...this.strikeColumns,...this.putColumns]),t=this.props.width,n=e.filter((e=>e.visible)),a=n.map((({width:e=0})=>e));n.forEach(((e,n)=>{const{style:o,id:i=""}=e,{padding:r=[]}=null!=o?o:{},[s=0,l=0,c=0,d=0]=r,u=a[n]-d-l,m=Qc.rowHeight-s-c,_=0+((e,t)=>{if(0===t)return ja.common.rtlStatus?e[0]:0;const n=e.length;let a=0;for(let o=0;t<n&&(ja.common.rtlStatus?o<=t:o<t);o++)a+=e[o];return a})(a,n),p={x:ja.common.rtlStatus?t-_-d:_+d,y:0+s,width:u,height:m};this.cellsRectInfoMap.set(i,p)}))}getCellRectById(e){var t;return null!=(t=this.cellsRectInfoMap.get(e))?t:{x:0,y:0,width:0,height:0}}clearRect(e){var t;const{x:n,y:a,width:o,height:i}=this.getRectInfoByType(e);null==(t=this.ctx)||t.clearRect(n,a,o,i)}getRectInfoByType(e){const t=(this.props.width-Qc.strikeWidth)/2;let n={x:0,y:0,width:0,height:0};return n=e===Lt.Call&&!ja.common.rtlStatus||e===Lt.Put&&ja.common.rtlStatus?{x:0,y:0,width:t,height:Qc.rowHeight}:e===Lt.Put&&!ja.common.rtlStatus||e===Lt.Call&&ja.common.rtlStatus?{x:t+Qc.strikeWidth,y:0,width:t,height:Qc.rowHeight}:{x:t,y:0,width:Qc.strikeWidth,height:Qc.rowHeight},n}drawMouseOverBgColor(e){if(e===Lt.Call&&this.isDrawCallMouseOverBgColor||e===Lt.Put&&this.isDrawPutMouseOverBgColor){const t=this.getRectInfoByType(e);this.ctx&&Zc(d(c({},t),{ctx:this.ctx,color:cd["gray-003"]}))}}updateColumnsVisible(e,t){const n=n=>{let a=!0;return a=e?!t.includes(n.dataIndex):!t.includes(n.dataIndex)||ja.quote.filterFields[n.dataIndex],d(c({},n),{visible:a})};this.callColumns=this.callColumns.map(n),this.putColumns=this.putColumns.map(n)}renderMouseBgColor(e,t){var n;null==(n=this.ctx)||n.clearRect(0,0,this.props.width,Qc.rowHeight),"draw"===t?(e===Lt.Call&&(this.isDrawCallMouseOverBgColor=!0,this.isDrawPutMouseOverBgColor=!1),e===Lt.Put&&(this.isDrawPutMouseOverBgColor=!0,this.isDrawCallMouseOverBgColor=!1)):(this.isDrawCallMouseOverBgColor=!1,this.isDrawPutMouseOverBgColor=!1),this.renderCells()}getSymbolType(e){const t=(this.props.width-Qc.strikeWidth)/2;let n=Lt.Call;return e>=0&&e<=t&&(n=ja.common.rtlStatus?Lt.P:Lt.C),e>=t+Qc.strikeWidth&&e<=this.props.width&&(n=ja.common.rtlStatus?Lt.C:Lt.P),n}updateSymbol(e){const{symbolType:t}=e;this.clearRect(t),t===Lt.Call?(this.callData=e,this.renderColumn(this.callColumns,"call")):t===Lt.Put?(this.putData=e,this.renderColumn(this.putColumns,"put")):this.strickData={strikePrice:e.strikePrice}}resize(e){this.props.width=e,this.canvasNode&&(this.canvasNode.style.width=`${e}px`,this.canvasNode.width=e*this.props.PIXEL_RATIO,this._ctxInit(),this.calcCellsRectInfo(),this.renderCells())}updateTheme(){var e;null==(e=this.ctx)||e.clearRect(0,0,this.props.width,Qc.rowHeight),this.renderCells()}updateColumnsLayout(e,t){var n;this.updateColumnsVisible(e,t),this.calcCellsRectInfo(),null==(n=this.ctx)||n.clearRect(0,0,this.props.width,Qc.rowHeight),this.renderCells()}destroy(){Object.getOwnPropertyNames(this).forEach((e=>{this[e]=null,delete this[e]}))}}const{themeColors:ud}=Qc;class md{constructor(e){this.props=e,this.canvasNode=null,this.visibleHeight=0,this.visibleCalls=[];const{source:t}=e;this.visibleCalls=Xd(t),this._init()}_init(){this.createQuoteBgColorCanvas(),this._ctxInit(),this.render()}createQuoteBgColorCanvas(){const{source:e,width:t,parentNode:n}=this.props;this.visibleHeight=this.calcCanvasVisibleHeight(e),this.canvasNode=zc("canvas",{style:{width:`${t}px`,height:`${this.visibleHeight}px`},attrs:{width:t,height:this.visibleHeight,class:"quote-canvas-bg"}}),n.appendChild(this.canvasNode)}_ctxInit(){var e;this.ctx=null==(e=this.canvasNode)?void 0:e.getContext("2d",{alpha:!0}),this.ctx&&this.ctx.setTransform(1,0,0,1,0,0)}render(){this.ctx.clearRect(0,0,this.props.width,this.visibleHeight);const e=(this.props.width-Qc.strikeWidth)/2,t=this.visibleCalls.filter((e=>e.isITM)).length;if(0===t)return;const n=this.visibleCalls.length-t;Zc({x:ja.common.rtlStatus?e+Qc.strikeWidth:0,y:0,width:e,height:t*Qc.rowHeight,ctx:this.ctx,color:ud["itm-bg"]}),Zc({x:ja.common.rtlStatus?0:e+Qc.strikeWidth,y:0,width:e,height:t*Qc.rowHeight,ctx:this.ctx,color:ud["primary-color-02"]}),Zc({x:ja.common.rtlStatus?e+Qc.strikeWidth:0,y:t*Qc.rowHeight,width:e,height:n*Qc.rowHeight,ctx:this.ctx,color:ud["primary-color-02"]}),Zc({x:ja.common.rtlStatus?0:e+Qc.strikeWidth,y:t*Qc.rowHeight,width:e,height:n*Qc.rowHeight,ctx:this.ctx,color:ud["itm-bg"]})}calcCanvasVisibleHeight(e){return e.data.calls.filter((e=>e.visible)).length*Qc.rowHeight}updateITMBgColor(e){this.props.source=e;const t=this.calcCanvasVisibleHeight(e);this.visibleCalls=Xd(e),this.visibleHeight!==t&&(this.visibleHeight=t,this.canvasNode&&(this.canvasNode.style.height=`${t}px`,this.canvasNode.height=t)),this.render()}resize(e){this.props.width=e,this.canvasNode&&(this.canvasNode.style.width=`${e}px`,this.canvasNode.width=e,this._ctxInit(),this.ctx.clearRect(0,0,e,this.visibleHeight),this.render())}updateTheme(){this.ctx.clearRect(0,0,this.props.width,this.visibleHeight),this.render()}}class _d{constructor(e){this.props=e,this.tableContainer=null,this.tableTitleContainer=null,this.symbolCanvasMap=new Map,this.quoteTableBody=null,this.PIXEL_RATIO=1,this.openStatus=!0,this.bgColorCanvas=null,this.quoteITMBgColorCanvas=null,this.onClickHandle=e=>{var t,n;if(!(null==(n=(t=this.props).checkingLoginHandle)?void 0:n.call(t)))return;const a=this.getSymbolInfoByMouseEvent(e);if(a){const{symbolName:e,symbolType:t}=a;this.props.onTableRowClick({symbolName:e,symbolType:t,optionType:"buy"})}},this.onMouseOverHandler=e=>{const t=this.getSymbolInfoByMouseEvent(e);if(t){const{symbolCanvas:e,symbolType:n}=t;e.renderMouseBgColor(n,"draw")}},this.onMouseOutHandler=e=>{const t=this.getSymbolInfoByMouseEvent(e);if(t){const{symbolCanvas:e,symbolType:n}=t;e.renderMouseBgColor(n,"clear")}},this.init()}init(){var e;const{source:t,parentNode:n,insertQuoteTableNodeFunc:a}=this.props,{deliveryTime:o,data:{calls:i=[]}}=t;this.PIXEL_RATIO=this.getPixelRatio();const{symbolName:r}=null!=(e=i[0])?e:{symbolName:""},[s,l]=r.split("-");this.tableContainer=zc("div",{attrs:{class:"quote-table",id:`quote_${o}`,"data-basecoin":s,"data-date":l}}),this.createQuoteTitle(),this.quoteTableBody=zc("div",{attrs:{class:"quote-table-body"},style:{maxHeight:"0px"}}),this.tableContainer.appendChild(this.quoteTableBody),a?a(n,this.tableContainer):n.appendChild(this.tableContainer),this.createSymbolCanvas(),this.initEvent(),this.initBgColorCanvas(),this.updateQuoteTableBodyHeight()}updateQuoteTableBodyHeight(){this.quoteTableBody&&(this.quoteTableBody.style.maxHeight=this.openStatus?Qc.rowHeight*this.symbolCanvasMap.size+"px":"0px")}createQuoteTitle(){var e;const{source:t}=this.props;this.tableTitleContainer=zc("div",{attrs:{class:"quote-table-title"}}),this.tableTitleContainer.addEventListener("click",(()=>{this.updateOpenStatus(t.deliveryTime,!this.openStatus)}));const n=this.joinTitleHtml();this.tableTitleContainer.innerHTML=n,null==(e=this.tableContainer)||e.appendChild(this.tableTitleContainer)}updateOpenStatus(e,t){this.openStatus=t;const n=document.getElementById(`arrow_direction_${e}`);null==n||n.classList.remove(this.openStatus?"icon-a--arrowdown":"icon-a--arrowup"),null==n||n.classList.add(this.openStatus?"icon-a--arrowup":"icon-a--arrowdown"),this.updateQuoteTableBodyHeight()}initBgColorCanvas(){const{width:e}=this.getViewport();this.quoteITMBgColorCanvas=new md({source:this.props.source,PIXEL_RATIO:this.PIXEL_RATIO,width:e,parentNode:this.quoteTableBody})}createSymbolCanvas(){const{collapsed:e,changeColKeys:t=[],source:n}=this.props,{data:{calls:a=[],puts:o=[]}}=n,{width:i}=this.getViewport();a.forEach(((n,a)=>{const{symbolName:r}=n,s=this.getSymbolPrefix(r),l={call:n,put:o[a]};this.createSymbolNode(l,i,s,e,t)}))}joinTitleHtml(){const{source:e}=this.props,{deliveryTime:t,underlying:n}=e,a=`underlying_${t}`,o=`arrow_direction_${t}`,i=`edp_${t}`,r=`maturityTime_${t}`,s=`subTitle_${t}`,l=Hc(t);return`\n    <div class='quote-table-title_left'>\n    <div class='quote-table-title_type calls'>${Tt.t("Calls")}</div>\n    <span class='quote-table-title_sub'>\n      <span class='underlyingLabel' data-refer='Underlying' data-underlying-id='${a}'>\n        ${Tt.t("Underlying")}\n      </span>\n      :&nbsp;\n      <span id='${a}' data-date='${l}'>${n}</span>\n      USDC\n    </span>\n  </div>\n  <div class='quote-table-title_center'>\n    <span class='quote-table-title_date'>${l}<span id='${o}' class='opt-design-iconfont ${this.openStatus?"icon-a--arrowup":"icon-a--arrowdown"}'></span></span>\n  </div>\n  <div class='quote-table-title_right'>\n    <span class='quote-table-title_sub ' id='${s}'>\n      <span class='maturityTimeLabel'>${Tt.t("TimeToMaturity")}:</span>\n      &nbsp;\n      <span id='${r}'></span>&nbsp;\n      <span id=${i} style='visibility: hidden '>\n        EDP: \n      </span>\n    </span>\n    <div class='quote-table-title_type puts'>${Tt.t("Puts")}</div>\n  </div>\n    `}getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),t=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1);return t<1?1:t}initEvent(){var e,t,n;null==(e=this.quoteTableBody)||e.addEventListener(Yc.click,this.onClickHandle,!1),null==(t=this.quoteTableBody)||t.addEventListener(Yc.mousemove,this.onMouseOverHandler,!1),null==(n=this.quoteTableBody)||n.addEventListener(Yc.mouseout,this.onMouseOutHandler,!1)}getSymbolInfoByMouseEvent(e){const{offsetX:t}=e,n=e.target,{id:a=""}=n.dataset,o=this.symbolCanvasMap.get(a);if(o){const e=o.getSymbolType(t);return{symbolName:`${a}-${e}`,symbolType:e===Lt.C?Lt.Call:Lt.Put,symbolCanvas:o}}return null}getViewport(){var e;return(null==(e=document.querySelector(".quote-header"))?void 0:e.getBoundingClientRect())||{width:0}}getSymbolPrefix(e){return e.replace(/(-P)|(-C)/g,"")}createSymbolNode(e,t,n,a,o,i){const r=new dd({data:e,parentNode:this.quoteTableBody,width:t,PIXEL_RATIO:this.PIXEL_RATIO,collapsed:a,changeColKeys:o,insertSymbolCanvasNodeFunc:i});return this.symbolCanvasMap.set(n,r),r}destroy(){this.symbolCanvasMap.forEach(((e,t,n)=>{e.destroy(),n.delete(t)}))}}let pd=!1,Ed=!1;const yd=e=>document.getElementById(e.replace("#","")),Td=new Map,Id={underlyingLabel:"Underlying",maturityTimeLabel:"TimeToMaturity",calls:"Calls",puts:"Puts",deltaLabel:"Delta",vegaLabel:"Vega",thetaLabel:"Theta",gammaLabel:"Gamma",bidSizeLabel:"BidSize",showBidLabel:"Bid",showMarkPriceLabel:"MarkPrice",showAskLabel:"Ask",askSizeLabel:"AskSize",strikePriceLabel:"Strike",openInterestLabel:"OpenInterest",volume24hLabel:"24Vol",change24hLabel:"24HChange",posLabel:"Pos",lastPriceLabel:"lastPrice",winRateLabel:"winRate",leverageLabel:"leverage"},hd=["volume24hRate","placeholder","strikePrice"],Sd=new Map,Od=e=>{var t;null==(t=Td.get(e))||t();const{stopInterval:n}=((e,t,n)=>{let a=kc(e);null==n||n(jc(a));const o=setInterval((()=>{a=kc(e),null==n||n(jc(a)),0===a&&clearInterval(o)}),t);return{stopInterval:()=>{o&&clearInterval(o)}}})(e,1e3,(t=>{const{days:n,hours:a,minutes:o}=t,i=function({days:e,hours:t,minutes:n,seconds:a}){return 0===e?t>0?`${t}h ${n+1}min`:n<1?`${a}sec`:`${n+1}min`:`${e}d ${t}h ${n+1}min`}(t);if(0===n&&0===a&&o<30){const t=yd(`#edp_${e}`);t&&(t.style.visibility="visible")}if(0===n&&0===a&&o<1){const t=yd(`#subTitle_${e}`);(null==t?void 0:t.classList.contains(""))||null==t||t.classList.add("text_red")}const r=yd(`#maturityTime_${e}`);r&&(r.textContent=i)}));Td.set(e,n)};let bd,Rd=new Map,gd=null,Nd=null,Cd=null;const vd=e=>{Rd=e},Ad=e=>{const{visibleSymbols:t,hiddenSymbols:n}=Dd();xd(t,e),Vd(),setTimeout((()=>{xd(n,e)}),310)},fd=({symbolName:e,visible:t})=>{const n=yd(`#${e.replace(/(-P)|(-C)/g,"")}`);n&&(n.style.display=t?"block":"none")},Ld=new Map;let Pd=new Map;const Dd=()=>{const e=[],t=[];return Rd.forEach(((n,a)=>{n?e.push(a):t.push(a)})),{visibleSymbols:e,hiddenSymbols:t}},wd=(e,t)=>{e.forEach((e=>{var n;null==(n=Pd.get(e))||n.resize(t)}))},Md=e=>{e.forEach((e=>{var t;null==(t=Pd.get(e))||t.updateTheme()}))},xd=(e,t)=>{e.forEach((e=>{var n;null==(n=Pd.get(e))||n.updateColumnsLayout(t,Object.keys(ja.quote.filterFields))}))},Ud=(e,t)=>{const{deliveryTime:n}=e,a=new _d({parentNode:bd,source:e,collapsed:Ed,changeColKeys:Object.keys(ja.quote.filterFields),onTableRowClick:Cd,checkingLoginHandle:Nd,insertQuoteTableNodeFunc:t});Ld.set(n,a),Pd=((...e)=>{const t=new Map([]);for(const n of e)for(const[e,a]of n)t.set(e,a);return t})(Pd,a.symbolCanvasMap),Od(n),setTimeout((()=>{Gd(Fd),Ad(Ed)}),100)},Bd=(e,t)=>{const n=n=>{let a=!0;return a=e?!t.includes(n.dataIndex):!t.includes(n.dataIndex)||ja.quote.filterFields[n.dataIndex],d(c({},n),{visible:a})};return[rd.map(n),sd.map(n)]},kd=e=>{let t=0,n=0,a=0,o=!0,i=0;const{width:r}=document.body.getBoundingClientRect(),s=r-(Ed?536:0);return e.forEach((e=>{e.visible&&(t+=(null==e?void 0:e.width)||0,hd.includes(e.dataIndex)?n+=(null==e?void 0:e.width)||0:i++)})),t<=s&&(o=!1,a=(s-n)/i),e.map((e=>d(c({},e),{width:o||hd.includes(e.dataIndex)?e.width:a})))},jd=(e,t)=>{var n,a;const o=zc("div",{attrs:{class:"quote-header"}}),i=(e=>{const[t,n]=Bd(Ed,Object.keys(ja.quote.filterFields)),a=[...t,...ld,...n];let o="";return kd(a).forEach((({dataIndex:t,title:n="",align:a=$c.CENTER,width:i,style:r,popKey:s="",visible:l})=>{const c=l?"flex":"none",{padding:d=[]}=null!=r?r:{},[u=0,m=0,_=0,p=0]=d,E=`${t}Label`;o+=`<div class="quote-table-cell  text_${a} ${E}" data-refer="${s}" style="width:${i}px;padding:${u}px ${m}px ${_}px ${p}px;display:${c};text-align:right;">${e(Id[E])}</div>`})),o})(t);o.innerHTML=i,null==(a=null==(n=e.parentNode)?void 0:n.parentNode)||a.insertBefore(o,e.parentNode)},Hd=(e,t,n,a,o)=>{bd=e,gd=o,Nd=a,Cd=n,qd(),t.forEach((e=>{Ud(e)})),window.setInterval((()=>{pd||null==gd||gd.handleSymbolIntersection(Rd)}),500),qc(null,vd)};let Fd=0;const Gd=e=>{const{visibleSymbols:t,hiddenSymbols:n}=Dd();wd(t,e),window.__Options_Handle_Resize_Of_Canvas_Timer__&&window.clearTimeout(window.__Options_Handle_Resize_Of_Canvas_Timer__),window.__Options_Handle_Resize_Of_Canvas_Timer__=window.setTimeout((()=>{wd(n,e)}),310),(e=>{var t;for(const n of Ld.values())null==(t=n.quoteITMBgColorCanvas)||t.resize(e)})(e),(e=>{document.querySelector(".react-resizable-handle")&&(document.querySelector(".react-resizable-handle").style.width=`${e}px`),document.querySelectorAll(".quote-slider-wrapper").forEach((t=>{t&&(t.style.width=(e-68)/2+"px")})),document.querySelectorAll(".quote-table-title").forEach((t=>{t&&(t.style.width=`${e}px`)}))})(e)},Vd=()=>{const[e,t]=Bd(Ed,Object.keys(ja.quote.filterFields)),n=[...e,...ld,...t];kd(n).forEach((e=>{document.querySelectorAll(`.${e.dataIndex}Label`).forEach((t=>{t&&(t.style.width=`${e.width}px`)}))}))},qd=e=>{new ResizeObserver((e=>{window.requestAnimationFrame((()=>{if(Array.isArray(e)&&e.length)for(const t of e){const{width:e}=t.contentRect;if(Fd===e)return;Fd=e,Gd(e)}}))})).observe(document.querySelector(".quote-header"))},Wd=e=>{const{deliveryTime:t,symbolName:n,checked:a,showMarkPrice:o=""}=e,i=Ld.get(t);if(i){const t=n.replace(/(-P)|(-C)/g,""),a=i.symbolCanvasMap.get(t),o=zd(n);e.pos=o,null==a||a.updateSymbol(e)}a&&(({symbolName:e,key:t,value:n})=>{const a=`${null==e?void 0:e.replace(".","_")}_${t}`,o=document.querySelectorAll(`.${a}`);o&&o.forEach((e=>{e.textContent=n}))})({symbolName:n,key:"markPrice",value:o})};zo.on($n.TRIGGER_RIGHTMODULE_UPDATE_LAYOUT_START,(e=>{pd=!0,Ed=e,e&&(Object.keys(ja.quote.filterFields).forEach((e=>{document.querySelectorAll(`.${e}Label`).forEach((e=>{e&&(e.style.display="none")}))})),Ad(e))})),zo.on($n.TRIGGER_RIGHTMODULE_UPDATE_LAYOUT_END,(e=>{Ed=e,e||(Object.keys(ja.quote.filterFields).forEach((e=>{ja.quote.filterFields[e]&&document.querySelectorAll(`.${e}Label`).forEach((e=>{e&&(e.style.display="flex")}))})),Ad(e)),pd=!1})),zo.on($n.THEME_SWITCH,(e=>{const t=e;Qc.setTheme(t);const{visibleSymbols:n,hiddenSymbols:a}=Dd();Md(n),setTimeout((()=>{Md(a)}),310),(()=>{var e;for(const t of Ld.values())null==(e=t.quoteITMBgColorCanvas)||e.updateTheme()})()}));const Yd=e=>{document.querySelectorAll(".quote-slider-wrapper").forEach((t=>{const{id:n}=t;if(n){const[a]=n.split("_");e.findIndex((e=>e.symbolName===a))>-1||t.remove()}})),e.forEach((e=>{const{symbolName:t}=e,n=`${t.replace(/(-P)|(-C)/g,"")}`,a=yd(`${t}_checked`),o=yd(n);if(o&&!a){const t=(e=>{const{symbolName:t,symbolType:n}=e;return`<div class="quote-slider-wrapper ${n===Lt.Call?"quote-slider_left":"quote-slider_right"}" id="${t}_checked" >\n                  <div class="quote-slider quote-slider-action__${n}">\n                    <div class="quote-slider-text">\n                      <span class="opt-design-iconfont icon--tick"></span>\n                    </div>\n                    <div\n                      class="quote-slider-close"\n                      data-action="close"\n                      data-id="${t}"\n                    >\n                      <span \n                       class="opt-design-iconfont icon--close" \n                       data-action="close"\n                       data-id="${t}"\n                      >\n                       </span>\n                    </div>\n                  </div>\n                </div>\n             `})(e);o.insertAdjacentHTML("beforeend",t)}}))},$d=e=>{var t,n;const{quoteList:a}=e,o=document.querySelectorAll(".quote-symbol");Wc(o),Pd.clear(),a.forEach((({deliveryTime:e})=>{var t;const n=Ld.get(e);null==n||n.destroy(),null==(t=Td.get(e))||t()})),Td.clear(),Ld.clear();const i=document.querySelector(".quote-list"),r=document.querySelector(".quote-header"),s=document.querySelector(".pop-explain");null==(t=null==r?void 0:r.parentNode)||t.removeChild(r),null==(n=null==s?void 0:s.parentNode)||n.removeChild(s);let l=null==i?void 0:i.lastElementChild;for(;l;)null==i||i.removeChild(l),l=null==i?void 0:i.lastElementChild},Kd=(e,t)=>{const{deliveryTime:n,hasSelectedSymbol:a}=e,o=yd(`#quote_${n}`);if(o&&!Sd.has(n)){Sd.set(n,n),Ld.delete(n);const e=document.createElement("div");if(e.classList.add("quote-table-mask"),o.appendChild(e),o.style.pointerEvents="none",o.style.maxHeight=`${o.offsetHeight}px`,a){const{dataset:{basecoin:e="",date:n=""}}=o;t({symbol:`${e}-${n}`})}Wc([o]),setTimeout((()=>{o.classList.add("quote-table-over")}),0),setTimeout((()=>{var e;const t=Ld.get(n);var a;(a=null==t?void 0:t.symbolCanvasMap)&&a.forEach(((e,t)=>{Pd.delete(t)})),null==t||t.destroy(),Sd.delete(n),null==(e=Td.get(n))||e()}),1e3)}},Qd=(e,t,n)=>{const{increment:a,snapshot:o}=e;a.length&&a.forEach((e=>{const{data:t,insertBeforeSymbolName:a}=e,{call:o}=t,{deliveryTime:i,symbolName:r}=o,s=Ld.get(i);if(s){const{width:e}=s.getViewport();let o;const i=s.getSymbolPrefix(r);o="before"===a?(e,t)=>{e.insertAdjacentElement("afterbegin",t)}:"behind"===a?(e,t)=>{e.insertAdjacentElement("beforeend",t)}:(e,t)=>{const n=yd(`#${a}`);n&&e.insertBefore(t,n)};const l=s.createSymbolNode(t,e,i,Ed,Object.keys(ja.quote.filterFields),o);Pd.set(i,l),qc(null,n)}})),t&&o.length&&o.forEach((e=>{const{insertBeforeDeliveryTime:t}=e;let a=null;var o;a=!t&&(o=".quote-list",document.querySelector(o))?null:yd(`#quote_${t}`);Ud(e,((e,t)=>{a?e.insertBefore(t,a):e.appendChild(t),t.style.display="block"})),qc(null,n)}))},zd=e=>{const t=ja.assets.positions;if(!t.length)return"";const n=t.find((t=>t.symbol===e));if(n){const e=n.positionSize+"";return Gi(e,2,Y.ROUND_DOWN)}return""},Xd=e=>e.data.calls.filter((e=>e.visible));const Jd=window.React.useEffect,Zd=window.React.useState,eu=window.React.useRef,tu=(()=>{const e=navigator.userAgent.toLocaleLowerCase();return!(!function(e){return/ip(ad|od|hone)/i.test(e)}(e)||!function(e){return/version\/[\d.]+.*safari/.test(e)}(e)||function(e){return/(qqbrowser)\/([\d.]+)/i.test(e)}(e))})(),nu=()=>{const e=Ka(),t=eu(null),n=eu(null),a=eu([]),{t:o}=Et(),[i,r]=Zd([]),s=eu(i),l=e=>{r(e),s.current=e},[c,d]=Zd([]),u=eu(),[m,_]=Zd(520),p=yt((({quote:e})=>e.deliveryTimeValue)),E=eu(p);Jd((()=>{(e=>{Object.keys(Id).forEach((t=>{const n=Id[t];document.querySelectorAll(`.${t}`).forEach((t=>{t.textContent=e(n)}))}))})(o)}),[o]),Jd((()=>{$d({quoteList:c}),d([]),E.current=p;const e=setTimeout((()=>{let e=[];if(0===E.current)e=s.current;else{const t=s.current.find((e=>e.deliveryTime===E.current));t&&(e=[t])}d(e),Yd(a.current)}),0);return()=>{e&&clearTimeout(e)}}),[p]);const T=window.warn=e=>{G.warn(o("DeliveryTips",e))},I=e=>{},h=()=>!0;Jd((()=>{var t;u.current||(u.current=new Ta),u.current.subscribeWorkHttpError(),u.current.subscribeWorkHttpRequestCompleted(),u.current.subscribeWorkHttpRequestInterrupted(),null==(t=u.current)||t.subscribeMsgNotice((({type:e,msgKey:t,afterCmd:n})=>{var a;"warn"===e&&G.warn(o(t)),"set-storage"===n&&(Nt(Dt.OPTION_HAS_SHOW_SINGLE_HINT,!0),null==(a=u.current)||a.handleSymbolListSelectMode({hasShowToast:!0}))})),u.current.subscribeAllSymbol((t=>{var a;e.current||(l(t),dt("quote",pa((null==(a=null==t?void 0:t[0])?void 0:a.deliveryTime)||0))),0===t.length&&n.current&&(n.current.style.display="none")})),u.current.subscribeSymbolValue((e=>{e.forEach((e=>{Wd(e)}))})),u.current.subscribeSymbolSelectedList((e=>{a.current=e,Yd(a.current)})),u.current.subscribeQuoteUnderlyings((e=>{e.forEach((e=>{var t;const{showUnderlying:n,deliveryTime:a,data:o}=e,i=yd(`underlying_${a}`);if(i){const e=document.getElementById(`pop_underlying_${a}`);if(e){const{date:t}=i.dataset;e.textContent=Tt.t("ExplainUnderlying",{underlyingPrice:n,deliveryTime:t})}i.textContent=n,o.calls.forEach(fd),o.puts.forEach(fd)}const r=Ld.get(a);r&&(r.updateQuoteTableBodyHeight(),null==(t=r.quoteITMBgColorCanvas)||t.updateITMBgColor(e))}))})),u.current.subscribeQuoteEDP((e=>{(({deliveryTime:e,edp:t})=>{const n=yd(`#edp_${e}`);n&&(n.textContent=`EDP: ${t}`)})(e)})),u.current.subscribeClearOriginalBaseCoinChange((e=>{$d(e)})),u.current.subscribeQuoteTableOffLine((t=>{!e.current&&l((null==t?void 0:t.quoteList)||[]),Kd(t,T)})),u.current.subscribeQuoteTableOnLine((t=>{!e.current&&l((null==t?void 0:t.quoteList)||[]),Qd(t,0===p,I)})),u.current.subscribeMonitorError((({name:e="未定义name",data:t={}})=>{On.emitCustomError(e,t)}))}),[e]);const S=({optionType:e,symbolName:t,symbolType:n})=>{var i;a.current.findIndex((e=>e.symbolName===t))>-1||(a.current.length>3?G.warn(o("MaxSelectedSize")):(null==(i=u.current)||i.handleSymbolChecked({symbolName:t,optionType:e}),lt.track("symbolType",{symbolType:n,optionSide:e})))},O=Fa((e=>{e&&!tu&&(((e=300)=>{let t=-1;document.getElementById("quote_list").addEventListener("scroll",(()=>{pd=!0,window.clearTimeout(t),t=window.setTimeout((()=>{pd=!1}),e)}))})(),jd(e,o),Hd(e,c,S,h,u.current),e.addEventListener("click",(e=>{const t=e.target,{dataset:n}=t,{action:a="click",id:o}=n;if(o){const[e]=o.split("_");"close"===a&&(({symbolName:e})=>{var t;null==(t=u.current)||t.handleCancelSymbolChecked({symbolName:e}),lt.track("symbolCancel",{symbolCancel:!0})})({symbolName:e})}})),(e=>{const t=document.querySelector(".quote-list-wrap"),n=document.createElement("div");n.setAttribute("class","pop-explain"),t.appendChild(n);const a=document.querySelector(".pop-explain");let i=null;e.addEventListener("mouseover",(e=>{const t=e.target,{refer:r,underlyingId:s=""}=t.dataset;if(r){if("Underlying"===r){const e=document.getElementById(s);if(e){const t=e.textContent,{date:a}=e.dataset;n.setAttribute("id",`pop_${s}`),n.textContent=o(`Explain${r}`,{underlyingPrice:t,deliveryTime:a})}}else n.removeAttribute("id"),n.textContent=o(`Explain${r}`);a.setAttribute("style","display: block; z-index: 98;"),i=new Ot(t,a,{placement:"top",modifiers:{offset:{offset:"0, 10"},removeOnDestroy:!0}})}})),e.addEventListener("mouseout",(e=>{const t=e.target,{refer:n}=t.dataset;n&&(a.setAttribute("style","display: none; z-index: 0"),i&&i.destroy())}))})(e),e.style.display="block",t.current&&(t.current.style.display="none"),setTimeout((()=>{n.current&&(n.current.style.display="none")}),500))}));Jd((()=>{const e=setTimeout((()=>{0===c.length&&n.current&&(n.current.style.display="none")}),1e4);return()=>{clearTimeout(e)}}),[]);const b=(e,{element:t,size:n})=>{var a;const{height:o=520}=(null==(a=null==document?void 0:document.getElementById("quote_list"))?void 0:a.getBoundingClientRect())||{};o<n.height&&_(o)};return ut.jsxs("div",{className:"quote-list-wrap",children:[ut.jsx("div",{className:"quote-loading",ref:n,children:ut.jsx("img",{className:"option-container-loading",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBvcGFjaXR5PSIwLjUiIGN4PSI0Mi43MDA0IiBjeT0iNDMuMTk5OSIgcj0iNC44IiBmaWxsPSIjRjdBNjAwIi8+PGNpcmNsZSBvcGFjaXR5PSIwLjMiIGN4PSI1Ny4zIiBjeT0iNDMuMTk5OSIgcj0iNC44IiBmaWxsPSIjRjdBNjAwIi8+PGNpcmNsZSBjeD0iNDIuNzAwNCIgY3k9IjU2LjgiIHI9IjQuOCIgZmlsbD0iI0Y3QTYwMCIvPjxjaXJjbGUgb3BhY2l0eT0iMC42IiBjeD0iNTcuMyIgY3k9IjU2LjgiIHI9IjQuOCIgZmlsbD0iI0Y3QTYwMCIvPjwvc3ZnPg==",alt:""})}),ut.jsx("div",{className:"quote-empty",ref:t,children:ut.jsx(er,{iconSize:100})}),c.length>0&&ut.jsx(y,{width:0,height:m,minConstraints:[0,80],onResizeStart:b,onResizeStop:b,onResize:(e,{element:t,size:n})=>{_(n.height)},children:ut.jsx("div",{className:re({"is-all-quote-list":!0}),children:ut.jsx("div",{id:"quote_list",className:"quote-list",ref:O,style:{display:"none",maxHeight:`${m}px`}})})})]})},au="/option/usdc/webapi/public/v1/recentTradesByType",ou=async e=>Uo.get(au,e).then(((e={})=>e)).catch((e=>({result:{trades:[]}})));const iu=window.React,ru=window.React.useState,su=window.React.useEffect,lu=window.React.useImperativeHandle,cu={root:document.querySelector("#option_container"),rootMargin:"0px 0px 0px 0px",threshold:.1},du=T((()=>lo((()=>import("./index.734e10d9.js")),["assets/index.734e10d9.js","assets/index.b4119387.css","assets/byDeps.cf9e902d.js","assets/__commonjsHelpers__.814de68e.js","assets/byBase.02d5f47a.js","assets/byBase.3df9f9f2.css","assets/vendor.e5f221c3.js","assets/byTrade.5a0c6a61.js","assets/byTrade.a01a7ce1.css"]))),uu=iu.forwardRef(((e,t)=>{var n,a;const{toggleShowRecentTrades:o}=e,[i,r]=ru([]),[s,l]=ru({call:[],put:[]}),[c,d]=ru(!1);su((()=>{(e=>{const t=t=>{null==e||e(t.payload)};ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_RECENT_TRADES_VOLUME,callback:t})})((e=>{var t;r((null==e?void 0:e.signals)||[]),dt("common",(t=(null==e?void 0:e.signals)||[],{type:vn.UPDATE_VOLUME24,payload:t}))})),(e=>{const t=t=>{null==e||e(t.payload)};ca.subscribe({commandType:Wn.NORMAL,topic:zn.SUBSCRIBE_RECENT_TRADES,callback:t})})((e=>{l({call:e.call,put:e.put})}))}),[]),lu(t,(()=>({handleInitRecentTrades:u})),[]);const u=async(e="BTC")=>{var t,n;try{const a=await Promise.all([ou({baseCoin:e,quoteCoin:"USD",optionType:"C",size:500}),ou({baseCoin:e,quoteCoin:"USD",optionType:"P",size:500})]),o={call:(null==(t=a[0])?void 0:t.trades)||[],put:(null==(n=a[1])?void 0:n.trades)||[]};l(o),null==ca||ca.setRecentTrades(o),null==ca||ca.initByRecentTrades()}catch(a){console.error("error",a)}},m=e=>{e.forEach((e=>{e.isIntersecting&&d(!0)}))};return su((()=>{if(!c){const e=new IntersectionObserver(m,cu);return e.observe(document.querySelector("#recent-trades-wrap")),()=>{e.disconnect()}}lt.track("DerivativesPageClick",{button_name:"recentTradesInView",page_name:"OptionTradePage"})}),[c]),ut.jsx(ut.Fragment,{children:ut.jsx("div",{id:"recent-trades-wrap",className:"df recent-trades-wrap",children:c?ut.jsxs(ut.Fragment,{children:[ut.jsx(Gn,{component:du,props:{dataSource:(null==s?void 0:s.call)||[],type:"CALLS",volume24:(null==(n=i.find((e=>"C"===e.optionType)))?void 0:n.volume24)||"--",toggleFullScreen:o}}),ut.jsx(Gn,{component:du,props:{dataSource:(null==s?void 0:s.put)||[],type:"PUTS",volume24:(null==(a=i.find((e=>"P"===e.optionType)))?void 0:a.volume24)||"--",toggleFullScreen:o}})]}):null})})}));const mu=e=>(null==e?void 0:e.placeType)===Le.market,_u=e=>{const t={},{selectedSymbols:n,formDataList:a}=e;n.forEach((n=>{const{symbolName:a}=n,{orderIM:o,orderEquity:i}=function(e){const{symbolData:t,formDataList:n,commonConfig:a,positions:o,openOrders:i,subHeader:r,iInstrument:s}=e,l=n[t.symbolName],c=s[t.symbolName];if(Je(l)||Je(c)||!l.orderQty||0===l.orderQty)return{orderIM:"0.0000",orderEquity:0};const d={indexPrice:f(c.indexPrice),markPrice:f(t.markPrice),underlying:f(c.underlyingPrice),strikePrice:f(t.strikePrice),symbol:t.symbolName,orderSize:f(l.orderQty),orderPrice:f(l.orderPrice),callPutFlag:"call"===t.symbolType?0:1,buySellFlag:"buy"===t.optionType?0:1},u={MAX_IM_FACTOR:a.maxImFactor,MIN_IM_FACTOR:a.minImFactor,TAKER:a.takerFee,MM_FACTOR:a.mmFactor,MAX_PRICE_PROPORTION:a.maxProportionOfTransactionInOrderPrice,LIQUIDATION_FEE_RATE:a.liquidationFeeRate},m=new se(d,o,u,Number(r.marginBalance),i);return{orderIM:(new Y).toString(m.calRequiredMargin(),4),orderEquity:0}}(d(c({},e),{symbolData:n}));t[a]={requiredMargin:o,orderEquity:i}}));const o=Object.values(t).reduce(((e,t)=>e+f(t.requiredMargin)),0);return{symbolRequireMargins:t,totalRequireMargin:(new Y).toString(o,4)}};const pu=new class{constructor(){this.indexPriceSub=()=>{},this.symbolSub=()=>{},this.orderbookSub=()=>{},this.changeSelectedSymbolsWatch=()=>{},this.rmPmWatch=()=>{},this.userWatch=()=>{},this.lineDataWatch=()=>{},this.placeModeWatch=()=>{},this.totalDataUpdateTimer=null,this.wathchRmPmChange=()=>{const e=[],t=ja.quote.selectedSymbols;for(let n=0;n<t.length;n++){const a=t[n];e.push({symbolName:a.symbolName})}dt("order",{type:Rn.UPDATE_FORM_DATA,payload:{formData:{}}}),Ia.handleCancelAllSymbolChecked(e)},this.wathchUserChange=()=>{const e=[],t=ja.quote.selectedSymbols;for(let n=0;n<t.length;n++){const a=t[n];e.push({symbolName:a.symbolName})}dt("order",{type:Rn.UPDATE_FORM_DATA,payload:{formData:{}}}),Ia.handleCancelAllSymbolChecked(e)},this.watchChangeSelectedSymbols=()=>{const e=new Y,t={},n=ja.order.formData,a=ja.quote.selectedSymbols;let o="";for(const i of a){const{symbolName:a,optionType:r,bid:s,markPrice:l,bidIv:c,markPriceIv:d,ask:u,askIv:m,strikePrice:_,symbolType:p,deliveryTime:E}=i,{tickSize:y,tickSizeScale:T}=ja.quote.commonConfig,I="buy"===r,h=W(Number(l),y),S=e=>e<y?y:e,O=u||S(h.formatDown)||"",b=s||S(h.formatUp)||"",R=I?O:b,g=I?m||d||"":c||d||"",N=n[a];if(N){const n=N.source===qn.SYMBOL_TYPE,o=n?R:N.orderPrice,i=n?g:N.IV,{placeType:s,timeInForce:c,postOnly:d,reduceOnly:u,active:m=!1,orderQty:y}=N;t[a]={deliveryTime:E,markPrice:l,symbolType:p,strikePrice:_,optionType:r,symbolName:a,placeType:s,orderPrice:o?e.toNumber(o,T):o,IV:e.toNumber(i,1),timeInForce:c,postOnly:d,reduceOnly:u,active:m,orderQty:y}}else{const n=this.getMemoryPlaceType();t[a]={deliveryTime:E,markPrice:l,symbolType:p,strikePrice:_,symbolName:a,optionType:r,placeType:n,orderPrice:e.toNumber(R,T),IV:e.toNumber(g,1),timeInForce:n===Le.market?"3":"1",postOnly:n!==Le.market&&!Ze(),reduceOnly:!1,active:!0},o=a}}this.activateSelectedSymbol(o,t),dt("order",{type:Rn.UPDATE_FORM_DATA,payload:{formData:t}})},this.getMemoryPlaceType=()=>{const e=Ct(et);let t=Le.usd;if(e===tt)t=e?Le.iv:Le.usd;else{const n=null==e?void 0:e.split("_");2===(null==n?void 0:n.length)&&(t=1===Number(n[0])?Le.market:2===Number(n[1])?Le.iv:Le.usd)}return t},this.onCallOrPutClick=e=>{const t=e.symbolName.replace(/(-P)|(-C)/g,(function(e){return"-C"===e?"-P":"-C"}));dt("order",{type:Rn.CHANGE_CALL_PUT,payload:{formData:e,selectKey:t}}),lt.track("symbolType",{symboltype:""+(t.includes("-C")?"call":"put")})},this.updateSymbolByPlaceOrderModel=e=>{const t=Ct(Dt.OPTION_HAS_SHOW_SINGLE_HINT);if(Ia.handleSymbolListSelectMode({multiSelect:e,hasShowToast:Boolean(t)}),!e){const e=ja.order.formData,t=ja.quote.selectedSymbols,n=Object.keys(e).find((t=>e[t].active)),a=[];t.forEach((({symbolName:e})=>{e!==n&&a.push({symbolName:e})})),Ia.handleCancelAllSymbolChecked(a)}},this.hasMarketOrder=e=>{let t=!1;for(const n in e)if(mu(e[n])){t=!0;break}return t}}init(){this.initWatch(),this.timingUpdateTotalData()}initWatch(){this.rmPmWatch=_t((()=>ja.subHeader.marginStyle),this.wathchRmPmChange),this.userWatch=_t((()=>ja.common.user),(()=>{var e;(null==(e=ja.common.user)?void 0:e.id)||this.wathchUserChange()}))}timingUpdateTotalData(){clearInterval(this.totalDataUpdateTimer),this.totalDataUpdateTimer=setInterval((()=>{const{order:e,quote:t,assets:n,subHeader:a,common:o}=ja,{iInstrument:i,formData:r}=e,{selectedSymbols:s,commonConfig:l}=t,{positions:u,openOrders:m}=n,{avaliableBalance:_,isPM:p}=a,{isUMAccount:E=!1}=o.user||{},y=f(_),T=this.caculateMarketOrderPirce(r,i,l);let I={symbolRequireMargins:{},totalRequireMargin:"0.0000"};p||(I=_u({iInstrument:i,formDataList:T,selectedSymbols:s,commonConfig:l,positions:u,subHeader:a,openOrders:m,isUMAccount:E}));const{totalRequireMargin:h,symbolRequireMargins:S}=I;dt("order",{type:Rn.REFRESH_FORMINFODATA,payload:{formInfoData:S}});let O=le(T,i);O=d(c({},O),{translateX:"translateX(0px)",totalRequireMargin:h});const b=f(h);O.translateX=p?"translateX(-100%)":b>=y?"translateX(0px)":`translateX(${b/y*100-100}%)`,dt("order",{type:Rn.REFRESH_TOTALDATA,payload:{totalData:O}})}),500)}activateSelectedSymbol(e,t){if(e)Object.keys(t).forEach((n=>{n!==e&&(t[n].active=!1)}));else{const e=Object.values(t),n=e.length;if(!e.find((e=>e.active))&&e[n-1]){const a=e[n-1].symbolName;t[a].active=!0}}}clearTiming(){clearInterval(this.totalDataUpdateTimer),dt("order",{type:Rn.REFRESH_FORMINFODATA,payload:{formInfoData:{}}})}initQuoteSubscribe(){this.changeSelectedSymbolsWatch=_t((()=>ja.quote.selectedSymbols),this.watchChangeSelectedSymbols,{deep:!0}),this.indexPriceSub=Ia.subscribeIndexPrice((e=>{dt("order",{type:Rn.REFRESH_INDEX_PRICE,payload:{indexPrice:f(e.indexPrice)}})})),this.symbolSub=Ia.subscribeSymbolInstrument((e=>{dt("order",{type:Rn.REFRESH_INSTRUMENT,payload:{iInstrument:c({},e)}})})),this.orderbookSub=Ia.subscribeSymbolOrderbook((e=>{dt("order",{type:Rn.REFRESH_OUT_BOOK,payload:{orderBookData:c({},e)}})}))}unRegisterWatch(){this.wathchUserChange(),this.lineDataWatch(),this.rmPmWatch(),this.placeModeWatch(),this.userWatch(),this.clearTiming()}unRegister(){this.changeSelectedSymbolsWatch(),this.indexPriceSub(),this.orderbookSub(),this.symbolSub()}deleteOptionClick(e){Ia.handleCancelSymbolChecked({symbolName:e})}onBuyOrSellClick(e){Ia.handleChangeSymbolOption({symbolName:e.symbolName,optionType:e.optionType===Pt.Buy?Pt.Sell:Pt.Buy}),lt.track("optionSide",{symbolType:`${e.optionType===Pt.Buy?Pt.Sell:Pt.Buy}`})}changeSymbol(e){var t;dt("order",(t=e,{type:Rn.UPDATE_SELECTSYMBOL_NAME,payload:t}))}changeFormData(e,t){var n;const a=ja.order.formData;dt("order",{type:Rn.UPDATE_FORM_DATA,payload:{formData:d(c({},a),{[t]:d(c({},e),{active:(null==(n=null==a?void 0:a[e.symbolName])?void 0:n.active)||!1})})}})}caculateMarketOrderPirce(e,t,n){var a,o;let i=0;for(const r in e)if(mu(e[r])&&e[r].orderQty){i+=1;const s=(null==(a=ja.order.orderBookData)?void 0:a[r])||{},l=("buy"===e[r].optionType?null==(o=s.sell)?void 0:o.slice().reverse():s.buy)||[],c=e[r],d=t[r],u=Number(ge({commonConfig:n,formData:c,iInstrument:d,indexPrice:(null==d?void 0:d.indexPrice)||0,precision:Number(n.fePriceFractionPrecision)||1}));e[r].orderPrice=ce({markPrice:parseFloat(t[r].markPrice||""),orderList:l,orderSize:Number(c.orderQty),minOrMaxPrice:u,side:c.optionType,precision:n.tickSize})}return i&&dt("order",{type:Rn.UPDATE_FORM_DATA,payload:{formData:JSON.parse(JSON.stringify(e))}}),e}};var Eu="_select-options_1osg9_1",yu="_select-options-inner_1osg9_11",Tu="_delivery-time_1osg9_18",Iu="_delivery-time-has-data_1osg9_32",hu="_delivery-time-active_1osg9_46",Su="_delivery-time-gap_1osg9_50",Ou="_strike-select_1osg9_53",bu="_selector_1osg9_58",Ru="_select-right-by-button_1osg9_73",gu="_filter-btn_1osg9_84",Nu="_opt-design-iconfont_1osg9_90",Cu="_select-options-filter_1osg9_95",vu="_filter-fields-extend_1osg9_104",Au="_basketOrder_1osg9_111";const fu=window.React.useState,Lu=()=>{const{t:e}=Et(),[t,n]=fu(Ke("OPTION_IS_BATCH_PLACEORDER_MODEL")||!1);return Ke("OPTION_IS_BATCH_PLACEORDER_MODEL"),ut.jsxs("div",{className:Au,children:[ut.jsx(de,{value:t,onChange:()=>{const e=!t;n(e),$e("OPTION_IS_BATCH_PLACEORDER_MODEL",e),pu.updateSymbolByPlaceOrderModel(e)}}),e("basketOrder")]})},Pu=window.React.useEffect,Du=window.React.useState,wu=e=>e?e.split(",").map((e=>{let t=e;return"all"===e&&(t=e.replace("all",Tt.t("AllGears"))),{key:e,value:t}})):[{key:"all",value:Tt.t("AllGears")}],Mu=()=>{const{t:e}=Et(),t=yt((({quote:e})=>e.commonConfig)),n=yt((({common:e})=>e.baseCoin)),[a,o]=Du((()=>{var e;return null!=(e=localStorage.getItem(`OPTION_GEAR.${n}`))?e:"all"})),[i,r]=Du((()=>{const e=localStorage.getItem(`OPTION_GEARS.${n}`);return wu(e)}));Pu((()=>{const e=localStorage.getItem(`OPTION_GEARS.${n}`);r(wu(e))}),[e]),Pu((()=>{var e;const{defaultGear:a,gears:i=""}=t;if(a&&i){const t=null!=(e=localStorage.getItem(`OPTION_GEAR.${n}`))?e:a,s=i.split(",").includes(t)?t:a;o(s),r(wu(i)),localStorage.setItem(`OPTION_GEAR.${n}`,s),localStorage.setItem(`OPTION_GEARS.${n}`,i),Ia.handleChangeQuoteDisplayGear(t)}}),[t,n]);const s={modifiers:{preventOverflow:{boundariesElement:document.getElementById("quotesWrap")}}};return ut.jsxs("div",{className:`${Ou} strike-select_container`,children:[ut.jsx("span",{children:e("AroundATM")}),i.length>0?ut.jsx(ue,{placeholder:e("AroundATM"),className:bu,value:a,onChange:e=>{o(e),Ia.handleChangeQuoteDisplayGear(e),localStorage.setItem(`OPTION_GEAR.${n}`,e),lt.track("DerivativesPageClick",{button_name:"OptionStrike",page_name:"OptionTradePage",content:e})},size:"large",popperOptions:s,textAlign:"center",children:i.map((({key:e,value:t})=>ut.jsx(me,{value:e,children:t},e)))}):null]})};const xu=window.React.useEffect,Uu=window.React.useState,Bu=window.React.useRef,ku=window.React.useCallback,{THEME_SWITCH:ju}=$n,Hu=()=>{const{t:e}=Et(),{t:t}=Et("global"),[n,a]=Uu([]),[o,i]=Uu(rn()),{deliveryTimeValue:r,filterFields:s,selectedSymbols:l}=yt((({quote:e})=>({deliveryTimeValue:e.deliveryTimeValue,filterFields:e.filterFields,selectedSymbols:e.selectedSymbols}))),c=Bu(r),{positions:d,openOrders:u}=yt((({assets:e})=>({positions:e.positions,openOrders:e.openOrders}))),m=yt((({common:e})=>e.baseCoin)),[_,p]=Uu(!0),E=Fa(((e,t)=>{dt("quote",pa(e)),lt.track("DerivativesPageClick",{button_name:"OptionDeliveryTime",page_name:"OptionTradePage",content:0===e?"All":t})}));xu((()=>{Ed||(Object.keys(ja.quote.filterFields).forEach((e=>{document.querySelectorAll(`.${e}Label`).forEach((t=>{t&&(t.style.display=ja.quote.filterFields[e]?"flex":"none")}))})),Ad(Ed))}),[s]),xu((()=>{c.current=r}),[r]),xu((()=>{Ia.subscribeQuoteDeliveryTimeList((e=>{var t;if(a(e),0!==c.current){-1===(null==e?void 0:e.findIndex((e=>e.deliveryTime===c.current)))&&dt("quote",pa((null==(t=null==e?void 0:e[0])?void 0:t.deliveryTime)||0))}}))}),[]),xu((()=>{zo.on(ju,(e=>{i(e)}))}),[o]);const y=ku((e=>{if(d.findIndex((t=>t.deliveryTime===e&&t.baseCoin===m))>-1)return!0;if(l.findIndex((t=>t.deliveryTime===e&&t.baseCoin===m))>-1)return!0;return u.findIndex((t=>t.deliveryTime===e&&t.baseCoin===m))>-1}),[d,l,u]);return n.length?ut.jsxs("div",{className:re(Eu,{[vu]:_}),id:"quote-select-options",children:[ut.jsxs("div",{className:yu,children:[ut.jsx("div",{className:re(Tu,{[hu]:0===r}),onClick:()=>E(0),children:e("All")}),n.map((({deliveryTime:e,label:t},n)=>ut.jsx("div",{className:re(Tu,{[hu]:e===r,[Iu]:y(e)}),onClick:()=>E(e,n),children:t},e))),ut.jsx("div",{className:Su}),ut.jsx(Mu,{}),ut.jsx(Lu,{}),!En&&ut.jsxs("div",{className:Ru,onClick:()=>{lt.track("OptPBClick",{button_name:"OptPBClick"}),window.open(`/trade/option/usdc/pb/${ja.common.baseCoin}`)},children:[ut.jsx("img",{src:"dark"===o?"/trade/option/usdc/assets/basketOrder-dark.ee2520c3.svg":"/trade/option/usdc/assets/basketOrder-light.46ae2af9.svg",width:"16",height:"16",alt:"basket order"}),t("PositionBuilder")]}),ut.jsx("div",{className:gu,children:ut.jsx("span",{onClick:()=>p(!_),className:re("opt-design-iconfont icon-a--arrowup pointer",Nu)})})]}),ut.jsx("div",{className:Cu,children:Object.keys(s).map((t=>ut.jsx("div",{children:ut.jsx(Q,{type:"normal",color:"brand",checked:s[t],onChange:e=>{var n;dt("quote",(n={[t]:e},{type:Cn.UPDATE_FILTER_FIELDS,payload:n})),lt.track("DerivativesPageClick",{button_name:"OptionFilter",page_name:"OptionTradePage",content:`${t}${e?"On":"Off"}`})},children:e(Id[`${t}Label`])})},t)))})]}):null};const Fu=new class{constructor(){this.indexPrice=""}get(){return this.indexPrice}set(e){this.indexPrice=e}},Gu=window.React.useRef,Vu=window.React.useEffect,qu=()=>{const{t:e}=Et(),t=Gu("0"),n=yt((({common:e})=>e.baseCoin)),a=Gu("USDC");return Vu((()=>{let o="";Ia.subscribeIndexPrice((({indexPrice:i="0"})=>{const r=i-0-t.current-0;o=r>0?"▲":"▼",t.current=i,Fu.set(i),document.title=`${o} ${e("DocumentTitle",{indexPrice:i,baseCoin:n,quoteCoin:a.current})}`}))}),[n]),null},Wu=window.React.useCallback,Yu=window.React.useEffect,$u=window.React.useRef,Ku=window.React.useState;function Qu(){const e=_(),t=yt((({common:e})=>e.user)),n=sessionStorage.getItem("BY_OPTION_UNIFRAME_SESSION"),a=$u(null),{totalWalletBalance:o}=yt((({subHeader:e})=>({totalWalletBalance:e.totalWalletBalance}))),i=$u(),[r,s]=Ku(!1),l=Wu((async()=>{var t;(await(t=Zt(gt.VITE_UNIFRAME_DOMAIN),new Promise(((e,n)=>{const a=document.createElement("script");a.async=!1,a.onload=()=>{e(window.ready)},a.innerHTML=`\n    window.__Bybit_Uniframe_JSONP_CALLBACK__ = function (json) {\n      function loadjs(url, callback) {\n        var script = document.createElement('script');\n        callback = callback || function () {};\n        script.type = 'text/javascript';\n        if (script.readyState) {\n          script.onreadystatechange = function () {\n            if (script.readyState == 'loaded' || script.readyState == 'complete') {\n              script.onreadystatechange = null;\n              callback();\n            }\n          };\n        } else {\n          script.onload = function () {\n            callback();\n          };\n        }\n        script.src = url;\n        document.getElementsByTagName('head')[0].appendChild(script);\n      }\n      function loadcss(url) {\n        var cssLink = document.createElement('link');\n        cssLink.rel = 'stylesheet';\n        cssLink.rev = 'stylesheet';\n        cssLink.type = 'text/css';\n        cssLink.media = 'screen';\n        cssLink.href = url;\n        document.getElementsByTagName('head')[0].appendChild(cssLink);\n      }\n      var entrypoints =\n        json.entrypoints && json.entrypoints.length ? json.entrypoints : [];\n    \n      var hostname = location.hostname;\n      var isProd = /^[^.]+.[^.]+.[^.]+$/.test(hostname);\n      var isTestnet = isProd && /^testnet./.test(hostname);\n      var sessionStorageResourcePath = window.sessionStorage.getItem('UNIFRAME_core_resource_path');\n\n      var prefix =\n        isProd || isTestnet\n          ? '${t}/uniframe/'\n          : (sessionStorageResourcePath || '${t}/uniframe/' ||'//www.public-test-1.bybit.com/uniframe/');\n      for (var i = 0; i < entrypoints.length; i++) {\n        var asset = entrypoints[i];\n        var url = prefix + asset;\n\n        if (/.js$/.test(asset)) {\n          loadjs(url);\n        } else {\n          loadcss(url);\n        }\n      }\n    };\n    (function () {\n      // eslint-disable-next-line no-var\n      var uniFrame = {\n        readyQueue: [],\n        isReady: false,\n        uniframeIsReady: false,\n        uniframeV2IsReady: false,\n        execQueue() {\n          if (\n            (!window.__Bybit_Uniframe_JSONP_CALLBACK__ ||\n              uniFrame.uniframeIsReady) &&\n            uniFrame.uniframeV2IsReady\n          ) {\n            uniFrame.isReady = true;\n            while (uniFrame.readyQueue && uniFrame.readyQueue.length > 0) {\n              uniFrame.readyQueue.shift()(window.BybitUniFrame);\n            }\n          }\n        },\n        ready(cb) {\n          if (typeof cb === "function") {\n            uniFrame.isReady ? cb(uniFrame) : uniFrame.readyQueue.push(cb);\n          }\n        },\n      };\n      window.BybitUniFrame = uniFrame;\n      let { hostname } = location;\n      const isProdOrTestnet =\n        /^[^.]+.[^.]+.[^.]+$/.test(hostname) ||\n        /^[^.]+.[^.]+.[^.]+.(hk|uae|us|uk|jp|fr|de|au|ca|br|in|ru)$/.test(\n          hostname\n        );\n      const localStorageResourcePathV2 = window.localStorage.getItem(\n        "UNIFRAME_v2_core_resource_path"\n      );\n    \n      const prefixV2 = isProdOrTestnet\n        ? '//' + hostname + '/'\n        : localStorageResourcePathV2 || '${t}/' || "//www.public-test-1.bybit.com/";\n      const scriptV2 = document.createElement("script");\n      scriptV2.src = prefixV2 + 'uniframe-micro/uniframe.js?_=${Date.now()}';\n      document.getElementsByTagName("head")[0].appendChild(scriptV2);\n    \n      if (isProdOrTestnet) {\n        const script = document.createElement("script");\n        script.src = '/marvel-root-sw-loader.js';\n        document.getElementsByTagName("head")[0].appendChild(script);\n      }\n    })();\n    ${e(new Function("return window.BybitUniFrame.ready"))}\n    `,document.body.appendChild(a)}))))()((t=>{const{header:o,footer:r,transfer:l,globalPopup:c,demoAccountRechargeModal:d}=t,{LOGOUT:u,LANGUAGE_CHANGE:m,LOGIN:_,REGISTER:p,SYMBOL_CHANGE:E}=o.events,{TRADE_TYPE:y,SYMBOL:T,USER_INFO:I,LANGUAGE:h,LOCALES:S}=o.properties;i.current=e=>{o.setProperty(I,e)},o.init({containerId:"__option_uniframe_header__"}),o.setProperty(h,x()),o.setProperty(I,n?JSON.parse(n):{}),o.subscribeEvent(_,(()=>rr(or.LOGIN))),o.subscribeEvent(p,(()=>rr(or.REGISTER))),o.subscribeEvent(m,(e=>{var t;jn(x())||jn(e)?(_e(e),window.location.reload()):(_e(e),t=e,Tt.changeLanguage(t))})),o.subscribeEvent(u,(()=>{sessionStorage.removeItem("BY_OPTION_UNIFRAME_SESSION"),dt("common",fn({id:"",isLoginReady:!1})),Ho.post("/logout")})),o.subscribeEvent(E,(t=>{yc(t),e.push(`/trade/option/usdc/${t}`)}));const{SHOW_THEME_BUTTON:O,SHOW_SETTING_BUTTON:b}=o.properties,{HANDLE_SETTING_CLICK:R}=o.events;if(o.setProperty(O,!1),o.setProperty(b,!0),o.subscribeEvent(R,(e=>{lt.track("setting"),zo.emit($n.SETTING_DRAWER_OPEN,!0)})),r.init({containerId:"__option_uniframe_footer__"}).then((e=>{const{ROUTE_SELECT:t}=e.events,{SERVICE_DOMAIN_LIST:n,CURRENT_DOMAIN:a}=e.properties;e.setProperty(n,nt).setProperty(a,Se).subscribeEvent(t,(e=>at(e)))})),null==c||c.init(),d){const{MODAL_VISIBLE:e}=d.properties,{DIALOG_CONFIRM:t}=d.events;d.init().then((()=>{a.current=d,d.subscribeEvent(t,(()=>{a.current.setProperty(e,!1),lt.track("ReceiveAssetsPopup",{Button_name:"ReceiveNow"})}))}))}s(!0)}))}),[]);return Yu((()=>{var e;const n=sessionStorage.getItem("BY_OPTION_UNIFRAME_SESSION");t&&(null==(e=i.current)||e.call(i,n?JSON.parse(n):{}))}),[t,i,r,n]),Yu((()=>{if(En&&r&&o<=0&&-1!==o&&a.current){const{MODAL_VISIBLE:e}=a.current.properties;a.current.setProperty(e,!0)}}),[r,o,a.current]),l}const zu=window.React.useEffect,Xu=window.React.useState,Ju={baseCoin:"All"},Zu=e=>{const{coin:t="",defaultCoin:n="",needRefresh:a,targetPage:o="/trade/option/usdc/"}=e,[i,r]=Xu([]),[s,l]=Xu([]),[c,d]=Xu([]),[u,m]=Xu([]),[_,p]=Xu("");zu((()=>{E()}),[]),zu((()=>{i.length&&y(i,l)}),[i]),zu((()=>{c.length&&y(c,m)}),[c]),zu((()=>{T()}),[s,t]);const E=async()=>{try{const e=await Uo.post("/option/optionmp/baseCoin/list",{optionType:["OPTION"],version:1},!1),t=(null==e?void 0:e.filter((e=>!!e.hasSymbol)))||[];t.unshift(Ju),r(t),e.unshift(Ju),d(e)}catch(C_){r([Ju]),d([Ju])}},y=(e=[],t)=>{t(e.map((e=>e.baseCoin.toLocaleUpperCase())))},T=()=>{if(u.length){const e="BTC"===t||u.includes(t);a?!e&&(window.location.href=`${o}BTC`):p(e?t:n)}};return{coinList:i,coinEnum:s,baseCoin:_,allCoinList:c,allCoinEnum:u}};const em=window.React.useState,tm=window.React.useEffect,nm=window.React.useRef,{TRIGGER_RIGHTMODULE_UPDATE_LAYOUT_START:am,TRIGGER_RIGHTMODULE_UPDATE_LAYOUT_END:om}=$n,im=()=>{const e=yt((({quote:e})=>e.selectedSymbols)),[t,n]=em(!0),[a,o]=em(280),i=nm(!1),r=nm({startX:0,startY:0,x:0,y:0,width:0,height:0}),s=nm(0);tm((()=>{s.current=document.body.clientHeight}),[document.body.clientHeight]),tm((()=>(zo.on(om,l),()=>{zo.off(om,l)})),[]),tm((()=>(document.addEventListener("mousemove",c),document.addEventListener("mouseup",d),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d)})),[]),tm((()=>{e.length&&t&&zo.emit(am,!0)}),[e]);const l=e=>{n(!e)},c=e=>{if(i.current){e.preventDefault();const{y:t,height:n}=r.current,a=e.clientY-t,i=s.current-n;o(a<0?0:a>i?i:a)}},d=e=>{i.current=!1;const{startY:t}=r.current;Math.abs(e.clientY-t)<3&&zo.emit(am,!0)};return t?ut.jsx("span",{"data-rtl":!0,className:"opt-design-iconfont icon--slideout df aic jcc pointer ic-order-switch hover",style:{top:a},onMouseDown:e=>{i.current=!0;const{clientX:t,clientY:n,target:a}=e,{x:o,y:s,width:l,height:c}=a.getBoundingClientRect();r.current={startX:t,startY:n,x:t-o,y:n-s,width:l,height:c}}}):null};function rm(e){const{immediate:t=!1,onRegistered:n,onRegisterError:a,onActived:o}=e;let i,r=!1;"serviceWorker"in navigator&&(i=new I("/trade/option/usdc/optionSW.js",{scope:"/trade/option/usdc/"}),r=Boolean(navigator.serviceWorker.controller),i.addEventListener("activated",(e=>{r&&(null==o||o()),r=!0})),i.register({immediate:t}).then((e=>{null==n||n(e)})).catch((e=>{On.emitCustomError("PWA注册失败",{error:null==e?void 0:e.message}),null==a||a(e)})))}var sm="_header_1y7j6_1",lm="_optionLayout_1y7j6_6",cm="_footer_1y7j6_11",dm="_operateLayout_1y7j6_16",um="_quotesLayout_1y7j6_23",mm="_container_1y7j6_30",_m="_left_1y7j6_37",pm="_quotes-wrap_1y7j6_44";const Em=e=>Fo.post("/v3/config/web",e);function ym(){const e={orgWhiteList:!1,orgNotifyIgnore:!1};return Em({project_name:"bybit.option.fe",keys:["orgWhiteList","orgNotifyIgnore","tradingPerformanceOptionGray"]}).then((({data:t})=>{const n=e;try{t.forEach((({name:e,value:t})=>{n[e]="true"===t}))}catch(a){console.log(a)}return n})).catch((()=>e))}const Tm=window.React.useEffect,Im=window.React.useState,hm=()=>{const[e,t]=Im(!1),n=e=>{t(e)};return Tm((()=>{e||(zo.emit($n.PM_SWITCH_MODAL_VISIBLE,!1),zo.emit($n.SETTING_DRAWER_OPEN,!1))}),[e]),Tm((()=>(zo.on($n.SETTING_DRAWER_OPEN,n),()=>{zo.off($n.SETTING_DRAWER_OPEN,n)})),[]),{settingDrawerStatus:e,setSettingDrawerStatus:t}},Sm="OPTION_USER_TEACHING_GUIDE_DONE",Om="UNIFIED_SITE_WELCOME",bm="optionFirstTimeShowGuide",Rm="optionUTAWelcomeFirstTime",gm={requestBizCode:"USER_GUIDE",requestFrom:"LABEL_CODE_EFFECT",requestApp:"H5"},Nm={requestBizCode:"UNIFIED_SITE_WELCOME",requestFrom:"UNIFIED",requestApp:"H5"},Cm="/option/usdc/private/asset/account/singleUserLabelRelationQuery",vm=()=>{const e=d(c({},gm),{reqId:pe()});return Uo.get(Cm,e)},Am=()=>{const e=d(c({},Nm),{reqId:pe()});return Uo.get(Cm,e)},fm=(e,t=!1)=>{const n=d(c({},t?Nm:gm),{reqId:pe(),labelCodes:[e]});Uo.post("/option/usdc/private/asset/account/singleUserLabelRelationEffect",n)},Lm=e=>Uo.post("/v3/private/user/member/pref-setting",{upsert_keys:e}),Pm=window.React.useEffect,{TRADING_GUIDE_MODAL_VISIBLE:Dm,GLOBAL_GUIDE_INFO:wm}=$n,Mm={USER_GUIDE_DONE:!0,FETURE_USER_TEACHING_GUIDE_DONE:!0,OPTION_USER_TEACHING_GUIDE_DONE:!0,optionFirstTimeShowGuide:!0,optionUTAWelcomeFirstTime:!0,optionPositionShowGuide:!0},xm=(e,t)=>{t.forEach((t=>{Reflect.has(e,t)||(e[t]=!0)}))},Um=()=>{const{isLoginReady:e,isUTAccount:t,init_unified_account:n}=yt((({common:e})=>e.user))||{};Pm((()=>{e&&a()}),[e]);const a=async()=>{var e,a,i,r,s,l;try{const[c,d,u]=await Promise.allSettled([vm(),(l=[bm,Rm,"optionPositionShowGuide"],Uo.post("/v3/private/user/member/preferences",{preference_keys:l})),!En&&t&&0===n&&Am()]),m={};"fulfilled"===c.status?null==(e=c.value)||e.forEach((({labelCode:e,active:t})=>{m[e]=t})):xm(m,[Sm,"UNIFIED_SITE_WELCOME"]),"fulfilled"===d.status?(Object.entries(null!=(i=null==(a=d.value)?void 0:a.preferences)?i:{}).forEach((([e,t])=>{m[e]="hide"===t})),xm(m,[bm,Rm])):xm(m,[bm,Rm,"optionPositionShowGuide"]),"fulfilled"===u.status?u.value?null==(s=(r=u.value).forEach)||s.call(r,(e=>{const{labelCode:t,active:n}=e;m[t]=n})):m.UNIFIED_SITE_WELCOME=!0:(m[Sm]=!0,m.UNIFIED_SITE_WELCOME=!0),m[Sm]&&!m[bm]&&(Lm({[bm]:"hide"}),m[bm]=m[Sm]),m.UNIFIED_SITE_WELCOME&&!m[Rm]&&(Lm({[Rm]:"hide"}),m[Rm]=m.UNIFIED_SITE_WELCOME),o(m)}catch(C_){o(Mm)}},o=e=>{const t=!!Ct("BYBIT_OPTION_UTA_GUIDE");!t&&Nt("BYBIT_OPTION_UTA_GUIDE",0),e=d(c({},e),{isShowUTAGuid:t}),En&&(e[Sm]=!0),zo.emit(wm,e),(e=>{e[Sm]?e.UNIFIED_SITE_WELCOME||(zo.emit(Dm,{open:!0,type:Vt.UPGRADE_UTA}),fm("UNIFIED_SITE_WELCOME",!0),Lm({[Rm]:"hide"}),zo.emit(wm,d(c({},e),{UNIFIED_SITE_WELCOME:!0}))):zo.emit(Dm,{open:!0,type:Vt.NEW_USER})})(e),e[Sm]&&e.UNIFIED_SITE_WELCOME&&(e=>{e.optionPositionShowGuide||(zo.emit($n.POSITION_MOVE_DOWN_VISBLE,!0),Lm({optionPositionShowGuide:"hide"}))})(e)}};ht.extend(E);const Bm=(e,t)=>(Array(t).join(0)+e).slice(-t),km=e=>{if("number"!=typeof e||Number.isNaN(e))return{day:"00",hour:"00",min:"00",sec:"00",million:"000",extraHour:"00"};const t=Math.max(0,e),n=1e3,a=6e4,o=36e5,i=864e5,r=Math.floor(t/i),s=Bm(Math.floor(t%i/o),2);return{day:r,hour:s,min:Bm(Math.floor(t%i%o/a),2),sec:Bm(Math.floor(t%i%o%a/n),2),million:Bm(t%n,3),extraHour:Bm(Math.min(24*r+parseInt(s,10),99),2),doubleDigitDay:Bm(r,2)}};const jm=window.React.useEffect,Hm=window.React.useMemo,Fm=window.React.useState,Gm=window.React.useRef,Vm=({onlineTime:e=0})=>{const[t]=Et(),n=Gm(null),[a,o]=Fm(e-(new Date).getTime()),i=Hm((()=>function(e,t="YYYY-MM-DD HH:mm:ss"){return`${ht.utc(Number(e)).format(t)}`}(e)),[e]),r=Hm((()=>a>864e5?"typeTradingTime":"typeCountdown"),[a]),s=Hm((()=>km(a>0&&a<=864e5?a:0)),[a]);return jm((()=>(clearInterval(n.current),n.current=setInterval((()=>{const t=e-(new Date).getTime();t<=0&&window.location.reload(),o(t)}),500),()=>{clearInterval(n.current),n.current=null})),[e]),ut.jsx("div",{className:"countdown-mask",children:ut.jsxs("div",{className:"content-box",children:[ut.jsx("div",{className:"countdown-coming-soon",children:t("comingSoon")}),"typeCountdown"===r?ut.jsxs(ut.Fragment,{children:[ut.jsx("div",{children:ut.jsxs("div",{className:"cd-indicator",children:[ut.jsxs("div",{className:"cd-indicator-item",children:[ut.jsxs("div",{className:"cd-indicator-item-nums",children:[ut.jsx("div",{className:"cd-indicator-item-num",children:ut.jsx("div",{children:s.extraHour.slice(0,1)})}),ut.jsx("div",{className:"cd-indicator-item-num",children:ut.jsx("div",{children:s.extraHour.slice(1)})})]}),ut.jsx("div",{className:"cd-indicator-item-unit",children:t("countdownHour")})]}),ut.jsxs("div",{className:"cd-indicator-item",children:[ut.jsxs("div",{className:"cd-indicator-item-nums",children:[ut.jsx("div",{className:"cd-indicator-item-num",children:ut.jsx("div",{children:s.min.slice(0,1)})}),ut.jsx("div",{className:"cd-indicator-item-num",children:ut.jsx("div",{children:s.min.slice(1)})})]}),ut.jsx("div",{className:"cd-indicator-item-unit",children:t("countdownMinute")})]}),ut.jsxs("div",{className:"cd-indicator-item",children:[ut.jsxs("div",{className:"cd-indicator-item-nums",children:[ut.jsx("div",{className:"cd-indicator-item-num",children:ut.jsx("div",{children:s.sec.slice(0,1)})}),ut.jsx("div",{className:"cd-indicator-item-num",children:ut.jsx("div",{children:s.sec.slice(1)})})]}),ut.jsx("div",{className:"cd-indicator-item-unit",children:t("countdownSecond")})]})]})}),ut.jsxs("div",{className:"sub-title",children:[t("utcSubTitle"),": ",i," (UTC)"]})]}):ut.jsxs("div",{className:"title",children:[i," (UTC)"]})]})})},qm=window.React.useEffect,Wm=window.React.useRef,Ym=window.React.useState,$m=window.React.lazy,Km=window.React.Suspense,Qm=window.React.useMemo,zm=$m((()=>lo((()=>import("./Drawer.9430423a.js")),["assets/Drawer.9430423a.js","assets/Drawer.aaa2a79a.css","assets/byDeps.cf9e902d.js","assets/__commonjsHelpers__.814de68e.js","assets/byBase.02d5f47a.js","assets/byBase.3df9f9f2.css","assets/vendor.e5f221c3.js","assets/byTrade.5a0c6a61.js","assets/byTrade.a01a7ce1.css"]))),Xm=$m((()=>lo((()=>import("./index.73b23e8a.js")),["assets/index.73b23e8a.js","assets/index.f98d32d9.css","assets/byBase.02d5f47a.js","assets/byBase.3df9f9f2.css","assets/byDeps.cf9e902d.js","assets/__commonjsHelpers__.814de68e.js","assets/vendor.e5f221c3.js","assets/byTrade.5a0c6a61.js","assets/byTrade.a01a7ce1.css"]))),{TRIGGER_RIGHTMODULE_UPDATE_LAYOUT_START:Jm,THEME_SWITCH:Zm,TRADING_GUIDE_MODAL_VISIBLE:e_}=$n,t_=T((()=>lo((()=>import("./index.7eea5085.js").then((function(e){return e.i}))),["assets/index.7eea5085.js","assets/index.cd510ba1.css","assets/byDeps.cf9e902d.js","assets/__commonjsHelpers__.814de68e.js","assets/byBase.02d5f47a.js","assets/byBase.3df9f9f2.css","assets/vendor.e5f221c3.js"]))),n_=T((()=>lo((()=>import("./large.8bb1ae95.js")),["assets/large.8bb1ae95.js","assets/large.69024fe8.css","assets/byDeps.cf9e902d.js","assets/__commonjsHelpers__.814de68e.js","assets/byBase.02d5f47a.js","assets/byBase.3df9f9f2.css","assets/vendor.e5f221c3.js","assets/index.734e10d9.js","assets/index.b4119387.css","assets/byTrade.5a0c6a61.js","assets/byTrade.a01a7ce1.css"]))),a_=()=>{const e=Wm(!1),{coin:t}=h(),[n,a]=Ym(!1),o=Wm(null),[i,r]=Ym({open:!1,type:null});ze({trace_symbol:t});const{coinEnum:s,allCoinList:l,allCoinEnum:u}=Zu({coin:t,needRefresh:!0}),[m]=Et("common"),[_]=Et(),p=yt((({common:e})=>e.rtlStatus)),{reverseClickTipStatus:E}=yt((({common:e})=>e.preferences))||{},{reverseClickParams:y,setReverseClickParams:T,confirmLoading:I,setConfirmLoading:S,sendReverseCreateOrder:O,ifHideClickReverseTip:b,setIfHideClickReverseTip:R,handleReverse:g}=ot(On,!1,E);qm((()=>{s.length&&dt("common",xn(s.slice(1)))}),[s]),qm((()=>{yc(t)}),[t]);const N=Qu(),C=Wm(null),{settingDrawerStatus:v,setSettingDrawerStatus:A}=hm(),[f,L]=Ym({show:!1,type:"CALL"}),P=(e="CALLS",t)=>{L({show:null!=t?t:!f.show,type:e})},D=Qm((()=>({className:"uniform-asset__new-feat-pop-wrap",showArrow:!0,byPopoverPlace:p?"bottom-end":"bottom-start",byPopoverOpenCondition:n,newFeatTipTitle:_("tChart"),newFeatTipContent:ut.jsx("div",{children:ut.jsx("p",{children:_("tChartContent")})}),newFeatTipBtn:_("positionIKnow"),offsetX:p?40:-40,byPopperOptions:{modifiers:{preventOverflow:{behavior:["top","bottom"],boundariesElement:"html"},offset:{offset:"0, 30"}}},handleFeatTipBtnClick:()=>{zo.emit($n.POSITION_MOVE_DOWN_VISBLE,!1)},zIndexNum:98})),[_,n]);qm((()=>{const e=e=>{a(e)};return zo.on($n.POSITION_MOVE_DOWN_VISBLE,e),()=>{zo.off($n.POSITION_MOVE_DOWN_VISBLE,e)}}),[]),qm((()=>{var e;sn(),dt("common",(e=!1,{type:vn.UPDATE_PAGE_STATUS,payload:e})),(e=>{const t=Ct("BYBIT_GA_UID"),n=Ct("BYBIT_UMA_STATUS"),a=(null==n?void 0:n.split("_"))||[];Number(a[0])===Number(t)&&2===a.length&&(null==e||e(Number(a[1])))})((e=>{dt("common",fn({isUMAccount:2===e}))}))}),[]),qm((()=>{rm({onRegistered(e){window.debug_pwa=e}}),en()||N()}),[N]),qm((()=>{var n;e.current?(ca.clearOriginalBaseCoinChange(),ca.setBaseCoin(t)):(e.current=!0,ca.run(),ca.setBaseCoin(t),ca.initCommon()),ca.initByCoin(),null==(n=o.current)||n.handleInitRecentTrades(t)}),[t]),qm((()=>(e.current&&ca.subscribeAllPerp(),()=>{e.current&&(null==ca||ca.unsubscribeAllPerp())})),[e.current]),qm((()=>{(async function(){var e,t,n,a;const o=x(),[i,r,s]=await Promise.allSettled([Ho.get("/v2/private/user/profile"),Gl({preference_keys:["reverseClickTipStatus"]}),Ho.get("/contract/v5/settings/user-profile")]),l=i.value,{reverseClickTipStatus:c="show"}=(null==(e=null==r?void 0:r.value)?void 0:e.preferences)||{};dt("common",Ln({reverseClickTipStatus:c}));const{orgWhiteList:d,orgNotifyIgnore:u,tradingPerformanceOptionGray:m}=await ym(),_=await function(e){let t={};return Em({project_name:"bybit.futures.fe",keys:["config","mmRateCloseSwitch"],properties:{"device.language":e}}).then((({data:e})=>{try{e&&e.length&&e.forEach((e=>{e.value&&(t[e.name]=JSON.parse(e.value))}))}catch(n){t={}}return t})).catch((()=>({})))}(o);var p;dt("common",fn({isOrg:d,tradingPerformanceOptionGray:m})),dt("order",{type:Rn.UPDATE_USER_SETTINGS,payload:{shouldNotify:!u}}),dt("common",(p=_,{type:vn.UPDATE_FUTURES_CONFIG,payload:p}));const{id:E,grayFlag:y,member_tag:T,currency_code:I,ws3_path:h,is_submember:S}=l;let O=l.unified_account;const b=l.unified_account,R=(null==T?void 0:T.UTA)===bo.SUCCESS,g=R||2===O,N=!!y.IsUTA;(null==T?void 0:T.UTA)===bo.SUCCESS&&(O=2),(null==T?void 0:T.UTA)===bo.PROCESS&&(O=1);const C=null!=(t=null==T?void 0:T.change_utc_time_zone)?t:"24";let v=!1;"24"!==C&&(v=!0),_a.run(),_a.initByBTC({isUMAccount:g}),Nt("BYBIT_GA_UID",E),Nt("BYBIT_UMA_STATUS",`${E}_${O}`),sessionStorage.setItem("BY_OPTION_UNIFRAME_SESSION",JSON.stringify(l)),dt("common",fn({id:String(l.id),isUMAccount:g,unified_account:O,isLoginReady:!0,isGrayUUAccount:N,memberTagUTA:(null==T?void 0:T.UTA)||"",init_unified_account:b,isUTAccount:R,currencyCode:I,ws3Path:"private",isSubmember:S,changeUTCTimeZone:C,customTimeZone:v,isNewLeader:!(!(null==(n=null==s?void 0:s.value)?void 0:n.isLeader)||!(null==(a=null==s?void 0:s.value)?void 0:a.isUpgradedLeader))}))})().catch((()=>{sessionStorage.removeItem("BY_OPTION_UNIFRAME_SESSION"),dt("common",fn({id:""}))}))}),[]),qm((()=>(zo.on(Jm,w),zo.on(Zm,ln),()=>{zo.off(Jm,w),zo.off(Zm,ln)})),[]);const w=e=>{var t;null==(t=C.current)||t.style.setProperty("--right-module-width",(e?536:0)+"px")};qm((()=>{const e=e=>{r(e)};return zo.on(e_,e),()=>{zo.off(e_,e)}}),[]);const M=Qm((()=>u.slice(1)),[u]);Um();const U=Qm((()=>l.find((e=>e.baseCoin===t))),[l,t]),B=Qm((()=>U&&Date.now()<Number(U.optionOnlineTime)),[U]);return ut.jsxs("div",{ref:C,className:lm,children:[ut.jsx(qu,{}),ut.jsx("div",{className:sm,id:"__option_uniframe_header__"}),ut.jsx(To,{}),ut.jsx(Bc,{coinList:M}),ut.jsxs("div",{className:dm,children:[ut.jsx("div",{className:um,id:"option_container",children:ut.jsxs("div",{className:mm,children:[ut.jsx("div",{className:_m,children:ut.jsxs("div",{id:"quotesContainer",className:`df f1 fdc fs12 ${pm}`,children:[B?ut.jsx(Vm,{onlineTime:Number(null==U?void 0:U.optionOnlineTime)}):ut.jsxs(ut.Fragment,{children:[ut.jsx(Hu,{}),ut.jsx("div",{style:{position:"absolute",top:"72px",right:"16px"},children:ut.jsx(Xe,d(c({},D),{byPopoverAnchorEl:ut.jsx("div",{})}))}),ut.jsx(nu,{})]}),ut.jsx(Hl,{handleReverse:g}),ut.jsx(uu,{toggleShowRecentTrades:P,ref:o})]})}),ut.jsx("div",{className:cm,id:"__option_uniframe_footer__"}),ut.jsx("div",{id:"__bybit_uniframe_transfer__"})]})}),ut.jsx(Gn,{component:t_}),f.show?ut.jsx(Gn,{component:n_,props:{type:f.type,toggleFullScreen:P,handleChangeType:e=>{L((t=>d(c({},t),{type:e})))},isFullScreen:f.show}}):null]}),ut.jsx(im,{}),v?ut.jsx(Km,{fallback:ut.jsx("div",{}),children:ut.jsx(zm,{open:v,onClose:()=>A(!1)})}):null,i.open&&ut.jsx(Xm,{tradingGuideModal:i,setTradingGuideModal:r}),ut.jsx(it,{t:m,reverseClickParams:y,setReverseClickParams:T,confirmLoading:I,setConfirmLoading:S,sendReverseCreateOrder:O,ifHideClickReverseTip:b,setIfHideClickReverseTip:R,isCopyTrade:!1,onSetReverseClickTipStatus:e=>{dt("common",Ln({reverseClickTipStatus:e}))}}),ut.jsx("div",{id:"__bybit_uniframe_upgrade_unified_margin_account__"})]})},o_=T({}["/src/pages/more.tsx"]),i_=T((()=>lo((()=>import("./pwa.721e870e.js")),["assets/pwa.721e870e.js","assets/vendor.e5f221c3.js","assets/byBase.02d5f47a.js","assets/byBase.3df9f9f2.css","assets/byDeps.cf9e902d.js","assets/__commonjsHelpers__.814de68e.js","assets/byTrade.5a0c6a61.js","assets/byTrade.a01a7ce1.css"]))),r_=T((()=>lo((()=>import("./NEVER.35b1b45e.js")),["assets/NEVER.35b1b45e.js","assets/byDeps.cf9e902d.js","assets/__commonjsHelpers__.814de68e.js","assets/vendor.e5f221c3.js","assets/byBase.02d5f47a.js","assets/byBase.3df9f9f2.css"]))),s_=[{path:"/trade/option/usdc/more",component:o_,async:!0},{path:"/trade/option/usdc/pwa",component:i_,async:!0},{path:"/trade/option/usdc/pb/:coin",component:T((()=>lo((()=>import("./pb.fc2bdd9e.js")),["assets/pb.fc2bdd9e.js","assets/pb.2a784bfb.css","assets/byDeps.cf9e902d.js","assets/__commonjsHelpers__.814de68e.js","assets/index.a5fcc8f6.js","assets/byBase.02d5f47a.js","assets/byBase.3df9f9f2.css","assets/vendor.e5f221c3.js","assets/byTrade.5a0c6a61.js","assets/byTrade.a01a7ce1.css","assets/canvasChart.14343ecf.js","assets/canvasChart.a5083942.css"]))),async:!0},{path:"/trade/option/usdc/:coin",component:a_,async:!1},{path:"/",component:a_,async:!1},{path:"/trade/option/usdc/_NEVER",component:r_,async:!0}],l_=window.React.useEffect,c_=()=>(l_((()=>()=>{var e;const t=null==(e=document.getElementsByTagName("body"))?void 0:e[0],n=document.getElementById("option-app-loading");try{n&&(null==t||t.removeChild(n))}catch(a){console.warn("页面dom结构错误",a)}}),[]),ut.jsx("div",{style:{display:"flex",height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"var(--bds-gray-t3)",backgroundColor:"var(--bds-gray-bg-area)"},children:ut.jsx("img",{className:"option-container-loading loading-page",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBvcGFjaXR5PSIwLjUiIGN4PSI0Mi43MDA0IiBjeT0iNDMuMTk5OSIgcj0iNC44IiBmaWxsPSIjRjdBNjAwIi8+PGNpcmNsZSBvcGFjaXR5PSIwLjMiIGN4PSI1Ny4zIiBjeT0iNDMuMTk5OSIgcj0iNC44IiBmaWxsPSIjRjdBNjAwIi8+PGNpcmNsZSBjeD0iNDIuNzAwNCIgY3k9IjU2LjgiIHI9IjQuOCIgZmlsbD0iI0Y3QTYwMCIvPjxjaXJjbGUgb3BhY2l0eT0iMC42IiBjeD0iNTcuMyIgY3k9IjU2LjgiIHI9IjQuOCIgZmlsbD0iI0Y3QTYwMCIvPjwvc3ZnPg==",alt:""})}));let d_,u_;let m_=0;const __=(e,t="",n=!1)=>`\n  <div class="">\n    <div>\n      <div\n        class="by-dropdown by-uniframe-v2 header__nav-item by-dropdown--xx-large ${n?"header__active-nav":""}"\n      >\n        <div class="by-popover">\n          <div class="by-popover__el">\n            <div class="by-dropdown__anchor">\n              <a class="header__nav-item-box" aria-label="Read more about ${e}" href="${t}" target="_self">\n                <span class="header__nav-item">${e}</span>\n              </a>\n              <span class="icon iconfont icon-xia f-8 by-dropdown__icon brand-hover"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  `,p_=window.React.useEffect,E_=()=>{const[e,t]=Et("global");p_((()=>{const t=localStorage.getItem("simulatedTrading");"1"===t?(()=>{const e=document.getElementById(window.__STATIC_UNIFRAME_ID__);e&&setTimeout((()=>{e.remove()}),200)})():((e,t)=>{if(d_=document.getElementById(window.__STATIC_UNIFRAME_ID__),d_){const n=`\n      <header\n        class="header header-adaptive header-home f-16 gc-07 by-uniframe-v2"\n        id="staticHeader"\n        language="${t}"\n      >\n        <div style="display: none;"></div>\n        <div class="header-left" id="HEADER-LEFT">\n          <a href="/${t}" style="width: 72px">\n            <img\n              class="logo"\n              src="${window.__LOGO_BASE_64__}"\n              alt="logo"\n            />\n          </a>\n          <div id="HEADER-NAV" class="header__nav">\n            <div class="">\n              <div>\n                <div class="by-dropdown by-uniframe-v2 header__nav-item header_drop_down__more by-dropdown--xx-large">\n                  <div class="by-popover">\n                    <div class="by-popover__el">\n                      <div class="by-dropdown__anchor">\n                        <div class="header__nav-item more-icon">\n                          <div class="img"></div>\n                        </div>\n                        <span class="icon iconfont icon-xia f-8 by-dropdown__icon brand-hover"></span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            ${__(e("fiatGateway"),"/fiat/trade/express/home")}\n            ${__(e("markets"),"/data/markets/contract")}\n            ${__(e("spotTrading"),`/${t}/trade/spot/BTC/USDT`)}\n            ${__(e("trade"),`/derivatives/${t}/derivatives-home?utm_source=derivatives-header`,!0)}\n            ${__(e("tools"),`${t}/tools-discovery/`)}\n            ${__(e("Finance"),`/${t}/trade/spot/loan`)}\n            ${__(e("derivativesLinearWeb3Tag"),`/${t}/web3/`)}\n            ${__(e("contractInfo"),`/${t}/announcement-info/contract-summarize`)}\n          </div>\n        </div>\n        <div class="header-right header__nav" id="HEADER-RIGHT"></div>\n      </header>\n      `;window.__IS_UNIFRAME_CACHE__||(d_.innerHTML=n),Ee.set(window.__STATIC_UNIFRAME_CACHE_KEY__,JSON.stringify({lang:t,html:n}))}})(e,x()),dc.then((()=>{"1"!==t&&(u_=setInterval((()=>{const e=document.querySelector("#__option_uniframe_footer__ #HEADER-LEFT img");(m_>20&&window.BybitUniFrame&&window.BybitUniFrame.isReady||e)&&(clearInterval(u_),d_&&setTimeout((()=>{d_.remove()}),200)),m_+=1}),500))}))}),[])},y_=window.React.Suspense,T_=()=>(E_(),null),I_=()=>ut.jsx(y_,{fallback:ut.jsx("span",{}),children:ut.jsx(T_,{})}),h_=window.React,S_=window.React.Suspense,O_=window.React.useEffect,b_=window.React.useState;window.i18n=Tt;const R_=()=>ut.jsxs(Rt,{i18n:Tt,children:[ut.jsx(S,{children:s_.map((({path:e,component:t,async:n})=>ut.jsx(O,{path:e,children:n?ut.jsx(Gn,{component:t}):ut.jsx(t,{})},e)))}),ut.jsx(Za,{}),ut.jsx(eo,{}),ut.jsx(oo,{})]});function g_(){return ut.jsx("div",{children:ut.jsxs(S_,{fallback:ut.jsx(c_,{}),children:[ut.jsxs(bt,{value:ja,children:[ut.jsx(ye,{}),ut.jsx(R_,{})]}),ut.jsx(I_,{})]})})}ct.reactRTLJsInit(h_),(()=>{var e,t;const n=!Se||"auto"===(null==(t=null==(e=Se)?void 0:e.item)?void 0:t.domain);Oe({rt:"trade-option",includeHttpRegexp:[/\/v1/,/\/v2/,/\/v3/,/\/v5/,"/api","/option/optionmp/baseCoin/list","/option/usdc/private","/option/usdc/public/quote/query/recentTrade"],autoCdn:n})})();const N_=window.ReactDOM.hydrate;bn.start(),N_(ut.jsx(b,{children:ut.jsx((function(){const[e,t]=b_(!1),n=x();return O_((()=>{document.documentElement.dir=Hn(n)}),[n]),O_((()=>{t(!0),localStorage.setItem("OPTION_SYSTEM_VERSION","2024_02_27_06_06_21");const e=Zt(gt.VITE_BUILD_ENV);let n="production";e&&(n=e),rt({productName:"option_web",sendType:"beacon",event:n,debug:!1,env:Zt(gt.VITE_BUILD_ENV),autoUTM:!0,maxStringLength:2e3}),lt.registerPage({is_demo_account:"1"===localStorage.getItem("simulatedTrading")?1:0,platform:"pc"})}),[]),Zt(gt.DEV)?e?ut.jsx(g_,{}):null:ut.jsx(g_,{})}),{})}),document.getElementById("app"));export{Zu as $,ji as A,$o as B,Wn as C,Ko as D,zo as E,ea as F,Oa as G,ba as H,Ri as I,Vn as J,_a as K,wa as L,Ua as M,wn as N,Mn as O,Oo as P,zn as Q,Bn as R,Hi as S,Qt as T,hi as U,br as V,Ur as W,Em as X,Qu as Y,hm as Z,lo as _,Na as a,ms as a$,xn as a0,yc as a1,en as a2,sn as a3,ln as a4,Gt as a5,fn as a6,Un as a7,qu as a8,Bc as a9,Rm as aA,Lm as aB,fm as aC,Om as aD,Gi as aE,ou as aF,tr as aG,Xa as aH,yn as aI,xa as aJ,En as aK,jr as aL,Vl as aM,nn as aN,Gl as aO,gt as aP,Zr as aQ,is as aR,ls as aS,Yt as aT,gs as aU,ti as aV,In as aW,ni as aX,ei as aY,Zo as aZ,oi as a_,Ho as aa,ym as ab,Rn as ac,bo as ad,Nt as ae,Ht as af,Ft as ag,va as ah,Ca as ai,Aa as aj,fa as ak,La as al,Pa as am,Da as an,Ka as ao,Ct as ap,pu as aq,qt as ar,jt as as,xt as at,Ut as au,kt as av,Bt as aw,Vt as ax,Sm as ay,bm as az,Jr as b,Qn as b0,ps as b1,Gn as b2,or as c,Hc as d,$n as e,Io as f,rn as g,Zi as h,Fu as i,er as j,on as k,rr as l,On as m,zt as n,bi as o,ca as p,Ia as q,rm as r,ja as s,Ii as t,ga as u,Kt as v,Uo as w,Ma as x,Fa as y,Zn as z};
